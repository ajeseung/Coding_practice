!function(e){function t(){this._events={},this._conf&&n.call(this,this._conf)}function n(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners&&(this._events.maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),this.wildcard&&(this.listenerTree={}))}function o(e){this._events={},this.newListener=!1,n.call(this,e)}function r(e,t,n,o){if(!n)return[];var i,s,a,c,l,u,d,f=[],p=t.length,h=t[o],g=t[o+1];if(o===p&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(i=0,s=n._listeners.length;i<s;i++)e&&e.push(n._listeners[i]);return[n]}if("*"===h||"**"===h||n[h]){if("*"===h){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(f=f.concat(r(e,t,n[a],o+1)));return f}if("**"===h){d=o+1===p||o+2===p&&"*"===g,d&&n._listeners&&(f=f.concat(r(e,t,n,p)));for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!d&&(f=f.concat(r(e,t,n[a],p))),f=f.concat(r(e,t,n[a],o))):f=a===g?f.concat(r(e,t,n[a],o+2)):f.concat(r(e,t,n[a],o)));return f}f=f.concat(r(e,t,n[h],o+1))}if(c=n["*"],c&&r(e,t,c,o+1),l=n["**"])if(o<p){l._listeners&&r(e,t,l,p);for(a in l)"_listeners"!==a&&l.hasOwnProperty(a)&&(a===g?r(e,t,l[a],o+2):a===h?r(e,t,l[a],o+1):(u={},u[a]=l[a],r(e,t,{"**":u},o+1)))}else l._listeners?r(e,t,l,p):l["*"]&&l["*"]._listeners&&r(e,t,l["*"],p);return f}function i(e,t){e="string"==typeof e?e.split(this.delimiter):e.slice();for(var n=0,o=e.length;n+1<o;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var r=this.listenerTree,i=e.shift();i;){if(r[i]||(r[i]={}),r=r[i],0===e.length){if(r._listeners){if("function"==typeof r._listeners)r._listeners=[r._listeners,t];else if(s(r._listeners)&&(r._listeners.push(t),!r._listeners.warned)){var c=a;"undefined"!=typeof this._events.maxListeners&&(c=this._events.maxListeners),c>0&&r._listeners.length>c&&(r._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",r._listeners.length),console.trace())}}else r._listeners=t;return!0}i=e.shift()}return!0}var s=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=10;o.prototype.delimiter=".",o.prototype.setMaxListeners=function(e){this._events||t.call(this),this._events.maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e},o.prototype.event="",o.prototype.once=function(e,t){return this.many(e,1,t),this},o.prototype.many=function(e,t,n){function o(){0===--t&&r.off(e,o),n.apply(this,arguments)}var r=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return o._origin=n,this.on(e,o),r},o.prototype.emit=function(){this._events||t.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var n=arguments.length,o=new Array(n-1),i=1;i<n;i++)o[i-1]=arguments[i];for(i=0,n=this._all.length;i<n;i++)this.event=e,this._all[i].apply(this,o)}if("error"===e&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var s;if(this.wildcard){s=[];var a="string"==typeof e?e.split(this.delimiter):e.slice();r.call(this,s,a,this.listenerTree,0)}else s=this._events[e];if("function"==typeof s){if(this.event=e,1===arguments.length)s.call(this);else if(arguments.length>1)switch(arguments.length){case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:for(var n=arguments.length,o=new Array(n-1),i=1;i<n;i++)o[i-1]=arguments[i];s.apply(this,o)}return!0}if(s){for(var n=arguments.length,o=new Array(n-1),i=1;i<n;i++)o[i-1]=arguments[i];for(var c=s.slice(),i=0,n=c.length;i<n;i++)this.event=e,c[i].apply(this,o);return c.length>0||!!this._all}return!!this._all},o.prototype.on=function(e,n){if("function"==typeof e)return this.onAny(e),this;if("function"!=typeof n)throw new Error("on only accepts instances of Function");if(this._events||t.call(this),this.emit("newListener",e,n),this.wildcard)return i.call(this,e,n),this;if(this._events[e]){if("function"==typeof this._events[e])this._events[e]=[this._events[e],n];else if(s(this._events[e])&&(this._events[e].push(n),!this._events[e].warned)){var o=a;"undefined"!=typeof this._events.maxListeners&&(o=this._events.maxListeners),o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}}else this._events[e]=n;return this},o.prototype.onAny=function(e){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(e),this},o.prototype.addListener=o.prototype.on,o.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,o=[];if(this.wildcard){var i="string"==typeof e?e.split(this.delimiter):e.slice();o=r.call(this,null,i,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],o.push({_listeners:n})}for(var a=0;a<o.length;a++){var c=o[a];if(n=c._listeners,s(n)){for(var l=-1,u=0,d=n.length;u<d;u++)if(n[u]===t||n[u].listener&&n[u].listener===t||n[u]._origin&&n[u]._origin===t){l=u;break}if(l<0)continue;return this.wildcard?c._listeners.splice(l,1):this._events[e].splice(l,1),0===n.length&&(this.wildcard?delete c._listeners:delete this._events[e]),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete c._listeners:delete this._events[e])}return this},o.prototype.offAny=function(e){var t,n=0,o=0;if(e&&this._all&&this._all.length>0){for(t=this._all,n=0,o=t.length;n<o;n++)if(e===t[n])return t.splice(n,1),this}else this._all=[];return this},o.prototype.removeListener=o.prototype.off,o.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||t.call(this),this;if(this.wildcard)for(var n="string"==typeof e?e.split(this.delimiter):e.slice(),o=r.call(this,null,n,this.listenerTree,0),i=0;i<o.length;i++){var s=o[i];s._listeners=null}else{if(!this._events[e])return this;this._events[e]=null}return this},o.prototype.listeners=function(e){if(this.wildcard){var n=[],o="string"==typeof e?e.split(this.delimiter):e.slice();return r.call(this,n,o,this.listenerTree,0),n}return this._events||t.call(this),this._events[e]||(this._events[e]=[]),s(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},o.prototype.listenersAny=function(){return this._all?this._all:[]},"object"==typeof exports?exports.EventEmitter2=o:window.EventEmitter2=o}(),function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var t="undefined"!=typeof window?window:self,n=t.Q;t.Q=e(),t.Q.noConflict=function(){return t.Q=n,this}}}(function(){"use strict";function e(e){return function(){return Q.apply(e,arguments)}}function t(e){return e===Object(e)}function n(e){return"[object StopIteration]"===ne(e)||e instanceof q}function o(e,t){if(W&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&e.stack.indexOf(oe)===-1){for(var n=[],o=t;o;o=o.source)o.stack&&n.unshift(o.stack);n.unshift(e.stack);var i=n.join("\n"+oe+"\n");e.stack=r(i)}}function r(e){for(var t=e.split("\n"),n=[],o=0;o<t.length;++o){var r=t[o];a(r)||i(r)||!r||n.push(r)}return n.join("\n")}function i(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function s(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var o=/.*@(.+):(\d+)$/.exec(e);return o?[o[1],Number(o[2])]:void 0}function a(e){var t=s(e);if(!t)return!1;var n=t[0],o=t[1];return n===U&&o>=H&&o<=ce}function c(){if(W)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],o=s(n);if(!o)return;return U=o[0],o[1]}}function l(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",new Error("").stack),e.apply(e,arguments)}}function u(e){return e instanceof h?e:y(e)?C(e):x(e)}function d(){function e(e){t=e,i.source=e,$(n,function(t,n){u.nextTick(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,o=void 0}var t,n=[],o=[],r=Z(d.prototype),i=Z(h.prototype);if(i.promiseDispatch=function(e,r,i){var s=X(arguments);n?(n.push(s),"when"===r&&i[1]&&o.push(i[1])):u.nextTick(function(){t.promiseDispatch.apply(t,s)})},i.valueOf=function(){if(n)return i;var e=m(t);return v(e)&&(t=e),e},i.inspect=function(){return t?t.inspect():{state:"pending"}},u.longStackSupport&&W)try{throw new Error}catch(s){i.stack=s.stack.substring(s.stack.indexOf("\n")+1)}return r.promise=i,r.resolve=function(n){t||e(u(n))},r.fulfill=function(n){t||e(x(n))},r.reject=function(n){t||e(A(n))},r.notify=function(e){t||$(o,function(t,n){u.nextTick(function(){n(e)})},void 0)},r}function f(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=d();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function p(e){return f(function(t,n){for(var o=0,r=e.length;o<r;o++)u(e[o]).then(t,n)})}function h(e,t,n){void 0===t&&(t=function(e){return A(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var o=Z(h.prototype);if(o.promiseDispatch=function(n,r,i){var s;try{s=e[r]?e[r].apply(o,i):t.call(o,r,i)}catch(a){s=A(a)}n&&n(s)},o.inspect=n,n){var r=n();"rejected"===r.state&&(o.exception=r.reason),o.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?o:e.value}}return o}function g(e,t,n,o){return u(e).then(t,n,o)}function m(e){if(v(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function v(e){return e instanceof h}function y(e){return t(e)&&"function"==typeof e.then}function _(e){return v(e)&&"pending"===e.inspect().state}function E(e){return!v(e)||"fulfilled"===e.inspect().state}function w(e){return v(e)&&"rejected"===e.inspect().state}function b(){re.length=0,ie.length=0,ae||(ae=!0)}function T(e,t){ae&&("object"==typeof process&&"function"==typeof process.emit&&u.nextTick.runAfter(function(){K(ie,e)!==-1&&(process.emit("unhandledRejection",t,e),se.push(e))}),ie.push(e),t&&"undefined"!=typeof t.stack?re.push(t.stack):re.push("(no stack) "+t))}function S(e){if(ae){var t=K(ie,e);t!==-1&&("object"==typeof process&&"function"==typeof process.emit&&u.nextTick.runAfter(function(){var n=K(se,e);n!==-1&&(process.emit("rejectionHandled",re[t],e),se.splice(n,1))}),ie.splice(t,1),re.splice(t,1))}}function A(e){var t=h({when:function(t){return t&&S(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return T(t,e),t}function x(e){return h({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return te(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function C(e){var t=d();return u.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function R(e){return h({isDef:function(){}},function(t,n){return L(e,t,n)},function(){return u(e).inspect()})}function O(e,t,n){return u(e).spread(t,n)}function D(e){return function(){function t(e,t){var s;if("undefined"==typeof StopIteration){try{s=o[e](t)}catch(a){return A(a)}return s.done?u(s.value):g(s.value,r,i)}try{s=o[e](t)}catch(a){return n(a)?u(a.value):A(a)}return g(s,r,i)}var o=e.apply(this,arguments),r=t.bind(t,"next"),i=t.bind(t,"throw");return r()}}function I(e){u.done(u.async(e)())}function P(e){throw new q(e)}function k(e){return function(){return O([this,G(arguments)],function(t,n){return e.apply(t,n)})}}function L(e,t,n){return u(e).dispatch(t,n)}function G(e){return g(e,function(e){var t=0,n=d();return $(e,function(o,r,i){var s;v(r)&&"fulfilled"===(s=r.inspect()).state?e[i]=s.value:(++t,g(r,function(o){e[i]=o,0===--t&&n.resolve(e)},n.reject,function(e){n.notify({index:i,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function N(e){if(0===e.length)return u.resolve();var t=u.defer(),n=0;return $(e,function(o,r,i){function s(e){t.resolve(e)}function a(){n--,0===n&&t.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function c(e){t.notify({index:i,value:e})}var l=e[i];n++,g(l,s,a,c)},void 0),t.promise}function j(e){return g(e,function(e){return e=J(e,u),g(G(J(e,function(e){return g(e,V,V)})),function(){return e})})}function M(e){return u(e).allSettled()}function B(e,t){return u(e).then(void 0,void 0,t)}function F(e,t){return u(e).nodeify(t)}var W=!1;try{throw new Error}catch(z){W=!!z.stack}var U,q,H=c(),V=function(){},Y=function(){function e(){for(var e,o;n.next;)n=n.next,e=n.task,n.task=void 0,o=n.domain,o&&(n.domain=void 0,o.enter()),t(e,o);for(;a.length;)e=a.pop(),t(e);r=!1}function t(t,n){try{t()}catch(o){if(s)throw n&&n.exit(),setTimeout(e,0),n&&n.enter(),o;setTimeout(function(){throw o},0)}n&&n.exit()}var n={task:void 0,next:null},o=n,r=!1,i=void 0,s=!1,a=[];if(Y=function(e){o=o.next={task:e,domain:s&&process.domain,next:null},r||(r=!0,i())},"object"==typeof process&&"[object process]"===process.toString()&&process.nextTick)s=!0,i=function(){process.nextTick(e)};else if("function"==typeof setImmediate)i="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=function(){i=l,c.port1.onmessage=e,e()};var l=function(){c.port2.postMessage(0)};i=function(){setTimeout(e,0),l()}}else i=function(){setTimeout(e,0)};return Y.runAfter=function(e){a.push(e),r||(r=!0,i())},Y}(),Q=Function.call,X=e(Array.prototype.slice),$=e(Array.prototype.reduce||function(e,t){var n=0,o=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=o)throw new TypeError}for(;n<o;n++)n in this&&(t=e(t,this[n],n));return t}),K=e(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),J=e(Array.prototype.map||function(e,t){var n=this,o=[];return $(n,function(r,i,s){o.push(e.call(t,i,s,n))},void 0),o}),Z=Object.create||function(e){function t(){}return t.prototype=e,new t},ee=e(Object.prototype.hasOwnProperty),te=Object.keys||function(e){var t=[];for(var n in e)ee(e,n)&&t.push(n);return t},ne=e(Object.prototype.toString);q="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var oe="From previous event:";u.resolve=u,u.nextTick=Y,u.longStackSupport=!1,"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(u.longStackSupport=!0),u.defer=d,d.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(X(arguments,1)):e.resolve(n)}},u.Promise=f,u.promise=f,f.race=p,f.all=G,f.reject=A,f.resolve=u,u.passByCopy=function(e){return e},h.prototype.passByCopy=function(){return this},u.join=function(e,t){return u(e).join(t)},h.prototype.join=function(e){return u([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},u.race=p,h.prototype.race=function(){return this.then(u.race)},u.makePromise=h,h.prototype.toString=function(){return"[object Promise]"},h.prototype.then=function(e,t,n){function r(t){try{return"function"==typeof e?e(t):t}catch(n){return A(n)}}function i(e){if("function"==typeof t){o(e,a);try{return t(e)}catch(n){return A(n)}}return A(e)}function s(e){return"function"==typeof n?n(e):e}var a=this,c=d(),l=!1;return u.nextTick(function(){a.promiseDispatch(function(e){l||(l=!0,c.resolve(r(e)))},"when",[function(e){l||(l=!0,c.resolve(i(e)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=s(e)}catch(o){if(n=!0,!u.onerror)throw o;u.onerror(o)}n||c.notify(t)}]),c.promise},u.tap=function(e,t){return u(e).tap(t)},h.prototype.tap=function(e){return e=u(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},u.when=g,h.prototype.thenResolve=function(e){return this.then(function(){return e})},u.thenResolve=function(e,t){return u(e).thenResolve(t)},h.prototype.thenReject=function(e){return this.then(function(){throw e})},u.thenReject=function(e,t){return u(e).thenReject(t)},u.nearer=m,u.isPromise=v,u.isPromiseAlike=y,u.isPending=_,h.prototype.isPending=function(){return"pending"===this.inspect().state},u.isFulfilled=E,h.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},u.isRejected=w,h.prototype.isRejected=function(){return"rejected"===this.inspect().state};var re=[],ie=[],se=[],ae=!0;u.resetUnhandledRejections=b,u.getUnhandledReasons=function(){return re.slice()},u.stopUnhandledRejectionTracking=function(){b(),ae=!1},b(),u.reject=A,u.fulfill=x,u.master=R,u.spread=O,h.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},u.async=D,u.spawn=I,u["return"]=P,u.promised=k,u.dispatch=L,h.prototype.dispatch=function(e,t){var n=this,o=d();return u.nextTick(function(){n.promiseDispatch(o.resolve,e,t)}),o.promise},u.get=function(e,t){return u(e).dispatch("get",[t])},h.prototype.get=function(e){return this.dispatch("get",[e])},u.set=function(e,t,n){return u(e).dispatch("set",[t,n])},h.prototype.set=function(e,t){return this.dispatch("set",[e,t])},u.del=u["delete"]=function(e,t){return u(e).dispatch("delete",[t])},h.prototype.del=h.prototype["delete"]=function(e){return this.dispatch("delete",[e])},u.mapply=u.post=function(e,t,n){return u(e).dispatch("post",[t,n])},h.prototype.mapply=h.prototype.post=function(e,t){return this.dispatch("post",[e,t])},u.send=u.mcall=u.invoke=function(e,t){return u(e).dispatch("post",[t,X(arguments,2)])},h.prototype.send=h.prototype.mcall=h.prototype.invoke=function(e){return this.dispatch("post",[e,X(arguments,1)])},u.fapply=function(e,t){return u(e).dispatch("apply",[void 0,t])},h.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},u["try"]=u.fcall=function(e){return u(e).dispatch("apply",[void 0,X(arguments,1)])},h.prototype.fcall=function(){return this.dispatch("apply",[void 0,X(arguments)])},u.fbind=function(e){var t=u(e),n=X(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(X(arguments))])}},h.prototype.fbind=function(){var e=this,t=X(arguments);return function(){return e.dispatch("apply",[this,t.concat(X(arguments))])}},u.keys=function(e){return u(e).dispatch("keys",[])},h.prototype.keys=function(){return this.dispatch("keys",[])},u.all=G,h.prototype.all=function(){return G(this)},u.any=N,h.prototype.any=function(){return N(this)},u.allResolved=l(j,"allResolved","allSettled"),h.prototype.allResolved=function(){return j(this)},u.allSettled=M,h.prototype.allSettled=function(){return this.then(function(e){return G(J(e,function(e){function t(){return e.inspect()}return e=u(e),e.then(t,t)}))})},u.fail=u["catch"]=function(e,t){return u(e).then(void 0,t)},h.prototype.fail=h.prototype["catch"]=function(e){return this.then(void 0,e)},u.progress=B,h.prototype.progress=function(e){return this.then(void 0,void 0,e)},u.fin=u["finally"]=function(e,t){return u(e)["finally"](t)},h.prototype.fin=h.prototype["finally"]=function(e){return e=u(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},u.done=function(e,t,n,o){return u(e).done(t,n,o)},h.prototype.done=function(e,t,n){var r=function(e){u.nextTick(function(){if(o(e,i),!u.onerror)throw e;u.onerror(e)})},i=e||t||n?this.then(e,t,n):this;"object"==typeof process&&process&&process.domain&&(r=process.domain.bind(r)),i.then(void 0,r)},u.timeout=function(e,t,n){return u(e).timeout(t,n)},h.prototype.timeout=function(e,t){var n=d(),o=setTimeout(function(){t&&"string"!=typeof t||(t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT"),n.reject(t)},e);return this.then(function(e){clearTimeout(o),n.resolve(e)},function(e){clearTimeout(o),n.reject(e)},n.notify),n.promise},u.delay=function(e,t){return void 0===t&&(t=e,e=void 0),u(e).delay(t)},h.prototype.delay=function(e){return this.then(function(t){var n=d();return setTimeout(function(){n.resolve(t)},e),n.promise})},u.nfapply=function(e,t){return u(e).nfapply(t)},h.prototype.nfapply=function(e){var t=d(),n=X(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},u.nfcall=function(e){var t=X(arguments,1);return u(e).nfapply(t)},h.prototype.nfcall=function(){var e=X(arguments),t=d();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},u.nfbind=u.denodeify=function(e){var t=X(arguments,1);return function(){var n=t.concat(X(arguments)),o=d();return n.push(o.makeNodeResolver()),u(e).fapply(n).fail(o.reject),o.promise}},h.prototype.nfbind=h.prototype.denodeify=function(){var e=X(arguments);return e.unshift(this),u.denodeify.apply(void 0,e)},u.nbind=function(e,t){var n=X(arguments,2);return function(){function o(){return e.apply(t,arguments)}var r=n.concat(X(arguments)),i=d();return r.push(i.makeNodeResolver()),u(o).fapply(r).fail(i.reject),i.promise}},h.prototype.nbind=function(){var e=X(arguments,0);return e.unshift(this),u.nbind.apply(void 0,e)},u.nmapply=u.npost=function(e,t,n){return u(e).npost(t,n)},h.prototype.nmapply=h.prototype.npost=function(e,t){var n=X(t||[]),o=d();return n.push(o.makeNodeResolver()),this.dispatch("post",[e,n]).fail(o.reject),o.promise},u.nsend=u.nmcall=u.ninvoke=function(e,t){var n=X(arguments,2),o=d();return n.push(o.makeNodeResolver()),u(e).dispatch("post",[t,n]).fail(o.reject),o.promise},h.prototype.nsend=h.prototype.nmcall=h.prototype.ninvoke=function(e){var t=X(arguments,1),n=d();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},u.nodeify=F,h.prototype.nodeify=function(e){return e?void this.then(function(t){u.nextTick(function(){e(null,t)})},function(t){u.nextTick(function(){e(t)})}):this},u.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ce=c();return u}),function(e){var t=function(t){this._options={checkOnLoad:!1,resetOnEnd:!1,loopCheckTime:50,loopMaxNumber:5,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",debug:!1},this._var={version:"3.2.1",bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}},void 0!==t&&this.setOption(t);var n=this,o=function(){setTimeout(function(){n._options.checkOnLoad===!0&&(n._options.debug===!0&&n._log("onload->eventCallback","A check loading is launched"),null===n._var.bait&&n._creatBait(),setTimeout(function(){n.check()},1))},1)};void 0!==e.addEventListener?e.addEventListener("load",o,!1):e.attachEvent("onload",o)};t.prototype._options=null,t.prototype._var=null,t.prototype._bait=null,t.prototype._log=function(e,t){console.log("[BlockAdBlock]["+e+"] "+t)},t.prototype.setOption=function(e,t){if(void 0!==t){var n=e;e={},e[n]=t}for(var o in e)this._options[o]=e[o],this._options.debug===!0&&this._log("setOption",'The option "'+o+'" he was assigned to "'+e[o]+'"');return this},t.prototype._creatBait=function(){var t=document.createElement("div");t.setAttribute("class",this._options.baitClass),t.setAttribute("style",this._options.baitStyle),this._var.bait=e.document.body.appendChild(t),this._var.bait.offsetParent,this._var.bait.offsetHeight,this._var.bait.offsetLeft,this._var.bait.offsetTop,this._var.bait.offsetWidth,this._var.bait.clientHeight,this._var.bait.clientWidth,this._options.debug===!0&&this._log("_creatBait","Bait has been created")},t.prototype._destroyBait=function(){e.document.body.removeChild(this._var.bait),this._var.bait=null,this._options.debug===!0&&this._log("_destroyBait","Bait has been removed")},t.prototype.check=function(e){if(void 0===e&&(e=!0),this._options.debug===!0&&this._log("check","An audit was requested "+(e===!0?"with a":"without")+" loop"),this._var.checking===!0)return this._options.debug===!0&&this._log("check","A check was canceled because there is already an ongoing"),!1;this._var.checking=!0,null===this._var.bait&&this._creatBait();var t=this;return this._var.loopNumber=0,e===!0&&(this._var.loop=setInterval(function(){t._checkBait(e)},this._options.loopCheckTime)),setTimeout(function(){t._checkBait(e)},1),this._options.debug===!0&&this._log("check","A check is in progress ..."),!0},t.prototype._checkBait=function(t){var n=!1;if(null===this._var.bait&&this._creatBait(),null===e.document.body.getAttribute("abp")&&null!==this._var.bait.offsetParent&&0!=this._var.bait.offsetHeight&&0!=this._var.bait.offsetLeft&&0!=this._var.bait.offsetTop&&0!=this._var.bait.offsetWidth&&0!=this._var.bait.clientHeight&&0!=this._var.bait.clientWidth||(n=!0),void 0!==e.getComputedStyle){var o=e.getComputedStyle(this._var.bait,null);!o||"none"!=o.getPropertyValue("display")&&"hidden"!=o.getPropertyValue("visibility")||(n=!0)}this._options.debug===!0&&this._log("_checkBait","A check ("+(this._var.loopNumber+1)+"/"+this._options.loopMaxNumber+" ~"+(1+this._var.loopNumber*this._options.loopCheckTime)+"ms) was conducted and detection is "+(n===!0?"positive":"negative")),t===!0&&(this._var.loopNumber++,this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop()),n===!0?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),t===!0&&(this._var.checking=!1)):null!==this._var.loop&&t!==!1||(this._destroyBait(),this.emitEvent(!1),t===!0&&(this._var.checking=!1))},t.prototype._stopLoop=function(e){clearInterval(this._var.loop),this._var.loop=null,this._var.loopNumber=0,this._options.debug===!0&&this._log("_stopLoop","A loop has been stopped")},t.prototype.emitEvent=function(e){this._options.debug===!0&&this._log("emitEvent","An event with a "+(e===!0?"positive":"negative")+" detection was called");var t=this._var.event[e===!0?"detected":"notDetected"];for(var n in t)this._options.debug===!0&&this._log("emitEvent","Call function "+(parseInt(n)+1)+"/"+t.length),t.hasOwnProperty(n)&&t[n]();return this._options.resetOnEnd===!0&&this.clearEvent(),this},t.prototype.clearEvent=function(){this._var.event.detected=[],this._var.event.notDetected=[],this._options.debug===!0&&this._log("clearEvent","The event list has been cleared")},t.prototype.on=function(e,t){return this._var.event[e===!0?"detected":"notDetected"].push(t),this._options.debug===!0&&this._log("on",'A type of event "'+(e===!0?"detected":"notDetected")+'" was added'),this},t.prototype.onDetected=function(e){return this.on(!0,e)},t.prototype.onNotDetected=function(e){return this.on(!1,e)},e.BlockAdBlock=t,void 0===e.blockAdBlock&&(e.blockAdBlock=new t({checkOnLoad:!0,resetOnEnd:!0}))}(window),function(e){if(e.document){var t=e.document;t.querySelectorAll||(t.querySelectorAll=function(n){var o,r=t.createElement("style"),i=[];for(t.documentElement.firstChild.appendChild(r),t._qsa=[],r.styleSheet.cssText=n+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",e.scrollBy(0,0),r.parentNode.removeChild(r);t._qsa.length;)o=t._qsa.shift(),o.style.removeAttribute("x-qsa"),i.push(o);return t._qsa=null,i}),t.querySelector||(t.querySelector=function(e){var n=t.querySelectorAll(e);return n.length?n[0]:null}),t.getElementsByClassName||(t.getElementsByClassName=function(e){return e=String(e).replace(/^|\s+/g,"."),t.querySelectorAll(e)}),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw TypeError("Object.keys called on non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw TypeError();var o,r=arguments[1];for(o=0;o<n;o++)o in t&&e.call(r,t[o],o,t)}),function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.atob=e.atob||function(e){e=String(e);var n,o=0,r=[],i=0,s=0;if(e=e.replace(/\s/g,""),e.length%4===0&&(e=e.replace(/=+$/,"")),e.length%4===1)throw Error("InvalidCharacterError");if(/[^+\/0-9A-Za-z]/.test(e))throw Error("InvalidCharacterError");for(;o<e.length;)n=t.indexOf(e.charAt(o)),i=i<<6|n,s+=6,24===s&&(r.push(String.fromCharCode(i>>16&255)),r.push(String.fromCharCode(i>>8&255)),r.push(String.fromCharCode(255&i)),s=0,i=0),o+=1;return 12===s?(i>>=4,r.push(String.fromCharCode(255&i))):18===s&&(i>>=2,r.push(String.fromCharCode(i>>8&255)),r.push(String.fromCharCode(255&i))),r.join("")},e.btoa=e.btoa||function(e){e=String(e);var n,o,r,i,s,a,c,l=0,u=[];if(/[^\x00-\xFF]/.test(e))throw Error("InvalidCharacterError");for(;l<e.length;)n=e.charCodeAt(l++),o=e.charCodeAt(l++),r=e.charCodeAt(l++),i=n>>2,s=(3&n)<<4|o>>4,a=(15&o)<<2|r>>6,c=63&r,l===e.length+2?(a=64,c=64):l===e.length+1&&(c=64),u.push(t.charAt(i),t.charAt(s),t.charAt(a),t.charAt(c));return u.join("")}}(e),Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e){var t=this.__proto__||this.constructor.prototype;return e in this&&(!(e in t)||t[e]!==this[e])}),function(){if("performance"in e==!1&&(e.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in e.performance==!1){var t=Date.now();performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),e.performance.now=function(){return Date.now()-t}}}(),e.requestAnimationFrame||(e.webkitRequestAnimationFrame&&e.webkitCancelAnimationFrame?!function(e){e.requestAnimationFrame=function(t){return webkitRequestAnimationFrame(function(){t(e.performance.now())})},e.cancelAnimationFrame=e.webkitCancelAnimationFrame}(e):e.mozRequestAnimationFrame&&e.mozCancelAnimationFrame?!function(e){e.requestAnimationFrame=function(t){return mozRequestAnimationFrame(function(){t(e.performance.now())})},e.cancelAnimationFrame=e.mozCancelAnimationFrame}(e):!function(e){e.requestAnimationFrame=function(t){return e.setTimeout(t,1e3/60)},e.cancelAnimationFrame=e.clearTimeout}(e))}}(this),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Holder=t():e.Holder=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){(function(t){function o(e,t,n,o){var s=r(n.substr(n.lastIndexOf(e.domain)),e);s&&i({mode:null,el:o,flags:s,engineSettings:t})}function r(e,t){var n={theme:x(D.settings.themes.gray,null),stylesheets:t.stylesheets,instanceOptions:t},o=e.indexOf("?"),r=[e];o!==-1&&(r=[e.slice(0,o),e.slice(o+1)]);var i=r[0].split("/");n.holderURL=e;var s=i[1],a=s.match(/([\d]+p?)x([\d]+p?)/);if(!a)return!1;if(n.fluid=s.indexOf("p")!==-1,n.dimensions={width:a[1].replace("p","%"),height:a[2].replace("p","%")},2===r.length){var c=v.parse(r[1]);if(_.truthy(c.ratio)){n.fluid=!0;var l=parseFloat(n.dimensions.width.replace("%","")),u=parseFloat(n.dimensions.height.replace("%",""));u=Math.floor(100*(u/l)),l=100,n.dimensions.width=l+"%",n.dimensions.height=u+"%"}if(n.auto=_.truthy(c.auto),c.bg&&(n.theme.bg=_.parseColor(c.bg)),c.fg&&(n.theme.fg=_.parseColor(c.fg)),c.bg&&!c.fg&&(n.autoFg=!0),c.theme&&n.instanceOptions.themes.hasOwnProperty(c.theme)&&(n.theme=x(n.instanceOptions.themes[c.theme],null)),c.text&&(n.text=c.text),c.textmode&&(n.textmode=c.textmode),
c.size&&(n.size=c.size),c.font&&(n.font=c.font),c.align&&(n.align=c.align),c.lineWrap&&(n.lineWrap=c.lineWrap),n.nowrap=_.truthy(c.nowrap),n.outline=_.truthy(c.outline),_.truthy(c.random)){D.vars.cache.themeKeys=D.vars.cache.themeKeys||Object.keys(n.instanceOptions.themes);var d=D.vars.cache.themeKeys[0|Math.random()*D.vars.cache.themeKeys.length];n.theme=x(n.instanceOptions.themes[d],null)}}return n}function i(e){var t=e.mode,n=e.el,o=e.flags,r=e.engineSettings,i=o.dimensions,a=o.theme,c=i.width+"x"+i.height;t=null==t?o.fluid?"fluid":"image":t;var d=/holder_([a-z]+)/g,f=!1;if(null!=o.text&&(a.text=o.text,"object"===n.nodeName.toLowerCase())){for(var p=a.text.split("\\n"),h=0;h<p.length;h++)p[h]=_.encodeHtmlEntity(p[h]);a.text=p.join("\\n")}if(a.text){var g=a.text.match(d);null!==g&&g.forEach(function(e){"holder_dimensions"===e&&(a.text=a.text.replace(e,c))})}var m=o.holderURL,v=x(r,null);if(o.font&&(a.font=o.font,!v.noFontFallback&&"img"===n.nodeName.toLowerCase()&&D.setup.supportsCanvas&&"svg"===v.renderer&&(v=x(v,{renderer:"canvas"}))),o.font&&"canvas"==v.renderer&&(v.reRender=!0),"background"==t)null==n.getAttribute("data-background-src")&&w.setAttr(n,{"data-background-src":m});else{var y={};y[D.vars.dataAttr]=m,w.setAttr(n,y)}o.theme=a,n.holderData={flags:o,engineSettings:v},"image"!=t&&"fluid"!=t||w.setAttr(n,{alt:a.text?f?a.text:a.text+" ["+c+"]":c});var E={mode:t,el:n,holderSettings:{dimensions:i,theme:a,flags:o},engineSettings:v};"image"==t?(o.auto||(n.style.width=i.width+"px",n.style.height=i.height+"px"),"html"==v.renderer?n.style.backgroundColor=a.bg:(s(E),"exact"==o.textmode&&(n.holderData.resizeUpdate=!0,D.vars.resizableImages.push(n),l(n)))):"background"==t&&"html"!=v.renderer?s(E):"fluid"==t&&(n.holderData.resizeUpdate=!0,"%"==i.height.slice(-1)?n.style.height=i.height:null!=o.auto&&o.auto||(n.style.height=i.height+"px"),"%"==i.width.slice(-1)?n.style.width=i.width:null!=o.auto&&o.auto||(n.style.width=i.width+"px"),"inline"!=n.style.display&&""!==n.style.display&&"none"!=n.style.display||(n.style.display="block"),u(n),"html"==v.renderer?n.style.backgroundColor=a.bg:(D.vars.resizableImages.push(n),l(n)))}function s(e){function n(){var t=null;switch(c.renderer){case"canvas":t=A(u,e);break;case"svg":t=S(u,e);break;default:throw"Holder: invalid renderer: "+c.renderer}return t}var o=null,r=e.mode,i=e.el,s=e.holderSettings,c=e.engineSettings;switch(c.renderer){case"svg":if(!D.setup.supportsSVG)return;break;case"canvas":if(!D.setup.supportsCanvas)return;break;default:return}var l={width:s.dimensions.width,height:s.dimensions.height,theme:s.theme,flags:s.flags},u=a(l);if(o=n(),null==o)throw"Holder: couldn't render placeholder";"background"==r?(i.style.backgroundImage="url("+o+")",c.noBackgroundSize||(i.style.backgroundSize=l.width+"px "+l.height+"px")):("img"===i.nodeName.toLowerCase()?w.setAttr(i,{src:o}):"object"===i.nodeName.toLowerCase()&&w.setAttr(i,{data:o,type:"image/svg+xml"}),c.reRender&&t.setTimeout(function(){var e=n();if(null==e)throw"Holder: couldn't render placeholder";"img"===i.nodeName.toLowerCase()?w.setAttr(i,{src:e}):"object"===i.nodeName.toLowerCase()&&w.setAttr(i,{data:e,type:"image/svg+xml"})},150)),w.setAttr(i,{"data-holder-rendered":!0})}function a(e){function t(e,t,n,o){t.width=n,t.height=o,e.width=Math.max(e.width,t.width),e.height+=t.height}var n=D.defaults.size;switch(parseFloat(e.theme.size)?n=e.theme.size:parseFloat(e.flags.size)&&(n=e.flags.size),e.font={family:e.theme.font?e.theme.font:"Arial, Helvetica, Open Sans, sans-serif",size:c(e.width,e.height,n,D.defaults.scale),units:e.theme.units?e.theme.units:D.defaults.units,weight:e.theme.fontweight?e.theme.fontweight:"bold"},e.text=e.theme.text||Math.floor(e.width)+"x"+Math.floor(e.height),e.noWrap=e.theme.nowrap||e.flags.nowrap,e.align=e.theme.align||e.flags.align||"center",e.flags.textmode){case"literal":e.text=e.flags.dimensions.width+"x"+e.flags.dimensions.height;break;case"exact":if(!e.flags.exactDimensions)break;e.text=Math.floor(e.flags.exactDimensions.width)+"x"+Math.floor(e.flags.exactDimensions.height)}var o=e.flags.lineWrap||D.setup.lineWrapRatio,r=e.width*o,i=r,s=new y({width:e.width,height:e.height}),a=s.Shape,l=new a.Rect("holderBg",{fill:e.theme.bg});if(l.resize(e.width,e.height),s.root.add(l),e.flags.outline){var u=new b(l.properties.fill);u=u.lighten(u.lighterThan("7f7f7f")?-.1:.1),l.properties.outline={fill:u.toHex(!0),width:2}}var d=e.theme.fg;if(e.flags.autoFg){var f=new b(l.properties.fill),p=new b("fff"),h=new b("000",{alpha:.285714});d=f.blendAlpha(f.lighterThan("7f7f7f")?h:p).toHex(!0)}var g=new a.Group("holderTextGroup",{text:e.text,align:e.align,font:e.font,fill:d});g.moveTo(null,null,1),s.root.add(g);var m=g.textPositionData=I(s);if(!m)throw"Holder: staging fallback not supported yet.";g.properties.leading=m.boundingBox.height;var v=null,_=null;if(m.lineCount>1){var E,w=0,T=0,S=0;_=new a.Group("line"+S),"left"!==e.align&&"right"!==e.align||(i=e.width*(1-2*(1-o)));for(var A=0;A<m.words.length;A++){var x=m.words[A];v=new a.Text(x.text);var C="\\n"==x.text;!e.noWrap&&(w+x.width>=i||C===!0)&&(t(g,_,w,g.properties.leading),g.add(_),w=0,T+=g.properties.leading,S+=1,_=new a.Group("line"+S),_.y=T),C!==!0&&(v.moveTo(w,0),w+=m.spaceWidth+x.width,_.add(v))}if(t(g,_,w,g.properties.leading),g.add(_),"left"===e.align)g.moveTo(e.width-r,null,null);else if("right"===e.align){for(E in g.children)_=g.children[E],_.moveTo(e.width-_.width,null,null);g.moveTo(0-(e.width-r),null,null)}else{for(E in g.children)_=g.children[E],_.moveTo((g.width-_.width)/2,null,null);g.moveTo((e.width-g.width)/2,null,null)}g.moveTo(null,(e.height-g.height)/2,null),(e.height-g.height)/2<0&&g.moveTo(null,0,null)}else v=new a.Text(e.text),_=new a.Group("line0"),_.add(v),g.add(_),"left"===e.align?g.moveTo(e.width-r,null,null):"right"===e.align?g.moveTo(0-(e.width-r),null,null):g.moveTo((e.width-m.boundingBox.width)/2,null,null),g.moveTo(null,(e.height-m.boundingBox.height)/2,null);return s}function c(e,t,n,o){var r=parseInt(e,10),i=parseInt(t,10),s=Math.max(r,i),a=Math.min(r,i),c=.8*Math.min(a,s*o);return Math.round(Math.max(n,c))}function l(e){var t;t=null==e||null==e.nodeType?D.vars.resizableImages:[e];for(var n=0,o=t.length;n<o;n++){var r=t[n];if(r.holderData){var i=r.holderData.flags,a=C(r);if(a){if(!r.holderData.resizeUpdate)continue;if(i.fluid&&i.auto){var c=r.holderData.fluidConfig;switch(c.mode){case"width":a.height=a.width/c.ratio;break;case"height":a.width=a.height*c.ratio}}var l={mode:"image",holderSettings:{dimensions:a,theme:i.theme,flags:i},el:r,engineSettings:r.holderData.engineSettings};"exact"==i.textmode&&(i.exactDimensions=a,l.holderSettings.dimensions=i.dimensions),s(l)}else p(r)}}}function u(e){if(e.holderData){var t=C(e);if(t){var n=e.holderData.flags,o={fluidHeight:"%"==n.dimensions.height.slice(-1),fluidWidth:"%"==n.dimensions.width.slice(-1),mode:null,initialDimensions:t};o.fluidWidth&&!o.fluidHeight?(o.mode="width",o.ratio=o.initialDimensions.width/parseFloat(n.dimensions.height)):!o.fluidWidth&&o.fluidHeight&&(o.mode="height",o.ratio=parseFloat(n.dimensions.width)/o.initialDimensions.height),e.holderData.fluidConfig=o}else p(e)}}function d(){var e,n=[],o=Object.keys(D.vars.invisibleImages);o.forEach(function(t){e=D.vars.invisibleImages[t],C(e)&&"img"==e.nodeName.toLowerCase()&&(n.push(e),delete D.vars.invisibleImages[t])}),n.length&&O.run({images:n}),setTimeout(function(){t.requestAnimationFrame(d)},10)}function f(){D.vars.visibilityCheckStarted||(t.requestAnimationFrame(d),D.vars.visibilityCheckStarted=!0)}function p(e){e.holderData.invisibleId||(D.vars.invisibleId+=1,D.vars.invisibleImages["i"+D.vars.invisibleId]=e,e.holderData.invisibleId=D.vars.invisibleId)}function h(e){D.vars.debounceTimer||e.call(this),D.vars.debounceTimer&&t.clearTimeout(D.vars.debounceTimer),D.vars.debounceTimer=t.setTimeout(function(){D.vars.debounceTimer=null,e.call(this)},D.setup.debounce)}function g(){h(function(){l(null)})}var m=n(2),v=n(3),y=n(6),_=n(7),E=n(8),w=n(9),b=n(10),T=n(11),S=n(12),A=n(15),x=_.extend,C=_.dimensionCheck,R=T.svg_ns,O={version:T.version,addTheme:function(e,t){return null!=e&&null!=t&&(D.settings.themes[e]=t),delete D.vars.cache.themeKeys,this},addImage:function(e,t){var n=w.getNodeArray(t);return n.forEach(function(t){var n=w.newEl("img"),o={};o[D.setup.dataAttr]=e,w.setAttr(n,o),t.appendChild(n)}),this},setResizeUpdate:function(e,t){e.holderData&&(e.holderData.resizeUpdate=!!t,e.holderData.resizeUpdate&&l(e))},run:function(e){e=e||{};var n={},s=x(D.settings,e);D.vars.preempted=!0,D.vars.dataAttr=s.dataAttr||D.setup.dataAttr,n.renderer=s.renderer?s.renderer:D.setup.renderer,D.setup.renderers.join(",").indexOf(n.renderer)===-1&&(n.renderer=D.setup.supportsSVG?"svg":D.setup.supportsCanvas?"canvas":"html");var a=w.getNodeArray(s.images),c=w.getNodeArray(s.bgnodes),l=w.getNodeArray(s.stylenodes),u=w.getNodeArray(s.objects);return n.stylesheets=[],n.svgXMLStylesheet=!0,n.noFontFallback=!!s.noFontFallback,n.noBackgroundSize=!!s.noBackgroundSize,l.forEach(function(e){if(e.attributes.rel&&e.attributes.href&&"stylesheet"==e.attributes.rel.value){var t=e.attributes.href.value,o=w.newEl("a");o.href=t;var r=o.protocol+"//"+o.host+o.pathname+o.search;n.stylesheets.push(r)}}),c.forEach(function(e){if(t.getComputedStyle){var o=t.getComputedStyle(e,null).getPropertyValue("background-image"),a=e.getAttribute("data-background-src"),c=a||o,l=null,u=s.domain+"/",d=c.indexOf(u);if(0===d)l=c;else if(1===d&&"?"===c[0])l=c.slice(1);else{var f=c.substr(d).match(/([^\"]*)"?\)/);if(null!==f)l=f[1];else if(0===c.indexOf("url("))throw"Holder: unable to parse background URL: "+c}if(l){var p=r(l,s);p&&i({mode:"background",el:e,flags:p,engineSettings:n})}}}),u.forEach(function(e){var t={};try{t.data=e.getAttribute("data"),t.dataSrc=e.getAttribute(D.vars.dataAttr)}catch(r){}var i=null!=t.data&&0===t.data.indexOf(s.domain),a=null!=t.dataSrc&&0===t.dataSrc.indexOf(s.domain);i?o(s,n,t.data,e):a&&o(s,n,t.dataSrc,e)}),a.forEach(function(e){var t={};try{t.src=e.getAttribute("src"),t.dataSrc=e.getAttribute(D.vars.dataAttr),t.rendered=e.getAttribute("data-holder-rendered")}catch(r){}var i=null!=t.src,a=null!=t.dataSrc&&0===t.dataSrc.indexOf(s.domain),c=null!=t.rendered&&"true"==t.rendered;i?0===t.src.indexOf(s.domain)?o(s,n,t.src,e):a&&(c?o(s,n,t.dataSrc,e):!function(e,t,n,r,i){_.imageExists(e,function(e){e||o(t,n,r,i)})}(t.src,s,n,t.dataSrc,e)):a&&o(s,n,t.dataSrc,e)}),this}},D={settings:{domain:"holder.js",images:"img",objects:"object",bgnodes:"body .holderjs",stylenodes:"head link.holderjs",themes:{gray:{bg:"#EEEEEE",fg:"#AAAAAA"},social:{bg:"#3a5a97",fg:"#FFFFFF"},industrial:{bg:"#434A52",fg:"#C2F200"},sky:{bg:"#0D8FDB",fg:"#FFFFFF"},vine:{bg:"#39DBAC",fg:"#1E292C"},lava:{bg:"#F8591A",fg:"#1C2846"}}},defaults:{size:10,units:"pt",scale:1/16}},I=function(){var e=null,t=null,n=null;return function(o){var r=o.root;if(D.setup.supportsSVG){var i=!1,s=function(e){return document.createTextNode(e)};null!=e&&e.parentNode===document.body||(i=!0),e=E.initSVG(e,r.properties.width,r.properties.height),e.style.display="block",i&&(t=w.newEl("text",R),n=s(null),w.setAttr(t,{x:0}),t.appendChild(n),e.appendChild(t),document.body.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="-100%",e.style.left="-100%");var a=r.children.holderTextGroup,c=a.properties;w.setAttr(t,{y:c.font.size,style:_.cssProps({"font-weight":c.font.weight,"font-size":c.font.size+c.font.units,"font-family":c.font.family})}),n.nodeValue=c.text;var l=t.getBBox(),u=Math.ceil(l.width/r.properties.width),d=c.text.split(" "),f=c.text.match(/\\n/g);u+=null==f?0:f.length,n.nodeValue=c.text.replace(/[ ]+/g,"");var p=t.getComputedTextLength(),h=l.width-p,g=Math.round(h/Math.max(1,d.length-1)),m=[];if(u>1){n.nodeValue="";for(var v=0;v<d.length;v++)if(0!==d[v].length){n.nodeValue=_.decodeHtmlEntity(d[v]);var y=t.getBBox();m.push({text:d[v],width:y.width})}}return e.style.display="none",{spaceWidth:g,lineCount:u,boundingBox:l,words:m}}return!1}}();for(var P in D.flags)D.flags.hasOwnProperty(P)&&(D.flags[P].match=function(e){return e.match(this.regex)});D.setup={renderer:"html",debounce:100,ratio:1,supportsCanvas:!1,supportsSVG:!1,lineWrapRatio:.9,dataAttr:"data-src",renderers:["html","canvas","svg"]},D.vars={preempted:!1,resizableImages:[],invisibleImages:{},invisibleId:0,visibilityCheckStarted:!1,debounceTimer:null,cache:{}},function(){var e=w.newEl("canvas");e.getContext&&e.toDataURL("image/png").indexOf("data:image/png")!=-1&&(D.setup.renderer="canvas",D.setup.supportsCanvas=!0),document.createElementNS&&document.createElementNS(R,"svg").createSVGRect&&(D.setup.renderer="svg",D.setup.supportsSVG=!0)}(),f(),m&&m(function(){D.vars.preempted||O.run(),t.addEventListener?(t.addEventListener("resize",g,!1),t.addEventListener("orientationchange",g,!1)):t.attachEvent("onresize",g),"object"==typeof t.Turbolinks&&t.document.addEventListener("page:change",function(){O.run()})}),e.exports=O}).call(t,function(){return this}())},function(e,t){function n(e){function t(e){if(!w){if(!s.body)return r(t);for(w=!0;e=b.shift();)r(e)}}function n(e){(_||e.type===c||s[f]===d)&&(o(),t())}function o(){_?(s[y](m,n,l),e[y](c,n,l)):(s[h](v,n),e[h](u,n))}function r(e,t){setTimeout(e,+t>=0?t:1)}function i(e){w?r(e):b.push(e)}null==document.readyState&&document.addEventListener&&(document.addEventListener("DOMContentLoaded",function S(){document.removeEventListener("DOMContentLoaded",S,!1),document.readyState="complete"},!1),document.readyState="loading");var s=e.document,a=s.documentElement,c="load",l=!1,u="on"+c,d="complete",f="readyState",p="attachEvent",h="detachEvent",g="addEventListener",m="DOMContentLoaded",v="onreadystatechange",y="removeEventListener",_=g in s,E=l,w=l,b=[];if(s[f]===d)r(t);else if(_)s[g](m,n,l),e[g](c,n,l);else{s[p](v,n),e[p](u,n);try{E=null==e.frameElement&&a}catch(T){}E&&E.doScroll&&!function A(){if(!w){try{E.doScroll("left")}catch(e){return r(A,50)}o(),t()}}()}return i.version="1.4.0",i.isReady=function(){return w},i}e.exports="undefined"!=typeof window&&n(window)},function(e,t,n){var o=encodeURIComponent,r=decodeURIComponent,i=n(4),s=n(5),a=/(\w+)\[(\d+)\]/,c=/\w+\.\w+/;t.parse=function(e){if("string"!=typeof e)return{};if(e=i(e),""===e)return{};"?"===e.charAt(0)&&(e=e.slice(1));for(var t={},n=e.split("&"),o=0;o<n.length;o++){var s,l,u,d=n[o].split("="),f=r(d[0]);if(s=a.exec(f))t[s[1]]=t[s[1]]||[],t[s[1]][s[2]]=r(d[1]);else if(s=c.test(f)){for(s=f.split("."),l=t;s.length;)if(u=s.shift(),u.length){if(l[u]){if(l[u]&&"object"!=typeof l[u])break}else l[u]={};s.length||(l[u]=r(d[1])),l=l[u]}}else t[d[0]]=null==d[1]?"":r(d[1])}return t},t.stringify=function(e){if(!e)return"";var t=[];for(var n in e){var r=e[n];if("array"!=s(r))t.push(o(n)+"="+o(e[n]));else for(var i=0;i<r.length;++i)t.push(o(n+"["+i+"]")+"="+o(r[i]))}return t.join("&")}},function(e,t){function n(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=n,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t){function n(e){return!(null==e||!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)))}var o=Object.prototype.toString;e.exports=function(e){switch(o.call(e)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===e?"null":void 0===e?"undefined":e!==e?"nan":e&&1===e.nodeType?"element":n(e)?"buffer":(e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e),typeof e)}},function(e,t){var n=function(e){function t(e,t){for(var n in t)e[n]=t[n];return e}var n=1,o=function(e){n++,this.parent=null,this.children={},this.id=n,this.name="n"+n,"undefined"!=typeof e&&(this.name=e),this.x=this.y=this.z=0,this.width=this.height=0};o.prototype.resize=function(e,t){null!=e&&(this.width=e),null!=t&&(this.height=t)},o.prototype.moveTo=function(e,t,n){this.x=null!=e?e:this.x,this.y=null!=t?t:this.y,this.z=null!=n?n:this.z},o.prototype.add=function(e){var t=e.name;if("undefined"!=typeof this.children[t])throw"SceneGraph: child already exists: "+t;this.children[t]=e,e.parent=this};var r=function(){o.call(this,"root"),this.properties=e};r.prototype=new o;var i=function(e,n){if(o.call(this,e),this.properties={fill:"#000000"},"undefined"!=typeof n)t(this.properties,n);else if("undefined"!=typeof e&&"string"!=typeof e)throw"SceneGraph: invalid node name"};i.prototype=new o;var s=function(){i.apply(this,arguments),this.type="group"};s.prototype=new i;var a=function(){i.apply(this,arguments),this.type="rect"};a.prototype=new i;var c=function(e){i.call(this),this.type="text",this.properties.text=e};c.prototype=new i;var l=new r;return this.Shape={Rect:a,Text:c,Group:s},this.root=l,this};e.exports=n},function(e,t){(function(e){t.extend=function(e,t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);if(null!=t)for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n},t.cssProps=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+":"+e[n]);return t.join(";")},t.encodeHtmlEntity=function(e){for(var t=[],n=0,o=e.length-1;o>=0;o--)n=e.charCodeAt(o),n>128?t.unshift(["&#",n,";"].join("")):t.unshift(e[o]);return t.join("")},t.imageExists=function(e,t){var n=new Image;n.onerror=function(){t.call(this,!1)},n.onload=function(){t.call(this,!0)},n.src=e},t.decodeHtmlEntity=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(t)})},t.dimensionCheck=function(e){var t={height:e.clientHeight,width:e.clientWidth};return!(!t.height||!t.width)&&t},t.truthy=function(e){return"string"==typeof e?"true"===e||"yes"===e||"1"===e||"on"===e||"✓"===e:!!e},t.parseColor=function(e){var t,n=/(^(?:#?)[0-9a-f]{6}$)|(^(?:#?)[0-9a-f]{3}$)/i,o=/^rgb\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,r=/^rgba\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(0\.\d{1,}|1)\)$/,i=e.match(n);return null!==i?(t=i[1]||i[2],"#"!==t[0]?"#"+t:t):(i=e.match(o),null!==i?t="rgb("+i.slice(1).join(",")+")":(i=e.match(r),null!==i?t="rgba("+i.slice(1).join(",")+")":null))},t.canvasRatio=function(){var t=1,n=1;if(e.document){var o=e.document.createElement("canvas");if(o.getContext){var r=o.getContext("2d");t=e.devicePixelRatio||1,n=r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1}}return t/n}}).call(t,function(){return this}())},function(e,t,n){(function(e){var o=n(9),r="http://www.w3.org/2000/svg",i=8;t.initSVG=function(e,t,n){var s,a,c=!1;e&&e.querySelector?(a=e.querySelector("style"),null===a&&(c=!0)):(e=o.newEl("svg",r),c=!0),c&&(s=o.newEl("defs",r),a=o.newEl("style",r),o.setAttr(a,{type:"text/css"}),s.appendChild(a),e.appendChild(s)),e.webkitMatchesSelector&&e.setAttribute("xmlns",r);for(var l=0;l<e.childNodes.length;l++)e.childNodes[l].nodeType===i&&e.removeChild(e.childNodes[l]);for(;a.childNodes.length;)a.removeChild(a.childNodes[0]);return o.setAttr(e,{width:t,height:n,viewBox:"0 0 "+t+" "+n,preserveAspectRatio:"none"}),e},t.svgStringToDataURI=function(){var t="data:image/svg+xml;charset=UTF-8,",n="data:image/svg+xml;charset=UTF-8;base64,";return function(o,r){return r?n+btoa(e.unescape(encodeURIComponent(o))):t+encodeURIComponent(o)}}(),t.serializeSVG=function(t,n){if(e.XMLSerializer){var r=new XMLSerializer,i="",s=n.stylesheets;if(n.svgXMLStylesheet){for(var a=o.createXML(),c=s.length-1;c>=0;c--){var l=a.createProcessingInstruction("xml-stylesheet",'href="'+s[c]+'" rel="stylesheet"');a.insertBefore(l,a.firstChild)}a.removeChild(a.documentElement),i=r.serializeToString(a)}var u=r.serializeToString(t);return u=u.replace(/\&amp;(\#[0-9]{2,}\;)/g,"&$1"),i+u}}}).call(t,function(){return this}())},function(e,t){(function(e){t.newEl=function(t,n){if(e.document)return null==n?e.document.createElement(t):e.document.createElementNS(n,t)},t.setAttr=function(e,t){for(var n in t)e.setAttribute(n,t[n])},t.createXML=function(){if(e.DOMParser)return(new DOMParser).parseFromString("<xml />","application/xml")},t.getNodeArray=function(t){var n=null;return"string"==typeof t?n=document.querySelectorAll(t):e.NodeList&&t instanceof e.NodeList?n=t:e.Node&&t instanceof e.Node?n=[t]:e.HTMLCollection&&t instanceof e.HTMLCollection?n=t:t instanceof Array?n=t:null===t&&(n=[]),n=Array.prototype.slice.call(n)}}).call(t,function(){return this}())},function(e,t){var n=function(e,t){"string"==typeof e&&(this.original=e,"#"===e.charAt(0)&&(e=e.slice(1)),/[^a-f0-9]+/i.test(e)||(3===e.length&&(e=e.replace(/./g,"$&$&")),6===e.length&&(this.alpha=1,t&&t.alpha&&(this.alpha=t.alpha),this.set(parseInt(e,16)))))};n.rgb2hex=function(e,t,n){function o(e){var t=(0|e).toString(16);return e<16&&(t="0"+t),t}return[e,t,n].map(o).join("")},n.hsl2rgb=function(e,t,n){var o=e/60,r=(1-Math.abs(2*n-1))*t,i=r*(1-Math.abs(parseInt(o)%2-1)),s=n-r/2,a=0,c=0,l=0;return o>=0&&o<1?(a=r,c=i):o>=1&&o<2?(a=i,c=r):o>=2&&o<3?(c=r,l=i):o>=3&&o<4?(c=i,l=r):o>=4&&o<5?(a=i,l=r):o>=5&&o<6&&(a=r,l=i),a+=s,c+=s,l+=s,a=parseInt(255*a),c=parseInt(255*c),l=parseInt(255*l),[a,c,l]},n.prototype.set=function(e){this.raw=e;var t=(16711680&this.raw)>>16,n=(65280&this.raw)>>8,o=255&this.raw,r=.2126*t+.7152*n+.0722*o,i=-.09991*t-.33609*n+.436*o,s=.615*t-.55861*n-.05639*o;return this.rgb={r:t,g:n,b:o},this.yuv={y:r,u:i,v:s},this},n.prototype.lighten=function(e){var t=Math.min(1,Math.max(0,Math.abs(e)))*(e<0?-1:1),o=255*t|0,r=Math.min(255,Math.max(0,this.rgb.r+o)),i=Math.min(255,Math.max(0,this.rgb.g+o)),s=Math.min(255,Math.max(0,this.rgb.b+o)),a=n.rgb2hex(r,i,s);return new n(a)},n.prototype.toHex=function(e){return(e?"#":"")+this.raw.toString(16)},n.prototype.lighterThan=function(e){return e instanceof n||(e=new n(e)),this.yuv.y>e.yuv.y},n.prototype.blendAlpha=function(e){e instanceof n||(e=new n(e));var t=e,o=this,r=t.alpha*t.rgb.r+(1-t.alpha)*o.rgb.r,i=t.alpha*t.rgb.g+(1-t.alpha)*o.rgb.g,s=t.alpha*t.rgb.b+(1-t.alpha)*o.rgb.b;return new n(n.rgb2hex(r,i,s))},e.exports=n},function(e,t){e.exports={version:"2.9.4",svg_ns:"http://www.w3.org/2000/svg"}},function(e,t,n){function o(e,t){return d.element({tag:t,width:e.width,height:e.height,fill:e.properties.fill})}function r(e){return l.cssProps({fill:e.fill,"font-weight":e.font.weight,"font-family":e.font.family+", monospace","font-size":e.font.size+e.font.units})}function i(e,t,n){var o=n/2;return["M",o,o,"H",e-o,"V",t-o,"H",o,"V",0,"M",0,o,"L",e,t-o,"M",0,t-o,"L",e,o].join(" ")}var s=n(13),a=n(8),c=n(11),l=n(7),u=c.svg_ns,d={element:function(e){var t=e.tag,n=e.content||"";return delete e.tag,delete e.content,[t,n,e]}};e.exports=function(e,t){var n=t.engineSettings,c=n.stylesheets,l=c.map(function(e){return'<?xml-stylesheet rel="stylesheet" href="'+e+'"?>'}).join("\n"),f="holder_"+Number(new Date).toString(16),p=e.root,h=p.children.holderTextGroup,g="#"+f+" text { "+r(h.properties)+" } ";h.y+=.8*h.textPositionData.boundingBox.height;var m=[];Object.keys(h.children).forEach(function(e){var t=h.children[e];Object.keys(t.children).forEach(function(e){var n=t.children[e],o=h.x+t.x+n.x,r=h.y+t.y+n.y,i=d.element({tag:"text",content:n.properties.text,x:o,y:r});m.push(i)})});var v=d.element({tag:"g",content:m}),y=null;if(p.children.holderBg.properties.outline){var _=p.children.holderBg.properties.outline;y=d.element({tag:"path",d:i(p.children.holderBg.width,p.children.holderBg.height,_.width),"stroke-width":_.width,stroke:_.fill,fill:"none"})}var E=o(p.children.holderBg,"rect"),w=[];w.push(E),_&&w.push(y),w.push(v);var b=d.element({tag:"g",id:f,content:w}),T=d.element({tag:"style",content:g,type:"text/css"}),S=d.element({tag:"defs",content:T}),A=d.element({tag:"svg",content:[S,b],width:p.properties.width,height:p.properties.height,xmlns:u,viewBox:[0,0,p.properties.width,p.properties.height].join(" "),preserveAspectRatio:"none"}),x=s(A);x=l+x[0];var C=a.svgStringToDataURI(x,"background"===t.mode);return C}},function(e,t,n){n(14);e.exports=function o(e,t,n){"use strict";function r(e){var t=e.match(/^[\w-]+/),o={tag:t?t[0]:"div",attr:{},children:[]},r=e.match(/#([\w-]+)/),i=e.match(/\$([\w-]+)/),s=e.match(/\.[\w-]+/g);return r&&(o.attr.id=r[1],n[r[1]]=o),i&&(n[i[1]]=o),s&&(o.attr["class"]=s.join(" ").replace(/\./g,"")),e.match(/&$/g)&&(p=!1),o}function i(e,t){if(null!==t&&t!==!1&&void 0!==t)return"string"!=typeof t&&"object"!=typeof t?String(t):t}function s(e){return e||0===e?String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;"):""}function a(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var c,l,u,d,f=1,p=!0;if(n=n||{},"string"==typeof e[0])e[0]=r(e[0]);else{if(!Array.isArray(e[0]))throw new Error("First element of array must be a string, or an array and not "+JSON.stringify(e[0]));f=0}for(;f<e.length;f++){if(e[f]===!1||null===e[f]){e[0]=!1;break}if(void 0!==e[f]&&e[f]!==!0)if("string"==typeof e[f])p&&(e[f]=a(e[f])),e[0].children.push(e[f]);else if("number"==typeof e[f])e[0].children.push(e[f]);else if(Array.isArray(e[f])){if(Array.isArray(e[f][0])){if(e[f].reverse().forEach(function(t){e.splice(f+1,0,t)}),0!==f)continue;f++}o(e[f],t,n),e[f][0]&&e[0].children.push(e[f][0])}else if("function"==typeof e[f])u=e[f];else{if("object"!=typeof e[f])throw new TypeError('"'+e[f]+'" is not allowed as a value.');for(l in e[f])e[f].hasOwnProperty(l)&&null!==e[f][l]&&e[f][l]!==!1&&("style"===l&&"object"==typeof e[f][l]?e[0].attr[l]=JSON.stringify(e[f][l],i).slice(2,-2).replace(/","/g,";").replace(/":"/g,":").replace(/\\"/g,"'"):e[0].attr[l]=e[f][l])}}if(e[0]!==!1){c="<"+e[0].tag;for(d in e[0].attr)e[0].attr.hasOwnProperty(d)&&(c+=" "+d+'="'+s(e[0].attr[d])+'"');c+=">",e[0].children.forEach(function(e){c+=e}),c+="</"+e[0].tag+">",e[0]=c}return n[0]=e[0],u&&u(e[0]),n}},function(e,t){"use strict";function n(e){var t=""+e,n=o.exec(t);if(!n)return t;var r,i="",s=0,a=0;for(s=n.index;s<t.length;s++){switch(t.charCodeAt(s)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#39;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}a!==s&&(i+=t.substring(a,s)),a=s+1,i+=r}return a!==s?i+t.substring(a,s):i}var o=/["'&<>]/;e.exports=n},function(e,t,n){var o=n(9),r=n(7);e.exports=function(){var e=o.newEl("canvas"),t=null;return function(n){null==t&&(t=e.getContext("2d"));var o=r.canvasRatio(),i=n.root;e.width=o*i.properties.width,e.height=o*i.properties.height,t.textBaseline="middle";var s=i.children.holderBg,a=o*s.width,c=o*s.height,l=2,u=l/2;t.fillStyle=s.properties.fill,t.fillRect(0,0,a,c),s.properties.outline&&(t.strokeStyle=s.properties.outline.fill,t.lineWidth=s.properties.outline.width,t.moveTo(u,u),t.lineTo(a-u,u),t.lineTo(a-u,c-u),t.lineTo(u,c-u),t.lineTo(u,u),t.moveTo(0,u),t.lineTo(a,c-u),t.moveTo(0,c-u),t.lineTo(a,u),t.stroke());var d=i.children.holderTextGroup;t.font=d.properties.font.weight+" "+o*d.properties.font.size+d.properties.font.units+" "+d.properties.font.family+", monospace",t.fillStyle=d.properties.fill;for(var f in d.children){var p=d.children[f];for(var h in p.children){var g=p.children[h],m=o*(d.x+p.x+g.x),v=o*(d.y+p.y+g.y+d.properties.leading/2);t.fillText(g.properties.text,m,v)}}return e.toDataURL("image/png")}}()}])}),function(e,t){t&&(Holder=e.Holder)}(this,"undefined"!=typeof Meteor&&"undefined"!=typeof Package),function(e,t){return"object"==typeof exports?void(module.exports=t()):void(e.OneRing=t(e))}(this,function(e){"use strict";function t(t){var n={q:"Q",eventemitter2:"EventEmitter2"};return"object"!=typeof exports||e&&"[object Window]"===e.toString()?e[n[t]]:require(t)}function n(){for(var e=!1,t=0;t<T.length;t++){try{e=T[t]()}catch(n){continue}break}return e}Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on a non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}),Array.prototype.forEach||(Array.prototype.forEach=function(e){for(var t=0;t<this.length;t++)e(this[t],t,this)}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(t===e)return t;return-1});var o=t("q"),r=t("eventemitter2");r.EventEmitter2&&(r=r.EventEmitter2);var i=function(e){return function(t,n){if(!t)throw Error("Required name");e.ee.on.apply(e.ee,[t,n])}},s=function(e){return function(){e.ee.once.apply(e.ee,arguments)}},a=function(e){return function(){e.ee.off.apply(e.ee,arguments)}},c=function(e){return function(){e.ee.emit.apply(e.ee,arguments)}},l=function(e){return function(t,n){e.queues[t]||(e.queues[t]=[]),e.queues[t].push(n)}},u=function(e){return function(t,n){if(e.queues[t])for(var o=e.queues[t].shift();void 0!==o;)n(o),o=e.queues[t].shift()}},d=function(e){return function(t,n){if(e.queues[t]){for(var o=[],r=e.queues[t].shift();void 0!==r;)o.push(r),r=e.queues[t].shift();n(o)}}},f=function(e){return function(t,n){e.queues[t]||(e.queues[t]=[]),e.ring.digest(function(o){return 0===e.queues[t].length?o():void n(o)})}},p=function(e){return function(t,n){e.ring.digest(function(e){return 0===t.length?e():void n(t,e)})}},h=function(){return function(e){return this.promise(e).promise}},g=function(e){return function(t){return e.promises[t]||(e.promises[t]=o.defer()),e.promises[t]}},m=0,v=function(){return function(e,t){m>=Number.MAX_VALUE&&(m=0);var n="msg."+e+"."+((new Date).getTime().toString(16)+"_a"+m++),o=this.when(n);return this.emit(n,n,t),o}},y=function(){return function(e,t){var n=this;this.on("msg."+e+".*",function(e,o){t(n.promise(e),o)})}},_=function(t){return function(n){if(t.resources[n])return t.resources[n].promise;if(!e.document)throw Error("URL loads are not supported without document");var r=e.document,i=r.getElementsByTagName("head")[0]||r.documentElement,s=r.createElement("script");return s.src=n,t.resources[n]=o.defer(),s.onload=s.onreadystatechange=function(){"pending"!==t.resources[n].promise.inspect().state||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(s.onload=s.onreadystatechange=null,i&&s.parentNode&&i.removeChild(s),t.resources[n].resolve(!0))},i.insertBefore(s,i.firstChild),t.resources[n].promise}},E=function(e){return function(t){e.ticks.push(t)}},w=function(e){return function(t){var n=e.ticks.indexOf(t);n!==-1&&e.ticks.splice(n,1)}},b=function(){function t(){var e=A.ticks.length,n=0,o=null,r=function(){if(n>=e)return r=null,n=null,setTimeout(t,100);if(o=A.ticks[n++],!o)return r();try{try{o(r)}catch(i){console.error(i)}}catch(s){A.ring.onError("digest loop")(s),r()}};r(0)}function n(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function o(e){if("undefined"!=typeof top.ipcTags.sendBeacons&&("undefined"==typeof top.ipcTags.sendBeacons||top.ipcTags.sendBeacons!==!1)&&0===R){var t={value:(new Date).getTime()-x,event:e,site:top.ipcTags.site,pageview:C},n="https://ixlhrwlucf.execute-api.eu-west-1.amazonaws.com/dev/log/perf";if(navigator&&navigator.sendBeacon)navigator.sendBeacon(n,JSON.stringify(t));else{var o=new XMLHttpRequest;o.open("POST",n,!1),o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),o.send(JSON.stringify(t))}}}function m(e){var t=(document.cookie.match("(^|; )"+e+"=([^;]*)")||0)[2];return"undefined"!=typeof t&&t}function b(e,t,n){n||(n=new Date((new Date).getTime()+31104e6)),n===-1?document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/":document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; expires="+n.toGMTString()+"; path=/"}function T(e){var t=window.location.search.substring(1),n="";return t.split("&").forEach(function(t){var o=t.split("=");o[0]==e&&(n=decodeURIComponent(o[1]))}),n}function S(){return"true"===T("ipccore_debug_mode")}var A={};A.ee=new r({wildcard:!0}),A.ee.setMaxListeners(0),A.promises={},A.queues={},A.resources={},A.ticks=[],A.ring=this;var x=(new Date).getTime(),C=x+":"+n(),R=Math.round(x/6e4)%15;
this.on=i(A),this.once=s(A),this.off=a(A),this.emit=c(A),this.queue=l(A),this.flush=u(A),this.flushAll=d(A),this.observe=f(A),this.observeArray=p(A),this.promise=g(A),this.when=h(A),this.query=v(A),this.answer=y(A),this.digest=E(A),this.feedup=w(A),this.beacon=o,this.isDebugMode=S,this.getQueryVariable=T,this.setCookie=b,this.readCookie=m,this.requireScript=_(A),this.forEach=function(e,t){for(var n=0;n<e.length;n++)t(e[n],n,e)},this.onError=function(t){return function(n){e.NREUM&&e.NREUM.noticeError(n),e.console&&e.console.error&&(e.console.error(t),e.console.error(n.message))}},this.queryParams=function(){for(var t={},n=e?e.location.search.substring(1):"",o=n.split("&"),r=0;r<o.length;r++){var i=o[r].split("=");if("undefined"==typeof t[i[0]])t[i[0]]=decodeURIComponent(i[1]);else if("string"==typeof t[i[0]]){var s=[t[i[0]],decodeURIComponent(i[1])];t[i[0]]=s}else t[i[0]].push(decodeURIComponent(i[1]))}return t}(),t()},T=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];return b.prototype.xhr=function(t){var r,i=o.defer(),s=e.XDomainRequest;return s?(r=new s,r.open("get",t),r.onload=function(){i.resolve(r.responseText)},r.ontimeout=function(){i.reject("XDomainRequest timeout")},r.onerror=function(e){i.reject(e)},r.send(),i.promise):(r=n())?(r.open("get",t,!0),r.onreadystatechange=function(){4==r.readyState&&(200!=r.status&&304!=r.status||i.resolve(r.responseText))},4!=r.readyState?(r.send(),i.promise):void 0):o.reject()},b}),window.IPCCore=new OneRing,window.IPCCoreQueue=window.IPCCoreQueue||[],window.IPCCore.observeArray(window.IPCCoreQueue,function(e,t){for(var n=e.shift();n;){try{n()}catch(o){window.IPCCore.onError("IPCCoreQueue",o)}n=e.shift()}t()}),function(e,t){return"object"==typeof exports?void(module.exports=t):void t(e.IPCCore)}(this,function(e){e.E_MODULE_INITED="ipc.module.init",e.E_MODULE_LOADED="ipc.module.loaded",e.E_DEBUG="ipc.debug",e.E_ERROR="ipc.error",e.M_DEBUGGER_GET_MODULE_TIMES="ipc.debug.modules.times",e.M_DEBUGGER_GET_SLOT_TIMES="ipc.debug.slots.times",e.P_WINDOW_LOAD="ipc.dom.load",e.P_WINDOW_DOM_READY="ipc.dom.ready",e.E_WINDOW_SCROLL="ipc.dom.scroll",e.P_IS_BOX_MODEL="ipc.dom.isBox",e.E_WINDOW_RESIZE="ipc.dom.resize",e.E_WINDOW_ROTATE="ipc.dom.rotate",e.E_INVIEW_REGISTER="ipc.inview.register",e.E_INVIEW_UNREGISTER="ipc.inview.unregister",e.E_INVIEW_VISIBLE="ipc.inview.visible",e.E_INVIEW_INVISIBLE="ipc.inview.invisible",e.P_INVIEW="ipc.inview",e.P_ADMANAGER="ipc.admanager",e.P_DFP_READY="ipc.dfp.ready",e.P_ADMANAGER_CONFIG_IS_DEFINED="ipc.admanager.config",e.Q_ADMANAGER_REGISTER_SLOT="ipc.admanager.slot.register",e.Q_ADMANAGER_DESTROY_SLOT="ipc.admanager.slot.destroy",e.E_SLOT_REGISTER="ipc.admanager.slot.register",e.E_SLOT_RENDERED="ipc.admanager.slot.rendered",e.E_SLOT_RENDER_ENDED="ipc.admanager.slot.render.ended",e.E_SLOT_VIEWABLE="ipc.admanager.slot.viewable",e.E_SLOT_ONLOAD="ipc.admanager.slot.onload",e.E_UPDATE_SLOT_CONFIG="ipc.admanager.slot.update",e.P_ALL_INITIAL_SLOTS_RENDERED="ipc.admanager.slot.all",e.E_REFRESH_ALL_ADS="ipc.admanager.refresh.all",e.E_REFRESH_AD_SLOTS="ipc.admanager.refresh.slots",e.P_ADMANAGER_HAS_PUBADS="ipc.def.pubads",e.M_ADMANAGER_GET_SLOTS="ipc.admanager.slot.get",e.F_DISPLAY_RESPONSIVE="responsive",e.F_DISPLAY_DESKTOP="desktop",e.F_DISPLAY_MOBILE="mobile",e.F_SCOPE_GLOBAL="global",e.F_SCOPE_SLOT="slot",e.E_GPT_JS_LOADED="gpt.js.loaded",e.P_GPT_JS_LOADED="gpt.js.loaded",e.E_GPT_FETCH="gpt.fetch",e.E_GPT_FETCHED="gpt.fetched",e.E_GPT_PAGE_LOAD_COMPLETE="gpt.page.load",e.E_GPT_QUEUE_START="gpt.queue.start",e.E_GPT_ADD_SLOT="gpt.slot.add",e.E_GPT_ADD_TARGETING="gpt.targeting.add",e.E_GPT_COLLAPSE_CONTAINERS_ENABLE="gpt.collapse.enable",e.E_GPT_SERVICE_CREATE="gpt.service.create",e.E_GPT_SINGLE_REQUEST_MODE_ENABLE="gpt.single.request.enable",e.E_GPT_SLOT_CREATE="gpt.slot.create",e.E_GPT_SLOT_TARGET="gpt.slot.target",e.E_GPT_SLOT_FILL="gpt.slot.fill",e.E_GPT_SLOT_FETCH="gpt.slot.fetch",e.E_GPT_SLOT_RECEIVING="gpt.slot.receive",e.E_GPT_SLOT_RENDER_DELAY="gpt.slot.delay",e.E_GPT_SLOT_RENDERING="gpt.slot.render",e.E_GPT_SLOT_RENDERED="gpt.slot.rendered",e.promise("ipc.constants").resolve(!0)}),function(e,t){return"object"==typeof exports?void(module.exports=t):void e.IPCCore.when("ipc.constants").then(function(){t(e.IPCCore,e)})}(this,function(e,t){function n(e,t){if(i&&s){var n="["+(new Date).toString()+"]["+e+"]  ",o="object"!=typeof t;try{o?l[s](n+t):(l[a](n),l[s](t),l[c]())}catch(r){l.log(r)}}}var o={},r={},i=t.IPCCore.isDebugMode(),s=!!t.console&&(t.console.debug?"debug":"log"),a=!!t.console&&(t.console.group?"group":"log"),c=!!t.console&&(t.console.groupEnd?"groupEnd":"log"),l=t.console||null;s&&e.when(e.P_WINDOW_LOAD).then(function(){var e=function(){if(t.performance&&t.performance.timing&&t.performance.timing.loadEventEnd){var n=[],o=t.performance.timing;Object.keys(t.performance.timing).forEach(function(e){o[e]>0&&n.push({key:e,value:o[e]})}),n.sort(function(e,t){return e.value===t.value?0:e.value>t.value?1:-1}),l[a]("TIMINGS");for(var r=1;r<n.length;r++)l[s](n[r].key+" in "+(n[r].value-n[r-1].value)+" from "+n[r-1].key);return void l[c]("TIMINGS")}setTimeout(e,1e3)};try{e()}catch(n){l.error(n)}}),e.on(e.E_DEBUG,function(e){n("DEBUG",e)}),e.on(e.E_ERROR,function(t){n("ERROR",t),e.onError("Debugger",t)}),e.on(e.E_MODULE_INITED,function(e){o[e]={start:(new Date).getTime()}}),e.on(e.E_MODULE_LOADED,function(e){var t=o[e]||{};t.end=(new Date).getTime(),t.duration=t.end-t.start,n("MODULE","Module "+e+" loaded in "+t.duration+"ms")}),e.on(e.E_SLOT_REGISTER,function(e){r[e]={start:(new Date).getTime()}}),e.on(e.E_SLOT_RENDERED,function(e){var t=r[e.slot]||{};t.end=(new Date).getTime(),t.duration=t.end-t.start,n("DFP","Slot "+e.slot+" loaded in "+t.duration+"ms")}),e.answer(e.M_DEBUGGER_GET_MODULE_TIMES,function(e){e.resolve(o)}),e.answer(e.M_DEBUGGER_GET_SLOT_TIMES,function(e){e.resolve(r)}),e.when(e.P_ALL_INITIAL_SLOTS_RENDERED).then(function(){n("DFP","All initially declared slot have been rendered")})}),function(e,t){return"object"==typeof exports?void(module.exports=t):void e.IPCCore.when("ipc.constants").then(function(){t(e.IPCCore,e)})}(this,function(e,t){function n(n){var o=void 0!==t.pageYOffset,r="CSS1Compat"===(t.document.compatMode||""),i=o?window.pageYOffset:r?document.documentElement.scrollTop:document.body.scrollTop,a=(t.pageYOffset||s&&t.document.scrollTop||t.document.body.scrollTop||i)-(t.document.clientTop||t.document.body.clientTop||0);a!=p&&(p=a,e.emit(e.E_WINDOW_SCROLL,a)),n()}function o(){e.emit(e.E_WINDOW_RESIZE)}e.emit(e.E_MODULE_INITED,"domevents");var r,i,s,a=t.document,c=a.documentElement.doScroll,l="DOMContentLoaded",u=((c?/^loaded|^c/:/^loaded|^i|^c/).test(a.readyState),(c?/^complete|^c/:/^complete|^i|^c/).test(a.readyState)),d=(c?/^interactive|^c/:/^interactive|^i|^c/).test(a.readyState),f=a.createElement("div"),p=0,h=t.addEventListener?"addEventListener":"attachEvent",g=t.addEventListener?"removeEventListener":"detachEvent",m=t.addEventListener?"load":"onload",v=t.addEventListener?"resize":"onresize";f.style.paddingLeft=f.style.width="1px",a.body.appendChild(f),s=2==f.offsetWidth,e.promise(e.P_IS_BOX_MODEL).resolve(s),a.body.removeChild(f),e.digest(n),u?e.promise(e.P_WINDOW_LOAD).resolve(!0):t[h](m,i=function(){e.promise(e.P_WINDOW_LOAD).resolve(!0),t[g](m,i)}),d?e.promise(e.P_WINDOW_DOM_READY).resolve(!0):a[h](l,r=function(){a[g](l,r),e.promise(e.P_WINDOW_DOM_READY).resolve(!0)}),t[h](v,o),t[h]("orientationchange",function(){e.emit(e.E_WINDOW_ROTATE)}),e.emit(e.E_MODULE_LOADED,"domevents")}),function(e,t){return"object"==typeof exports?void(module.exports=t):void e.IPCCore.when("ipc.constants").then(function(){t(e.IPCCore,e)})}(this,function(e,t){function n(e){var t=window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle;return!((0!==e.offsetWidth||0!==e.offsetHeight)&&"hidden"!=t.visibility)}function o(e,t,o){if(n(e))return"footerBanner"===o&&(console.log(e),console.log(e.offsetParent)),!1;var r=e.getBoundingClientRect();return r.right>=t.l&&r.bottom>=t.t&&r.left<=t.r&&r.top<=t.b}function r(){for(var n=l.slice(0),r=e.onError("inView#tick"),i=0;i<n.length;i++)try{var s={l:0,t:0,b:(t.innerHeight||t.document.documentElement.clientHeight)+(n[i].offset||c),r:(t.innerWidth||t.document.documentElement.clientWidth)+c},a=t.document.getElementById(n[i].id);if(a){var u=o(a,s,n[i].id);u&&!n[i].invisible?e.emit(e.E_INVIEW_VISIBLE,n[i].id):!u&&n[i].invisible&&e.emit(e.E_INVIEW_INVISIBLE,n[i].id)}}catch(d){r(d)}}function i(t){if(s(t.id)===-1){l.push(t);try{r()}catch(n){console.error(n)}}u||(u=!0,e.on(e.E_WINDOW_SCROLL,r))}function s(e){var t=-1,n=-1;return l.forEach(function(o){n++,o.id===e&&(t=n)}),t}function a(e){var t=s(e);t>-1&&l.splice(t,1)}e.emit(e.E_MODULE_INITED,"inview");var c=50,l=[],u=!1;e.on(e.E_INVIEW_REGISTER,i),e.on(e.E_INVIEW_UNREGISTER,a),e.promise(e.P_INVIEW).resolve(!0),e.emit(e.E_MODULE_LOADED,"inview")}),function(e,t){return"object"==typeof exports?void(module.exports=t):void e.IPCCore.when("ipc.constants").then(function(){t(e.IPCCore,e)})}(this,function(core,root){"use strict";function _has_class(e,t){return!!e.className.match(/(?:^|\s)+target_class+(?!\S)/)}function _add_event(e,t,n){e.attachEvent?e.attachEvent("on"+t,function(){n.call(e)}):e.addEventListener&&e.addEventListener(t,n,!1)}function objectValues(e){if(e!==Object(e))throw new TypeError("objectValues called on a non-object");var t=[];return Object.keys(e).forEach(function(n){t.push(e[n])}),t}function objectPairs(e,t){if(e!==Object(e))throw new TypeError("Object.pairs called on a non-object");Object.keys(e).forEach(function(n){t(n,e[n])})}function isWindowWiderThan(e){if("object"!=typeof e||!e.width_minimum&&0!==e.width_minimum)return core.emit(core.E_ERROR,"isWindowWiderThan: window_greater_than requires a object with a width_minimum property"),!1;var t=getViewPortSizes().width,n=t>e.width_minimum;return core.emit(core.E_DEBUG,"isWindowWiderThan: Testing "+t+" windowGreaterThan "+e.width_minimum+". Result- "+n),n}function isWindowNarrowerOrEqualThan(e){if("object"!=typeof e||!e.width_maximum)return core.emit(core.E_ERROR,"isWindowNarrowerOrEqualThan: window_less_than_equal_to requires a object with a width_maximum property"),!1;var t=getViewPortSizes().width,n=t<=e.width_maximum;return core.emit(core.E_DEBUG,"isWindowNarrowerOrEqualThan: Testing "+t+" windowLessThanEqualTo "+e.width_maximum+". Result- "+n),n}function processCallback(e,t){var n=e.apply(e,t);return core.emit(core.E_DEBUG,"processCallback: Testing callback. Result- "+n),n}function isGeoCodeIn(e){var t,n=core.readCookie("ipc_geo");if(!n)return!1;if("object"!=typeof e||!e.hasOwnProperty("codes"))return core.emit(core.E_ERROR,"ipc geo criteria is not set properly"),!1;for(t=e.codes.length;t>=0;t--)if(e.codes[t]===n)return!0;return!1}function readConfig(e){if(refreshed||core.beacon("ads:init:config"),!e.accountId)throw new Error("Google Account ID is required");if(!e.ipcTags)throw new Error("IPCTags are required");if(!e.ipcTags.dfp_config)throw new Error("IPCTags.dfp_config is required");return GoogleAccountId=e.accountId,environment=e.ipcTags.env||"prod",IPCTags=e.ipcTags,DFPConfig=e.ipcTags.dfp_config,DRYConfig=e,inviewOffset=e.offset||null,followOffset=e.followOffset||0,disableSingleRequest=DFPConfig.disableSingleRequest===!0,slotPrefix=e.slotPrefix?e.slotPrefix:slotPrefix,displayMode=e.displayMode||displayMode,!0}function getViewPortSizes(){var e=0,t=0;return"undefined"!=typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.getElementsByTagName("body")[0].clientWidth,t=document.getElementsByTagName("body")[0].clientHeight),{width:Number(e),height:Number(t)}}function evaluateCriteria(e){if(!1===Array.isArray(e))return void core.emit(core.E_DEBUG,"evaluateCriteria: Criteria must be an array");var t=!1;return e.forEach(function(e){var n,o=!0;if("string"!=typeof e)n=e;else{if(!availableCriteria[e])return void core.emit(core.E_ERROR,"Unknown criteria-"+e);n=availableCriteria[e]}n.forEach(function(e){!1===e.method(e.args)&&(o=!1)}),o&&(t=!0)}),t}function filterConfigFields(e,t,n){if("object"!=typeof e)return void core.emit(core.E_ERROR,"filterConfigFields: available must be an object");var o=[];return Object.keys(e).forEach(function(r){if(e[r]&&e[r][t]){var i=[],s=e[r][t];Object.keys(s).forEach(function(e){s[e]&&n[e]&&"object"==typeof s[e]&&i.push({method:n[e],args:s[e]})}),i.length>0&&(o[r]=i)}}),o}function setResponsiveDisplayMode(){Object.keys(availableCriteria).forEach(function(e){var t=availableCriteria[e];evaluateCriteria(new Array(t))===!0&&ipcTags.dfp_config.available_criteria[e].display_mode&&(displayMode=ipcTags.dfp_config.available_criteria[e].display_mode)})}function readResponsiveTags(){return core.emit(core.E_DEBUG,"admanager#readResponsiveTags"),core.F_DISPLAY_RESPONSIVE!==displayMode||(DFPConfig.available_criteria&&(availableCriteria=filterConfigFields(DFPConfig.available_criteria,"criteria",slotCriteriaHelpers),core.F_DISPLAY_RESPONSIVE===displayMode&&setResponsiveDisplayMode()),!0)}function readEvents(){return core.emit(core.E_DEBUG,"admanager#readEvents"),DFPConfig.available_events&&(availableEvents=filterConfigFields(DFPConfig.available_events,"events",_slot_events)),!0}function processEvents(e,t){return!1===Array.isArray(t)?void core.emit(code.E_ERROR,"If events is specified, it must be an array","error"):void t.forEach(function(t){return availableEvents[t]?void availableEvents[t].forEach(function(t){t.method.call(this,e,t.args)}):void core.emit(code.E_ERROR,"Invalid event "+t,"error")})}function readSlots(){return core.emit(core.E_DEBUG,"admanager#readSlots"),Object.keys(DFPConfig.slots).forEach(function(e){var t=DFPConfig.slots[e],n={name:getSlotName(t),id:t.id,sizes:[],sizeMapping:[]};return t.criteria&&!evaluateCriteria(t.criteria)?void(t.disabled=!0):(t.events&&processEvents(e,t.events),t.sizes&&Array.isArray(t.sizes)&&(t.sizes=[].concat(t.sizes),"number"==typeof t.sizes[0]&&(t.sizes=[t.sizes])),void(t.hasOwnProperty("sizeMapping")&&(n.sizeMapping=[].concat(t.sizeMapping))))}),!0}function formatTargetingParam(e){if(!Array.isArray(e))return slugify(e);var t=[];return e.forEach(function(e){t.push(slugify(e))}),t}function slugify(e){return String(e).toLowerCase().replace(/[^\w\s]/g," ").replace(/\ +/g,"_").replace(/\-$/g,"").replace(/^\-/g,"")}function pushTargetingParam(e){e.scope=e.scope||core.F_SCOPE_GLOBAL,e.persistent=!!e.persistent,e.id=e.id||e.name;e.name;if(e.name.length>10)try{e.name=e.name.slice(0,10)}catch(t){core.emit(core.E_ERROR,t)}targetingParams[e.id]=e}function pushTargetingParams(e){e.forEach(function(e){pushTargetingParam(e)})}function readRequiredTags(){if(core.emit(core.E_DEBUG,"admanager#readRequiredTags"),Array.isArray(DFPConfig.required_tags))return DFPConfig.required_tags.forEach(function(e){IPCTags.hasOwnProperty(e)&&null!==IPCTags[e]&&pushTargetingParam({name:e,value:formatTargetingParam(IPCTags[e])})}),!0}function setGlobalTargetingVars(){core.emit(core.E_DEBUG,"admanager#setGlobalTargetingVars");var e=getViewPortSizes();pushTargetingParams([{name:"env",value:environment},{name:"browwidth",value:e.width.toString()},{name:"browheight",value:e.height.toString()}]),adParams.browwidth=e.width.toString(),adParams.browheight=e.height.toString()}function addCookieTargetingParam(e){var t={name:e.name,value:"false",persistent:!0},n=core.readCookie(e.cookie_name);n&&("value"==e.type?t.value=slugify(n):"boolean"==e.type&&(t.value="true")),pushTargetingParam(t)}function setCookieTargeting(){if(core.emit(core.E_DEBUG,"admanager#setCookieTargeting"),"undefined"!=typeof DFPConfig.read_cookies){var e=DFPConfig.read_cookies;for(var t in e)addCookieTargetingParam(e[t])}}function loadIndexExchange(){return core.requireScript("//js-sec.indexww.com/"+indexExchange).then(function(){return refreshed||core.beacon("ads:init:indexexchange:loaded"),!0},core.onError("loadIndexExchange"))}function loadAudienceScience(){return core.xhr("//pq-direct.revsci.net/pql?placementIdList="+DRYConfig.revsci.placements.join(","))}function readAudienceScienceResponse(codeFromAudienceScience){refreshed||core.beacon("ads:init:hawkeye:loaded");var revsci;try{return DRYConfig.revsci.config=revsci=function(){var asiPqTag=!1,asiPlacements={},asiAdserver=null;return eval(codeFromAudienceScience.replace(/^\s*var\s+/,"")),{PqTag:asiPqTag,Placements:asiPlacements,Adserver:asiAdserver}}(),adParams.asiPlacements=revsci.Placements,Object.keys(revsci.Placements).forEach(function(e){var t=revsci.Placements[e];pushTargetingParam({name:"PQ_"+e,value:t["default"]?"T":"F",scope:core.F_SCOPE_SLOT})}),refreshed||core.beacon("ads:init:hawkeye:parsed"),!0}catch(ex){core.onError("readAudienceScienceResponse")(ex)}}function loadThirdParties(){function e(){0===--o&&(refreshed||core.beacon("ads:init:thirdparty:loaded"),n.resolve())}function t(t){core.emit(core.E_ERROR,t);try{e()}catch(t){console.error(t)}}core.emit(core.E_DEBUG,"admanager#loadThirdParties");var n=root.Q.defer(),o=1;return(DRYConfig.ipcTags.dfp_config.indexExchange||DRYConfig.indexExchange)&&(o=2),(DRYConfig.ipcTags.dfp_config.indexExchange||DRYConfig.indexExchange)&&(indexExchange=DRYConfig.ipcTags.dfp_config.indexExchange?DRYConfig.ipcTags.dfp_config.indexExchange:DRYConfig.indexExchange,window.headertag=window.headertag||{},window.headertag.pagetype=displayMode,loadIndexExchange().timeout(1e3).then(e,t)),loadGoogleTagManager().then(function(){if(GoogleTag.apiReady)return core.beacon("ads:init:googletag:apiready:cached2"),!0;var e=root.Q.defer(),t=function(n){GoogleTag.apiReady&&(refreshed||core.beacon("ads:init:googletag:apiready:waited"),core.feedup(t),e.resolve(!0)),n()};return core.digest(t),e.promise},onErr("loadThirdParties#loadGoogleTagManager")).then(e,onErr("loadThirdParties#loadGoogleTagManager#2")),n.promise}function buildUnitNameBase(){var e="/"+GoogleAccountId+"/"+IPCTags.site;return displayMode===core.F_DISPLAY_MOBILE&&(e+="_mobile"),"undefined"!=typeof IPCTags.section&&""!==IPCTags.section?e+="/"+IPCTags.section:console&&console.warn&&console.warn("Section not defined in IPCTags"),"undefined"!=typeof IPCTags.subsection&&""!==IPCTags.subsection?e=e+"/"+IPCTags.subsection:console&&console.warn&&console.warn("Subsection not defined in IPCTags"),e}function loadGoogleTagManager(){var e="https:"==root.document.location.protocol,t=(e?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";return core.requireScript(t).then(function(){return refreshed||core.beacon("ads:init:googletag:loaded"),overrideGoogleTagEvents(),core.promise(core.P_ADMANAGER_HAS_PUBADS).resolve(!0),GoogleTag.apiReady?(refreshed||core.beacon("ads:init:googletag:apiready:cached"),!0):core.when(core.P_DFP_READY)},core.onError("loadGoogleTagManager"))}function hasTestTargeting(){return""!==get_test_mode_value()||!!core.readCookie("adloader_test_targeting")}function get_test_mode_value(){return core.getQueryVariable("adloader_test_mode").replace(/[^a-z0-9_]/g,"")}function getTestTargeting(){var e={},t=core.readCookie("adloader_test_targeting");return""!==get_test_mode_value()?e.testmode={name:"testmode",value:get_test_mode_value(),scope:core.F_SCOPE_GLOBAL}:!1!==t&&t.split("&").forEach(function(t){var n=t.split("=");e.testmode={name:n[0],value:decodeURIComponent(n[1]),scope:core.F_SCOPE_GLOBAL}}),e}function isInArray(e,t){return e.indexOf(t)>-1}function setGlobalTargeting(){core.emit(core.E_DEBUG,"admanager#setGlobalTargeting");var e=targetingParams;return hasTestTargeting()&&(e=getTestTargeting()),GoogleTag.cmd.push(function(){var t=1,n=core.readCookie("ipc_geo"),o=core.readCookie("euconsent"),r=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB","GF","GP","MQ","ME","YT","RE","MF","GI","AX","PM","GL","BL","SX","AW","CW","WF","PF","NC","TF","AI","BM","IO","VG","KY","FK","MS","PN","SH","GS","TC","AD","LI","MC","SM","VA","JE","GG","GI","CH"];n&&!isInArray(r,n)&&(t=0),document.cookie.split(";").filter(function(e){return e.indexOf("tiPersonalisedAds=1")>=0}).length&&(t=0),GoogleTag.pubads().setRequestNonPersonalizedAds(t);var i={};i.name="gdpr_value",i.value=t.toString(),i.scope=core.F_SCOPE_GLOBAL,i.persistent=!1,i.id="gdpr_value";var s={};s.name="gdpr_string",s.value=o.toString(),s.scope=core.F_SCOPE_GLOBAL,s.persistent=!1,s.id="gdpr_string",e.gdpr_value=i,e.gdpr_string=s,console.log(e),Object.keys(e).forEach(function(t){e[t].scope===core.F_SCOPE_GLOBAL&&GoogleTag.pubads().setTargeting(e[t].name,e[t].value)})}),!0}function overrideGoogleTagEvents(){var e=[],t=[[core.E_GPT_JS_LOADED,8,/Google service JS loaded/gi],[core.E_GPT_FETCH,46,/Fetching GPT implementation/gi],[core.E_GPT_FETCHED,48,/GPT implementation fetched\./gi],[core.E_GPT_PAGE_LOAD_COMPLETE,1,/Page load complete/gi],[core.E_GPT_QUEUE_START,31,/^Invoked queued function/gi],[core.E_GPT_ADD_SLOT,40,/Associated ([\w]*) service with slot ([\/\w]*)/gi],[core.E_GPT_ADD_TARGETING,88,/Setting targeting attribute ([\w]*) with value ([\w\W]*) for service ([\w]*)/gi],[core.E_GPT_COLLAPSE_CONTAINERS_ENABLE,78,/Enabling collapsing of containers when there is no ad content/gi],[core.E_GPT_SERVICE_CREATE,35,/Created service: ([\w]*)/gi],[core.E_GPT_SINGLE_REQUEST_MODE_ENABLE,63,/Using single request mode to fetch ads/gi],[core.E_GPT_SLOT_CREATE,2,/Created slot: ([\/\w]*)/gi],[core.E_GPT_SLOT_TARGET,17,/Setting targeting attribute ([\w]*) with value ([\w\W]*) for slot ([\/\w]*)/gi],[core.E_GPT_SLOT_FILL,50,/Calling fillslot/gi],[core.E_GPT_SLOT_FETCH,3,/Fetching ad for slot ([\/\w]*)/gi],[core.E_GPT_SLOT_RECEIVING,4,/Receiving ad for slot ([\/\w]*)/gi],[core.E_GPT_SLOT_RENDER_DELAY,53,/Delaying rendering of ad slot ([\/\w]*) pending loading of the GPT implementation/gi],[core.E_GPT_SLOT_RENDERING,5,/^Rendering ad for slot ([\/\w]*)/gi],[core.E_GPT_SLOT_RENDERED,6,/Completed rendering ad for slot ([\/\w]*)/gi]];return t.forEach(function(t){e.push({name:t[0],id:t[1],match:t[2]})}),GoogleTag.cmd.push(function(){var t=googletag.debug_log.log;GoogleTag.debug_log.log=function(n,o,r,i,s){try{if(o&&o.getMessageId&&"number"==typeof o.getMessageId()){var a=Array.prototype.slice.call(arguments),c=0;for(c;c<e.length;c++)if(e[c].id===o.getMessageId())if(e[c].name){var l=[e[c].name].concat(a);core.emit.apply(core,l),e[c].name===core.E_GPT_JS_LOADED&&core.promise(core.P_GPT_JS_LOADED).resolve(!0)}else core.emit(core.E_ERROR,e[c],c)}}catch(u){onErr("overrideGoogleTagEvents")(u)}return t.apply(this,arguments)}}),core.on(core.E_GPT_SLOT_RENDERED,function(e,t,n,o,r){0===--pendingInitialSlots&&core.promise(core.P_ALL_INITIAL_SLOTS_RENDERED).resolve(!0);try{core.emit(core.E_SLOT_RENDERED,{slot:o.b?o.b.f:o.l.m,property:o.b?o.b.a:o.l.j,content:o.B||o.L,object:o})}catch(i){core.emit(core.E_ERROR,i)}}),!0}function listenToRender(){GoogleTag.pubads().addEventListener("slotRenderEnded",function(e){var t=e.slot.getSlotElementId(),n=e.slot.getResponseInformation(),o=window.location,r=e.size;root.ipcTags.dfp_config.slots[t]&&(root.ipcTags.dfp_config.slots[t].size=r),core.emit(core.E_SLOT_RENDER_ENDED,{slotId:t,creative:n,url:o,size:r}),refreshed||core.beacon("ads:slot:rendered:"+t)})}function listenForSlotOnload(){GoogleTag.pubads().addEventListener("slotOnload",function(e){var t=e.slot.getSlotElementId(),n=e.slot.getResponseInformation(),o=window.location,r=null;root.ipcTags.dfp_config.slots[t]&&root.ipcTags.dfp_config.slots[t].size&&(r=root.ipcTags.dfp_config.slots[t].size),core.emit(core.E_SLOT_ONLOAD,{slotId:t,creative:n,url:o,size:r}),refreshed||core.beacon("ads:slot:onload:"+t)})}function listenForViewable(){GoogleTag.pubads().addEventListener("impressionViewable",function(e){var t=e.slot.getSlotElementId(),n=e.slot.getResponseInformation(),o=window.location,r=null;root.ipcTags.dfp_config.slots[t]&&(root.ipcTags.dfp_config.slots[t].viewed=!0,root.ipcTags.dfp_config.slots[t].size&&(r=root.ipcTags.dfp_config.slots[t].size)),core.emit(core.E_SLOT_VIEWABLE,{slotId:t,creative:n,url:o,size:r}),refreshed||core.beacon("ads:slot:viewable:"+t)})}function setupGoogleTag(){core.emit(core.E_DEBUG,"admanager#setupGoogleTag");var e=root.Q.defer();return GoogleTag.cmd.push(function(){try{if(disableSingleRequest||GoogleTag.pubads().enableSingleRequest(),GoogleTag.enableServices(),GoogleTag.pubadsReady)return listenToRender(),listenForSlotOnload(),listenForViewable(),e.resolve(!0);var t=function(n){GoogleTag.pubadsReady&&(listenToRender(),listenForSlotOnload(),listenForViewable(),core.feedup(t),e.resolve(!0)),n()};core.digest(t)}catch(n){core.onError("setupGoogleTag")(n)}}),e.promise}function displayAds(){return core.emit(core.E_DEBUG,"admanager#displayAds"),core.when(core.P_INVIEW).then(function(){core.on(core.E_INVIEW_VISIBLE,function(e){inviewSlots.forEach(function(t,n){if(e===t.id){if(core.emit(core.E_INVIEW_UNREGISTER,e),inviewSlots.splice(n,1),t.fit)return fitSlot(t);installSlot(t)}})}),core.on(core.E_INVIEW_INVISIBLE,function(e){outviewSlots.forEach(function(t,n){e===t.id&&(outviewSlots.splice(n,1),core.emit(core.E_INVIEW_UNREGISTER,e),uninstallSlot(t))})})}),Object.keys(DFPConfig.slots).forEach(function(e){return DFPConfig.slots[e].id=DFPConfig.slots[e].id||e,isPremiumAccess(DFPConfig.slots[e])?void(DFPConfig.slots[e].disabled=!0):checkSlotDivExists(DFPConfig.slots[e])?(slotElementAddAttribute(DFPConfig.slots[e],{key:"rel",value:"noskim"}),void(DFPConfig.slots[e].disabled!==!0&&(refreshed||core.beacon("ads:slot:queue:"+e),core.queue(core.Q_ADMANAGER_REGISTER_SLOT,DFPConfig.slots[e])))):void(DFPConfig.slots[e].disabled=!0)}),core.observe(core.Q_ADMANAGER_REGISTER_SLOT,registerSlots,50),core.observe(core.Q_ADMANAGER_DESTROY_SLOT,destroySlots,50),!0}function measureSlot(e,t){if(e.maxHeight&&!t)return e.maxHeight;var n,o=document.getElementById(e.id),r=o.getBoundingClientRect(),i=o.parentNode;for(e.maxHeight=0;i&&!e.maxHeight;)n=i.getBoundingClientRect(),n.bottom>r.bottom&&(e.maxHeight=r.height+(n.bottom-r.height)),i=i.parentNode;return e.maxHeight}function fitSlot(e){installSlot(e,measureSlot(e))}function initWhenInView(e){inviewSlots.push(e),core.when(core.P_INVIEW).then(function(){core.emit(core.E_INVIEW_REGISTER,{id:e.id,offset:e.offset||inviewOffset})})}function unloadWhenUnvisible(e){outviewSlots.push(e),core.when(core.P_INVIEW).then(function(){core.emit(core.E_INVIEW_REGISTER,{id:e.id,offset:0,invisible:!0})})}function setupStickyScroll(e){var t,n=document.getElementById(e.id),o=n.style,r=n.parentNode.style,i=function(s){s.slot===e.id&&(core.off(core.E_SLOT_RENDERED,i),t=root.document.querySelector("#"+e.id+" div"),r.mozTransition=r.msTransition=r.oTransition=r.transition=r.webkitTransition="max-height 1s",n.parentNode.style.minHeight=t.style.height,setTimeout(function(){o.mozTransition=o.msTransition=o.oTransition=o.transition=o.webkitTransition="position 1s",o.position="absolute"},e.stickyScroll.timeout||5e3))};o.position="fixed",r.height="1px",r.overflow="hidden",o.width=e.stickyScroll.width||"100%",o.top=e.stickyScroll.top||"0px",o.left=e.stickyScroll.left||"0px",o.zIndex=e.stickyScroll.zIndex||1e6,o.margin=e.stickyScroll.margin||"auto",core.on(core.E_SLOT_RENDERED,i)}function registerSlot(e,t){return refreshed||core.beacon("ads:slot:register"+e.id),e.stickyScroll&&setupStickyScroll(e),e.inview?initWhenInView(e):e.fit?fitSlot(e):void GoogleTag.cmd.push(function(){installSlot(e,null,t)})}function destroySlot(e,t){refreshed||core.beacon("ads:slot:destroy"+e.id);var n=googleAdSlots[e.id];n&&(GoogleTag.cmd.push(function(){GoogleTag.destroySlots([n])}),root.ipcTags.dfp_config.slots[e.id]&&(root.ipcTags.dfp_config.slots[e.id].viewed=!1,root.ipcTags.dfp_config.slots[e.id].size&&(root.ipcTags.dfp_config.slots[e.id].size=null)))}function follow(e){core.when(core.P_IS_BOX_MODEL).then(function(t){function n(){return m=null===g?v.offsetHeight:g.getBoundingClientRect().top}function o(e){a.style.position="fixed",m=n();var o=a.offsetTop;if(g){var r=a.getBoundingClientRect().bottom;switch(e){case"up":r<=m&&o<h?(a.style.top="",a.style.bottom=window.innerHeight-m+"px"):(a.style.top=h+"px",a.style.bottom="");break;case"down":r>=m?(a.style.top="",a.style.bottom=window.innerHeight-m+"px"):(a.style.top=h+"px",a.style.bottom="");break;default:a.style.top=h+"px",a.style.bottom=""}}else{var i=root.document,s=root.pageYOffset||t&&i.scrollTop||i.body.scrollTop,c=s+a.getBoundingClientRect().bottom;switch(e){case"up":c<=m&&o<h?(a.style.top="",a.style.bottom=window.innerHeight-v.getBoundingClientRect().bottom+"px"):(a.style.top=h+"px",a.style.bottom="");break;case"down":c>=m?(a.style.top="",a.style.bottom=window.innerHeight-v.getBoundingClientRect().bottom+"px"):(a.style.top=h+"px",a.style.bottom="");break;default:a.style.top=h+"px",a.style.bottom=""}}}function r(){a.style.top=0,a.style.bottom="",a.style.position="relative"}function i(e,t,n,o,r){return t>0&&n>t+o-e.clientHeight-r}var s=root.document,a=s.getElementById(e.id),c=e.bounce?measureSlot(e):-1,l=a.offsetParent,u=s.clientTop||0,d=root.pageYOffset||t&&s.scrollTop||s.body.scrollTop,f=a.getBoundingClientRect(),p=f.top+d-u,h=isNaN(e.followOffset)?isNaN(followOffset)?0:followOffset:e.followOffset,g=document.querySelector(e.followDomLimit),m=null,v=null,y=0;a.style.position="absolute";do{var _=l.getBoundingClientRect().bottom;!g&&"body"!==l.tagName.toLowerCase()&&_>m&&(v=l),l=l.offsetParent}while(l);g||v||(v=document.body.offsetHeight),core.on(core.E_WINDOW_SCROLL,function(t){!0===i(a,c,t,p,h)?e.bounce&&y<t?(c=measureSlot(e,!0),!0===i(a,c,t,p,h)&&o("down")):o("up"):t+h>p?o(y<t?"down":"up"):r(),y=t})})}function filterSizes(e,t){if(!t)return e;var n=[];return e.forEach(function(e){e[1]<=t&&n.push(e)}),n}function installSlot(e,t,n){refreshed||core.beacon("ads:slot:install:"+e.id),core.emit(core.E_SLOT_REGISTER,e.id);try{var o=e.custom_path||buildUnitNameBase(),r=filterSizes(e.sizes,t),i=function(){return e.sizes&&(1===e.sizes[0]&&1===e.sizes[1]||"undefined"!=typeof e.sizes[0][0]&&"undefined"!=typeof e.sizes[0][1]&&1===e.sizes[0][0]&&1===e.sizes[0][1])}(),s=null;if(i)s=GoogleTag.defineOutOfPageSlot(o,e.id);else{var a=[];isGPTStructure(e)&&(a=getGPTSlots(e)),a.length>0&&(r=a),s=GoogleTag.defineSlot(o,r,e.id)}if(root.ipcTags.hasOwnProperty("pxslot_base")&&setTuple(e),s){if(isGPTStructure(e)){for(var c=GoogleTag.sizeMapping(),l=e.sizeMapping,u=0;u<l.length;u++){var d=l[u],f=d[0],p=d[1];c.addSize(f,p)}var h=c.build();s.defineSizeMapping(h)}if(s.addService(GoogleTag.pubads()),googleAdSlots[e.id]=s,slotObjects[e.id]=e,setSlotTargeting(s,e),n?n.push(e.id):GoogleTag.display(e.id),e.unload&&unloadWhenUnvisible(e),e.follow)if(0!==pendingInitialSlots&&e.bounce){var g=function(){return core.when(core.P_WINDOW_LOAD)};core.when(core.P_ALL_INITIAL_SLOTS_RENDERED).timeout(2e3).then(g,g).then(function(){follow(e)})}else follow(e)}else console&&console.warn&&console.warn("DFP haven't created slot "+e.id)}catch(m){core.onError("installSlot")(m)}finally{core.emit(core.E_DEBUG,"Registered slot "+e.id)}}function setTuple(e){var t=getSlotTemplateName(e);e.hasOwnProperty("tuple")?e.tuple.pxslot=t:e.tuple={pxslot:t}}function getSlotTemplateName(e){return root.ipcTags.pxslot_base+"_"+getSlotName(e)}function isGPTStructure(e){return!!e.hasOwnProperty("sizeMapping")}function getGPTSlots(e){for(var t=[],n=e.sizeMapping,o=0;o<n.length;o++)for(var r=n[o],i=r[1],s=0;s<i.length;s++)t.push(i[s]);return t}function uninstallSlot(e){googletag.pubads().clear([googleAdSlots[e.id]]),googleAdSlots[e.id]=null,slotObjects[e.id]=null}function registerSlots(e){core.flushAll(core.Q_ADMANAGER_REGISTER_SLOT,function(t){pendingInitialSlots+=t.length;for(var n=t.shift(),o=[];n;)registerSlot(n,o),n=t.shift();o.forEach(function(e){GoogleTag.display(e);
}),e()})}function destroySlots(e){core.flushAll(core.Q_ADMANAGER_DESTROY_SLOT,function(t){for(var n=t.shift(),o=[];n;)destroySlot(n,o),n=t.shift();e()})}function setSlotTargeting(e,t){var n=DFPConfig.slots[t.id];n||(n=t),n&&(e.setTargeting("name",getSlotName(n)),n.targeting&&Object.keys(n.targeting).forEach(function(t){e.setTargeting(t,n.targeting[t])}),n.tuple&&Object.keys(n.tuple).forEach(function(t){e.setTargeting(t,n.tuple[t])})),hasTestTargeting()||Object.keys(targetingParams).forEach(function(o){var r=targetingParams[o];if(core.F_SCOPE_SLOT===r.scope){if(r.targets&&r.targets.slots){if(getSlotName(t)&&r.stargets.slots.indexOf(getSlotName(t))===-1)return;if(getSlotName(t)&&r.targets.sizes){var i=!1;if(n.forEach(function(e){i||r.targets.sizes.forEach(function(t){i||t[0]===e[0]&&t[1]===e[1]&&(i=!0)})}),!i)return}}e.setTargeting(r.name,r.value)}})}function clearTargetingParams(){var e={};objectPairs(targetingParams,function(t,n){n.persistent===!0&&(e[t]=n)}),targetingParams=e}function clearWrittenData(){for(var e=root.document.querySelectorAll("div.adloader_written_data"),t=0;e.length;t++)e[t].parentNode.removeChild(e[t])}function getSlotName(e){return"object"==typeof e.name?displayMode===core.F_DISPLAY_MOBILE?e.name.mobile:e.name.desktop:e.name}function refreshAllAds(){refreshAds(Object.keys(googleAdSlots),!0)}function readSiteTagsQueue(){return core.emit(core.E_DEBUG,"admanager#readSiteTagsQueue"),root.Q.fcall(readEvents).then(readSlots,onErr("readEvents")).then(readRequiredTags,onErr("readSlots")).then(setGlobalTargetingVars,onErr("readRequiredTags")).then(setGlobalTargeting,onErr("setGlobalTargetingVars")).then(setCookieTargeting,onErr("setGlobalTargeting"))["catch"](onErr("catch"))}function doRefresh(e){core.emit(core.E_DEBUG,"admanager#doRefresh"),__refreshLocked=!0,setTimeout(function(){core.emit(core.E_DEBUG,"admanager#doRefresh!unlock"),__refreshLocked=!1,__scheduledRefresh&&doRefresh(__scheduledRefresh),__scheduledRefresh=null},5e3),e===!0?_refreshAds(!0):e&&e.length>0&&_refreshAds(e)}function refreshAds(e,t){if(refreshed=!0,t&&(e=!0),__refreshLocked===!1)core.emit(core.E_DEBUG,"admanager#scheduleRefresh!instant"),doRefresh(e);else if(core.emit(core.E_DEBUG,"admanager#scheduleRefresh!queue"),e===!0)__scheduledRefresh=!0;else{null===__scheduledRefresh&&(__scheduledRefresh=[]);for(var n=0;n<e.length;n++)__scheduledRefresh.indexOf(e[n])!==-1&&__scheduledRefresh.push(e[n])}}function _refreshAds(e){if(e&&(0!==e.length||e===!0)){var t=root.Q.defer(),n=[];clearTargetingParams(),clearWrittenData(),t.resolve(),t.promise.then(readSiteTagsQueue,onErr("refreshAds")).then(function(){e!==!0&&e.forEach(function(e){var t=googleAdSlots[e];GoogleTag.cmd.push(function(){t&&(t.clearTargeting(),setSlotTargeting(t,slotObjects[e]),n.push(t))})}),GoogleTag.cmd.push(function(){e===!0?googletag.pubads().refresh():n.length>0&&googletag.pubads().refresh(n)})})}}function updateSlotConfig(e){follow(e)}function slotElementAddAttribute(e,t){var n=document.getElementById(e.id);n&&n.setAttribute(t.key,t.value)}function isPremiumAccess(e){var t="_pc_u4nAQhbEBHpX7X3b";DFPConfig.premium_cookie&&(t=DFPConfig.premium_cookie);var n=core.readCookie(t),o=["www.decanter.com"];return"na"===n&&o.indexOf(window.location.hostname)>-1}function checkSlotDivExists(e){return!!document.getElementById(e.id)}function initAPIEvents(){core.emit(core.E_DEBUG,"admanager#initAPIEvents"),core.on(core.E_REFRESH_ALL_ADS,refreshAllAds),core.on(core.E_REFRESH_AD_SLOTS,refreshAds),core.on(core.E_UPDATE_SLOT_CONFIG,updateSlotConfig),core.answer(core.M_ADMANAGER_GET_SLOTS,function(e){e.resolve(googleAdSlots)})}function logEvent(e,t,n){root.ipc&&root.ipc.analytics&&root.ipc.analytics.trackEvent?root.ipc.analytics.trackEvent({category:e,action:t,label:n}):root.ipc&&root.ipc.utils&&root.ipc.utils.trackEvent?root.ipc.utils.trackEvent(e,t,n):console.log("Can't find analytics, but try to log "+[e,t,n].join(", "))}function logAdBlock(e){var t="ZnVja2FkYmxvY2s",n=core.readCookie(t);"da"!==n||e?"net"===n&&e&&logEvent("Advertising","AdBlockConversion","on"):logEvent("Advertising","AdBlockConversion","off"),core.setCookie(t,e?"da":"net")}function detectAdBlocker(){return root.blockAdBlock.onDetected(function(){core.onError("adblock",new Error("Adblocker detected")),logAdBlock(!0)}),root.blockAdBlock.onNotDetected(function(){logAdBlock(!1)}),!0}var GoogleAccountId=null,environment=null,GoogleTag=root.googletag=root.googletag||{},IPCTags=null,DRYConfig=null,DFPConfig=null,displayMode=core.F_DISPLAY_RESPONSIVE,disableSingleRequest=!1,slotCriteriaHelpers={},slotEventsHelpers={},slotPrefix="",targetingParams={},adParams={},availableCriteria=[],availableEvents=[],pendingInitialSlots=0,googleAdSlots={},slotObjects={},inviewSlots=[],outviewSlots=[],inviewOffset=null,followOffset=0,refreshed=!1,indexExchange=null,onErr=core.onError,d=new Date,executionStartTime=d.getTime();root.googletag.cmd=root.googletag.cmd||[],root.ipc=root.ipc||{},root.ipc.adloader=root.ipc.adloader||{},root.ipc.adloader.getAdParams=function(e){return adParams[e]||null};var _normalise_event=function(e){if("undefined"==typeof e&&(e=root.event),e.target||(e.target=e.srcElement||document),3===e.target.nodeType&&(e.target=e.target.parentNode),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),!e.pageX&&e.clientX){var t=document.documentElement,n=document.body;e.pageX=e.clientX+(t&&t.scrollLeft||n&&n.scrollLeft||0)-(t&&t.clientLeft||n&&n.clientLeft||0),e.pageY=e.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t&&t.clientTop||n&&n.clientTop||0)}return e.which||!e.charCode&&!e.keyCode||(e.which=e.charCode?e.charCode:e.keyCode),!e.metaKey&&e.ctrlKey&&(e.metaKey=e.ctrlKey),e.which||void 0===e.button||(e.which=1&e.button?1:2&e.button?3:4&e.button?2:0),e};root.ipc.adloader.applyStyling=function(e){"undefined"==typeof e.persistent&&(e.persistent=!1);var t,n=!1;if("id"==e.keyType?n=root.document.getElementById(e.key):"tag"==e.keyType&&(t=root.document.getElementsByTagName(e.key),t.length>0&&(n=t[0])),n){if(e.persistent){var o="adloader_modified";if(_has_class(n,o))return;n.className+=o}e["class"]&&(_has_class(n,e["class"])||(n.className+=" "+e["class"]));var r="";r=n.getAttribute("cssText")?n.getAttribute("cssText"):n.getAttribute("style");for(var i in e.styles)r=r+i+": "+e.styles[i]+"; ";n.style.setAttribute?n.style.setAttribute("cssText",r):n.setAttribute("style",r),"undefined"!=typeof e.clickable&&(_add_event(n,"click",function(t){t=_normalise_event(t);var o=!1;if("id"==e.keyType&&t.target.id==n.id?o=!0:"tag"==e.keyType&&t.target.tagName==n.tagName&&(o=!0),o)if("undefined"!=typeof e.clickable["function"]){var r=[t];"undefined"!=typeof e.clickable.function_args&&(r=r.concat(e.clickable.function_args)),e.clickable["function"].apply(e.clickable["function"],r)}else"undefined"!=typeof e.clickable.url&&("undefined"!=typeof e.clickable.url_target?root.open(e.clickable.url,e.clickable.url_target):root.location=e.clickable.url)}),n.style.cursor="pointer")}};var readyCheck=function(){root.googletag.cmd.push(function(){return root.googletag.apiReady?(readyCheck=null,refreshed||core.beacon("ads:init:googletag:apiready:cached.readyChecked"),core.promise(core.P_DFP_READY).resolve(!0)):void readyCheck()})};readyCheck(),core.emit(core.E_MODULE_INITED,"admanager"),slotCriteriaHelpers.window_greater_than=isWindowWiderThan,slotCriteriaHelpers.window_less_than_equal_to=isWindowNarrowerOrEqualThan,slotCriteriaHelpers.callback=processCallback,slotCriteriaHelpers.geo_in=isGeoCodeIn,slotEventsHelpers.onSelectorVisible=function(e,t){};var __scheduledRefresh=null,__refreshLocked=!1;root.ipcTags&&root.ipcTags.dfp_config&&root.ipcTags.dfp_config.accountId&&core.promise(core.P_ADMANAGER_CONFIG_IS_DEFINED).resolve({accountId:root.ipcTags.dfp_config.accountId,env:root.ipcTags.env,revsci:root.ipcTags.dfp_config.revsci,indexExchange:root.ipcTags.dfp_config.indexExchange,ipcTags:root.ipcTags,offset:root.ipcTags.dfp_config.offset||null,followOffset:root.ipcTags.dfp_config.followOffset||0,slotPrefix:root.ipcTags.dfp_config.slotPrefix||null,displayMode:root.ipcTags.dfp_config.displayMode||displayMode}),core.when(core.P_ADMANAGER_CONFIG_IS_DEFINED).then(readConfig,onErr("config defined")).then(detectAdBlocker,onErr("adblocker detection")).then(readResponsiveTags,onErr("readConfig")).then(loadThirdParties,onErr("readResponsiveTags")).then(readSiteTagsQueue,onErr("loadThirdParties")).then(displayAds,onErr("readSiteTagsQueue")).then(setupGoogleTag,onErr("setupGoogleTag")).then(initAPIEvents,onErr("displayAds")).then(function(){core.promise(core.P_ADMANAGER).resolve(),core.emit(core.E_MODULE_LOADED,"admanager"),core.on(core.E_WINDOW_ROTATE,function(){refreshAllAds()});var e=new Date;console.log("Ad Manager ran in: "+(e.getTime()-executionStartTime)+"ms"),window.dataLayer&&window.dataLayer.push({event:"event.customMetric",ga_customMetricIndex:3,ga_customMetricValue:e.getTime()-executionStartTime,ga_customMetricName:"Ad Manager Timer"})},onErr("initAPIEvents"))["catch"](onErr("catch")),core.beacon("ads:init:inited")}),function(e,t){return"object"==typeof exports?void(module.exports=t):void e.IPCCore.when("ipc.constants").then(function(){t(e.IPCCore,e)})}(this,function(e,t){e.on(e.E_REFRESH_ALL_ADS,function(){try{t.ipc&&t.ipc.utils&&t.ipc.utils.outbrain&&t.OBR&&t.ipcTags.IPCCore.modules&&t.ipcTags.IPCCore.modules.outbrain&&t.ipcTags.IPCCore.modules.outbrain===!0&&(t.ipc.utils.outbrain.run(),t.OBR.extern.researchWidget())}catch(n){e.emit(e.E_ERROR,n)}})});
//# sourceMappingURL=ipccore.1.13.13.min.js.map
