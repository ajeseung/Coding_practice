function resetCarousel(e){$(e).removeAttr("style"),$(e).find("li").each(function(){$(this).removeAttr("style")})}function mobileCarousel(e,t){function n(e,t,n){e.width(n-40).css({"margin-right":"40px"}).show(),t.width(n*e.length).css({"margin-left":$sliderPosition})}function s(e,t){e.width("100%").css({"margin-right":"0"}).show(),t.width("100%").css({"margin-left":"0"})}isMobile()&&($sliderPosition=0,$("ul.nse_subscription-list-slider").each(function(){var i=!1;if($(".nse_category-container").length){var r=$(this).closest(".nse_category-container");i=$(this).find("li[data-more] a").length?$(this).find("li[data-more] a").css({margin:"10px",display:"block",width:"auto"}).appendTo($(r)):r.find("a.nse_button[data-type]"),$(this).find(".nse_newsletter-break").remove()}var o,a,c=$(this),l=c.width()+40,u=c.find("li"),p=c.parent().next(".nse_slider-controls"),d=0;p.length>0&&(o=p.find(e),a=p.find(t),0!=i?"Hide"!=i.text()&&n(u,c,l):n(u,c,l),0!=i&&i.off("click").on("click",function(){$("html, body").scrollTop($(this).closest(".nse_category-container").offset().top),"Hide"==$(this).text()?($(".nse_slider-controls").show(),n(u,c,l),$(this).text("Show more")):($(".nse_slider-controls").hide(),$sliderPosition=c.css("margin-left"),s(u,c),$(this).text("Hide"))}),o.css({opacity:.5}).off("click").on("click",function(){return 0>=d?!1:(d--,0==d&&o.css({opacity:.5}),a.css({opacity:1}),c.animate({"margin-left":-d*l}),!1)}),a.off("click").on("click",function(){return d==u.length-1?!1:(d++,d==u.length-1&&a.css({opacity:.5}),o.css({opacity:1}),c.animate({"margin-left":-d*l}),!1)}),u.touchwipe({wipeLeft:function(){a.trigger("click")},wipeRight:function(){o.trigger("click")}}))}))}function setUpShowMore(){$(".nse_newsletter-break a").off("click").on("click",function(e){$this=$(this),isMobile()&&($("html, body").scrollTop($this.closest(".nse_category-container, .nse_subscription-sublist-container").offset().top),$this.hasClass("open")?$this.parent().is("div")||($this.parent().siblings("li").not(":first, .nse_newsletter-break, .nse_subscription-sublist-container").hide(),$this.html("Show more").removeClass("open")):$this.parent().is("div")||($this.parent().siblings().show(),$this.html("Hide").addClass("open"))),e.preventDefault()})}function setUpAccordians(){if(isMobile()){var e=$(".nse_accordion");$(".nse_accordion-icon").length||(e.append('<span class="nse_accordion-icon"></span>').addClass("nse_accordion-closed"),e.next(".nse_content-block").hide(),e.on("click",function(){$(this).next(".nse_content-block").toggle(),$(this).toggleClass("nse_accordion-closed")}))}}function isMobile(){return $(window).width()<640?!0:!1}(function(){var e=this,t=e._,n={},s=Array.prototype,i=Object.prototype,r=Function.prototype,o=s.push,a=s.slice,c=s.concat,l=i.toString,u=i.hasOwnProperty,p=s.forEach,d=s.map,b=s.reduce,h=s.reduceRight,g=s.filter,w=s.every,f=s.some,v=s.indexOf,m=s.lastIndexOf,y=Array.isArray,_=Object.keys,x=r.bind,S=function(e){return e instanceof S?e:this instanceof S?void(this._wrapped=e):new S(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=S),exports._=S):e._=S,S.VERSION="1.6.0";var k=S.each=S.forEach=function(e,t,s){if(null==e)return e;if(p&&e.forEach===p)e.forEach(t,s);else if(e.length===+e.length){for(var i=0,r=e.length;r>i;i++)if(t.call(s,e[i],i,e)===n)return}else for(var o=S.keys(e),i=0,r=o.length;r>i;i++)if(t.call(s,e[o[i]],o[i],e)===n)return;return e};S.map=S.collect=function(e,t,n){var s=[];return null==e?s:d&&e.map===d?e.map(t,n):(k(e,function(e,i,r){s.push(t.call(n,e,i,r))}),s)};var I="Reduce of empty array with no initial value";S.reduce=S.foldl=S.inject=function(e,t,n,s){var i=arguments.length>2;if(null==e&&(e=[]),b&&e.reduce===b)return s&&(t=S.bind(t,s)),i?e.reduce(t,n):e.reduce(t);if(k(e,function(e,r,o){i?n=t.call(s,n,e,r,o):(n=e,i=!0)}),!i)throw new TypeError(I);return n},S.reduceRight=S.foldr=function(e,t,n,s){var i=arguments.length>2;if(null==e&&(e=[]),h&&e.reduceRight===h)return s&&(t=S.bind(t,s)),i?e.reduceRight(t,n):e.reduceRight(t);var r=e.length;if(r!==+r){var o=S.keys(e);r=o.length}if(k(e,function(a,c,l){c=o?o[--r]:--r,i?n=t.call(s,n,e[c],c,l):(n=e[c],i=!0)}),!i)throw new TypeError(I);return n},S.find=S.detect=function(e,t,n){var s;return E(e,function(e,i,r){return t.call(n,e,i,r)?(s=e,!0):void 0}),s},S.filter=S.select=function(e,t,n){var s=[];return null==e?s:g&&e.filter===g?e.filter(t,n):(k(e,function(e,i,r){t.call(n,e,i,r)&&s.push(e)}),s)},S.reject=function(e,t,n){return S.filter(e,function(e,s,i){return!t.call(n,e,s,i)},n)},S.every=S.all=function(e,t,s){t||(t=S.identity);var i=!0;return null==e?i:w&&e.every===w?e.every(t,s):(k(e,function(e,r,o){return(i=i&&t.call(s,e,r,o))?void 0:n}),!!i)};var E=S.some=S.any=function(e,t,s){t||(t=S.identity);var i=!1;return null==e?i:f&&e.some===f?e.some(t,s):(k(e,function(e,r,o){return i||(i=t.call(s,e,r,o))?n:void 0}),!!i)};S.contains=S.include=function(e,t){return null==e?!1:v&&e.indexOf===v?-1!=e.indexOf(t):E(e,function(e){return e===t})},S.invoke=function(e,t){var n=a.call(arguments,2),s=S.isFunction(t);return S.map(e,function(e){return(s?t:e[t]).apply(e,n)})},S.pluck=function(e,t){return S.map(e,S.property(t))},S.where=function(e,t){return S.filter(e,S.matches(t))},S.findWhere=function(e,t){return S.find(e,S.matches(t))},S.max=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var s=-1/0,i=-1/0;return k(e,function(e,r,o){var a=t?t.call(n,e,r,o):e;a>i&&(s=e,i=a)}),s},S.min=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var s=1/0,i=1/0;return k(e,function(e,r,o){var a=t?t.call(n,e,r,o):e;i>a&&(s=e,i=a)}),s},S.shuffle=function(e){var t,n=0,s=[];return k(e,function(e){t=S.random(n++),s[n-1]=s[t],s[t]=e}),s},S.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=S.values(e)),e[S.random(e.length-1)]):S.shuffle(e).slice(0,Math.max(0,t))};var N=function(e){return null==e?S.identity:S.isFunction(e)?e:S.property(e)};S.sortBy=function(e,t,n){return t=N(t),S.pluck(S.map(e,function(e,s,i){return{value:e,index:s,criteria:t.call(n,e,s,i)}}).sort(function(e,t){var n=e.criteria,s=t.criteria;if(n!==s){if(n>s||void 0===n)return 1;if(s>n||void 0===s)return-1}return e.index-t.index}),"value")};var $=function(e){return function(t,n,s){var i={};return n=N(n),k(t,function(r,o){var a=n.call(s,r,o,t);e(i,a,r)}),i}};S.groupBy=$(function(e,t,n){S.has(e,t)?e[t].push(n):e[t]=[n]}),S.indexBy=$(function(e,t,n){e[t]=n}),S.countBy=$(function(e,t){S.has(e,t)?e[t]++:e[t]=1}),S.sortedIndex=function(e,t,n,s){n=N(n);for(var i=n.call(s,t),r=0,o=e.length;o>r;){var a=r+o>>>1;n.call(s,e[a])<i?r=a+1:o=a}return r},S.toArray=function(e){return e?S.isArray(e)?a.call(e):e.length===+e.length?S.map(e,S.identity):S.values(e):[]},S.size=function(e){return null==e?0:e.length===+e.length?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:a.call(e,0,t)},S.initial=function(e,t,n){return a.call(e,0,e.length-(null==t||n?1:t))},S.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},S.rest=S.tail=S.drop=function(e,t,n){return a.call(e,null==t||n?1:t)},S.compact=function(e){return S.filter(e,S.identity)};var U=function(e,t,n){return t&&S.every(e,S.isArray)?c.apply(n,e):(k(e,function(e){S.isArray(e)||S.isArguments(e)?t?o.apply(n,e):U(e,t,n):n.push(e)}),n)};S.flatten=function(e,t){return U(e,t,[])},S.without=function(e){return S.difference(e,a.call(arguments,1))},S.partition=function(e,t){var n=[],s=[];return k(e,function(e){(t(e)?n:s).push(e)}),[n,s]},S.uniq=S.unique=function(e,t,n,s){S.isFunction(t)&&(s=n,n=t,t=!1);var i=n?S.map(e,n,s):e,r=[],o=[];return k(i,function(n,s){(t?s&&o[o.length-1]===n:S.contains(o,n))||(o.push(n),r.push(e[s]))}),r},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=function(e){var t=a.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.contains(t,e)})})},S.difference=function(e){var t=c.apply(s,a.call(arguments,1));return S.filter(e,function(e){return!S.contains(t,e)})},S.zip=function(){for(var e=S.max(S.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=S.pluck(arguments,""+n);return t},S.object=function(e,t){if(null==e)return{};for(var n={},s=0,i=e.length;i>s;s++)t?n[e[s]]=t[s]:n[e[s][0]]=e[s][1];return n},S.indexOf=function(e,t,n){if(null==e)return-1;var s=0,i=e.length;if(n){if("number"!=typeof n)return s=S.sortedIndex(e,t),e[s]===t?s:-1;s=0>n?Math.max(0,i+n):n}if(v&&e.indexOf===v)return e.indexOf(t,n);for(;i>s;s++)if(e[s]===t)return s;return-1},S.lastIndexOf=function(e,t,n){if(null==e)return-1;var s=null!=n;if(m&&e.lastIndexOf===m)return s?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=s?n:e.length;i--;)if(e[i]===t)return i;return-1},S.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var s=Math.max(Math.ceil((t-e)/n),0),i=0,r=new Array(s);s>i;)r[i++]=e,e+=n;return r};var C=function(){};S.bind=function(e,t){var n,s;if(x&&e.bind===x)return x.apply(e,a.call(arguments,1));if(!S.isFunction(e))throw new TypeError;return n=a.call(arguments,2),s=function(){if(!(this instanceof s))return e.apply(t,n.concat(a.call(arguments)));C.prototype=e.prototype;var i=new C;C.prototype=null;var r=e.apply(i,n.concat(a.call(arguments)));return Object(r)===r?r:i}},S.partial=function(e){var t=a.call(arguments,1);return function(){for(var n=0,s=t.slice(),i=0,r=s.length;r>i;i++)s[i]===S&&(s[i]=arguments[n++]);for(;n<arguments.length;)s.push(arguments[n++]);return e.apply(this,s)}},S.bindAll=function(e){var t=a.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return k(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var n={};return t||(t=S.identity),function(){var s=t.apply(this,arguments);return S.has(n,s)?n[s]:n[s]=e.apply(this,arguments)}},S.delay=function(e,t){var n=a.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(a.call(arguments,1)))},S.throttle=function(e,t,n){var s,i,r,o=null,a=0;n||(n={});var c=function(){a=n.leading===!1?0:S.now(),o=null,r=e.apply(s,i),s=i=null};return function(){var l=S.now();a||n.leading!==!1||(a=l);var u=t-(l-a);return s=this,i=arguments,0>=u?(clearTimeout(o),o=null,a=l,r=e.apply(s,i),s=i=null):o||n.trailing===!1||(o=setTimeout(c,u)),r}},S.debounce=function(e,t,n){var s,i,r,o,a,c=function(){var l=S.now()-o;t>l?s=setTimeout(c,t-l):(s=null,n||(a=e.apply(r,i),r=i=null))};return function(){r=this,i=arguments,o=S.now();var l=n&&!s;return s||(s=setTimeout(c,t)),l&&(a=e.apply(r,i),r=i=null),a}},S.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},S.wrap=function(e,t){return S.partial(t,e)},S.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},S.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},S.keys=function(e){if(!S.isObject(e))return[];if(_)return _(e);var t=[];for(var n in e)S.has(e,n)&&t.push(n);return t},S.values=function(e){for(var t=S.keys(e),n=t.length,s=new Array(n),i=0;n>i;i++)s[i]=e[t[i]];return s},S.pairs=function(e){for(var t=S.keys(e),n=t.length,s=new Array(n),i=0;n>i;i++)s[i]=[t[i],e[t[i]]];return s},S.invert=function(e){for(var t={},n=S.keys(e),s=0,i=n.length;i>s;s++)t[e[n[s]]]=n[s];return t},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=function(e){return k(a.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},S.pick=function(e){var t={},n=c.apply(s,a.call(arguments,1));return k(n,function(n){n in e&&(t[n]=e[n])}),t},S.omit=function(e){var t={},n=c.apply(s,a.call(arguments,1));for(var i in e)S.contains(n,i)||(t[i]=e[i]);return t},S.defaults=function(e){return k(a.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e};var T=function(e,t,n,s){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof S&&(e=e._wrapped),t instanceof S&&(t=t._wrapped);var i=l.call(e);if(i!=l.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var r=n.length;r--;)if(n[r]==e)return s[r]==t;var o=e.constructor,a=t.constructor;if(o!==a&&!(S.isFunction(o)&&o instanceof o&&S.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),s.push(t);var c=0,u=!0;if("[object Array]"==i){if(c=e.length,u=c==t.length)for(;c--&&(u=T(e[c],t[c],n,s)););}else{for(var p in e)if(S.has(e,p)&&(c++,!(u=S.has(t,p)&&T(e[p],t[p],n,s))))break;if(u){for(p in t)if(S.has(t,p)&&!c--)break;u=!c}}return n.pop(),s.pop(),u};S.isEqual=function(e,t){return T(e,t,[],[])},S.isEmpty=function(e){if(null==e)return!0;if(S.isArray(e)||S.isString(e))return 0===e.length;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=y||function(e){return"[object Array]"==l.call(e)},S.isObject=function(e){return e===Object(e)},k(["Arguments","Function","String","Number","Date","RegExp"],function(e){S["is"+e]=function(t){return l.call(t)=="[object "+e+"]"}}),S.isArguments(arguments)||(S.isArguments=function(e){return!(!e||!S.has(e,"callee"))}),"function"!=typeof/./&&(S.isFunction=function(e){return"function"==typeof e}),S.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},S.isNaN=function(e){return S.isNumber(e)&&e!=+e},S.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==l.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return u.call(e,t)},S.noConflict=function(){return e._=t,this},S.identity=function(e){return e},S.constant=function(e){return function(){return e}},S.property=function(e){return function(t){return t[e]}},S.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},S.times=function(e,t,n){for(var s=Array(Math.max(0,e)),i=0;e>i;i++)s[i]=t.call(n,i);return s},S.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},S.now=Date.now||function(){return(new Date).getTime()};var V={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};V.unescape=S.invert(V.escape);var P={escape:new RegExp("["+S.keys(V.escape).join("")+"]","g"),unescape:new RegExp("("+S.keys(V.unescape).join("|")+")","g")};S.each(["escape","unescape"],function(e){S[e]=function(t){return null==t?"":(""+t).replace(P[e],function(t){return V[e][t]})}}),S.result=function(e,t){if(null==e)return void 0;var n=e[t];return S.isFunction(n)?n.call(e):n},S.mixin=function(e){k(S.functions(e),function(t){var n=S[t]=e[t];S.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),q.call(this,n.apply(S,e))}})};var O=0;S.uniqueId=function(e){var t=++O+"";return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;S.template=function(e,t,n){var s;n=S.defaults({},n,S.templateSettings);var i=new RegExp([(n.escape||A).source,(n.interpolate||A).source,(n.evaluate||A).source].join("|")+"|$","g"),r=0,o="__p+='";e.replace(i,function(t,n,s,i,a){return o+=e.slice(r,a).replace(L,function(e){return"\\"+M[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),s&&(o+="'+\n((__t=("+s+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),r=a+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{s=new Function(n.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(t)return s(t,S);var c=function(e){return s.call(this,e,S)};return c.source="function("+(n.variable||"obj")+"){\n"+o+"}",c},S.chain=function(e){return S(e).chain()};var q=function(e){return this._chain?S(e).chain():e};S.mixin(S),k(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];S.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],q.call(this,n)}}),k(["concat","join","slice"],function(e){var t=s[e];S.prototype[e]=function(){return q.call(this,t.apply(this._wrapped,arguments))}}),S.extend(S.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return S})}).call(this),function(e,t){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,s,i){e.Backbone=t(e,i,n,s)});else if("undefined"!=typeof exports){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,s){{var i=e.Backbone,r=[],o=(r.push,r.slice);r.splice}t.VERSION="1.1.2",t.$=s,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=t.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var s=this._events[e]||(this._events[e]=[]);return s.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,s){if(!l(this,"once",e,[t,s])||!t)return this;var i=this,r=n.once(function(){i.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,s)},off:function(e,t,s){var i,r,o,a,c,u,p,d;if(!this._events||!l(this,"off",e,[t,s]))return this;if(!e&&!t&&!s)return this._events=void 0,this;for(a=e?[e]:n.keys(this._events),c=0,u=a.length;u>c;c++)if(e=a[c],o=this._events[e]){if(this._events[e]=i=[],t||s)for(p=0,d=o.length;d>p;p++)r=o[p],(t&&t!==r.callback&&t!==r.callback._callback||s&&s!==r.context)&&i.push(r);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],s=this._events.all;return n&&u(n,t),s&&u(s,arguments),this},stopListening:function(e,t,s){var i=this._listeningTo;if(!i)return this;var r=!t&&!s;s||"object"!=typeof t||(s=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,s,this),(r||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},c=/\s+/,l=function(e,t,n,s){if(!n)return!0;if("object"==typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(s));return!1}if(c.test(n)){for(var r=n.split(c),o=0,a=r.length;a>o;o++)e[t].apply(e,[r[o]].concat(s));return!1}return!0},u=function(e,t){var n,s=-1,i=e.length,r=t[0],o=t[1],a=t[2];switch(t.length){case 0:for(;++s<i;)(n=e[s]).callback.call(n.ctx);return;case 1:for(;++s<i;)(n=e[s]).callback.call(n.ctx,r);return;case 2:for(;++s<i;)(n=e[s]).callback.call(n.ctx,r,o);return;case 3:for(;++s<i;)(n=e[s]).callback.call(n.ctx,r,o,a);return;default:for(;++s<i;)(n=e[s]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){a[t]=function(t,s,i){var r=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return r[o]=t,i||"object"!=typeof s||(i=this),t[e](s,i,this),this}}),a.bind=a.on,a.unbind=a.off,n.extend(t,a);var d=t.Model=function(e,t){var s=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(s=this.parse(s,t)||{}),s=n.defaults({},s,n.result(this,"defaults")),this.set(s,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,s){var i,r,o,a,c,l,u,p;if(null==e)return this;if("object"==typeof e?(r=e,s=t):(r={})[e]=t,s||(s={}),!this._validate(r,s))return!1;o=s.unset,c=s.silent,a=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={}),p=this.attributes,u=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(i in r)t=r[i],n.isEqual(p[i],t)||a.push(i),n.isEqual(u[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete p[i]:p[i]=t;if(!c){a.length&&(this._pending=s);for(var d=0,b=a.length;b>d;d++)this.trigger("change:"+a[d],this,p[a[d]],s)}if(l)return this;if(!c)for(;this._pending;)s=this._pending,this._pending=!1,this.trigger("change",this,s);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var s in this.attributes)t[s]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,s=!1,i=this._changing?this._previousAttributes:this.attributes;for(var r in e)n.isEqual(i[r],t=e[r])||((s||(s={}))[r]=t);return s},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,s=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(s&&s(t,n,e),void t.trigger("sync",t,n,e)):!1},L(this,e),this.sync("read",this,e)},save:function(e,t,s){var i,r,o,a=this.attributes;if(null==e||"object"==typeof e?(i=e,s=t):(i={})[e]=t,s=n.extend({validate:!0},s),i&&!s.wait){if(!this.set(i,s))return!1}else if(!this._validate(i,s))return!1;i&&s.wait&&(this.attributes=n.extend({},a,i)),void 0===s.parse&&(s.parse=!0);var c=this,l=s.success;return s.success=function(e){c.attributes=a;var t=c.parse(e,s);return s.wait&&(t=n.extend(i||{},t)),n.isObject(t)&&!c.set(t,s)?!1:(l&&l(c,e,s),void c.trigger("sync",c,e,s))},L(this,s),r=this.isNew()?"create":s.patch?"patch":"update","patch"===r&&(s.attrs=i),o=this.sync(r,this,s),i&&s.wait&&(this.attributes=a),o},destroy:function(e){e=e?n.clone(e):{};var t=this,s=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&i(),s&&s(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;L(this,e);var r=this.sync("delete",this,e);return e.wait||i(),r},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||M();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var s=this.validationError=this.validate(e,t)||null;return s?(this.trigger("invalid",this,s,n.extend(t,{validationError:s})),!1):!0}});var b=["keys","values","pairs","invert","pick","omit"];n.each(b,function(e){d.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var h=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},w={add:!0,remove:!1};n.extend(h.prototype,a,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,w))},remove:function(e,t){var s=!n.isArray(e);e=s?[e]:n.clone(e),t||(t={});var i,r,o,a;for(i=0,r=e.length;r>i;i++)a=e[i]=this.get(e[i]),a&&(delete this._byId[a.id],delete this._byId[a.cid],o=this.indexOf(a),this.models.splice(o,1),this.length--,t.silent||(t.index=o,a.trigger("remove",a,this,t)),this._removeReference(a,t));return s?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var s=!n.isArray(e);e=s?e?[e]:[]:n.clone(e);var i,r,o,a,c,l,u,p=t.at,b=this.model,h=this.comparator&&null==p&&t.sort!==!1,w=n.isString(this.comparator)?this.comparator:null,f=[],v=[],m={},y=t.add,_=t.merge,x=t.remove,S=!h&&y&&x?[]:!1;for(i=0,r=e.length;r>i;i++){if(c=e[i]||{},o=c instanceof d?a=c:c[b.prototype.idAttribute||"id"],l=this.get(o))x&&(m[l.cid]=!0),_&&(c=c===a?a.attributes:c,t.parse&&(c=l.parse(c,t)),l.set(c,t),h&&!u&&l.hasChanged(w)&&(u=!0)),e[i]=l;else if(y){if(a=e[i]=this._prepareModel(c,t),!a)continue;f.push(a),this._addReference(a,t)}a=l||a,!S||!a.isNew()&&m[a.id]||S.push(a),m[a.id]=!0}if(x){for(i=0,r=this.length;r>i;++i)m[(a=this.models[i]).cid]||v.push(a);v.length&&this.remove(v,t)}if(f.length||S&&S.length)if(h&&(u=!0),this.length+=f.length,null!=p)for(i=0,r=f.length;r>i;i++)this.models.splice(p+i,0,f[i]);else{S&&(this.models.length=0);var k=S||f;for(i=0,r=k.length;r>i;i++)this.models.push(k[i])}if(u&&this.sort({silent:!0}),!t.silent){for(i=0,r=f.length;r>i;i++)(a=f[i]).trigger("add",a,this,t);(u||S&&S.length)&&this.trigger("sort",this,t)}return s?e[0]:e},reset:function(e,t){t||(t={});for(var s=0,i=this.models.length;i>s;s++)this._removeReference(this.models[s],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return o.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,s=this;return e.success=function(n){var i=e.reset?"reset":"set";s[i](n,e),t&&t(s,n,e),s.trigger("sync",s,n,e)},L(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var s=this,i=t.success;return t.success=function(e,n){t.wait&&s.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var s=new this.model(e,t);return s.validationError?(this.trigger("invalid",this,s.validationError,t),!1):s},_addReference:function(e){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,s){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,s),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var f=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(f,function(e){h.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var v=["groupBy","countBy","sortBy","indexBy"];n.each(v,function(e){h.prototype[e]=function(t,s){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,s)}});var m=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,_)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},y=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];n.extend(m.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var s=e[t];if(n.isFunction(s)||(s=this[e[t]]),s){var i=t.match(y),r=i[1],o=i[2];s=n.bind(s,this),r+=".delegateEvents"+this.cid,""===o?this.$el.on(r,s):this.$el.on(r,o,s)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var s=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(s,!1)}}}),t.sync=function(e,s,i){var r=S[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:r,dataType:"json"};if(i.url||(o.url=n.result(s,"url")||M()),null!=i.data||!s||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(i.attrs||s.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),i.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",i.emulateJSON&&(o.data._method=r);var a=i.beforeSend;i.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",r),a?a.apply(this,arguments):void 0}}"GET"===o.type||i.emulateJSON||(o.processData=!1),"PATCH"===o.type&&x&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var c=i.xhr=t.ajax(n.extend(o,i));return s.trigger("request",s,c,i),c};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),S={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var k=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},I=/\((.*?)\)/g,E=/(\(\?)?:\w+/g,N=/\*\w+/g,$=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(k.prototype,a,{initialize:function(){},route:function(e,s,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(s)&&(i=s,s=""),i||(i=this[s]);var r=this;return t.history.route(e,function(n){var o=r._extractParameters(e,n);r.execute(i,o),r.trigger.apply(r,["route:"+s].concat(o)),r.trigger("route",s,o),t.history.trigger("route",r,s,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");
for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace($,"\\$&").replace(I,"(?:$1)?").replace(E,function(e,t){return t?e:"([^/?]+)"}).replace(N,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var s=e.exec(t).slice(1);return n.map(s,function(e,t){return t===s.length-1?e||null:e?decodeURIComponent(e):null})}});var U=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},C=/^[#\/]|\s+$/g,T=/^\/+|\/+$/g,V=/msie [\w.]+/,P=/\/$/,O=/#.*$/;U.started=!1,n.extend(U.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(P,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(C,"")},start:function(e){if(U.started)throw new Error("Backbone.history has already been started");U.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var s=this.getFragment(),i=document.documentMode,r=V.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);if(this.root=("/"+this.root+"/").replace(T,"/"),r&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(s)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=s;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(C,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),U.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!U.started)return!1;t&&t!==!0||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(O,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var s=e.href.replace(/(javascript:|#).*$/,"");e.replace(s+"#"+t)}else e.hash="#"+t}}),t.history=new U;var A=function(e,t){var s,i=this;s=e&&n.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},n.extend(s,i,t);var r=function(){this.constructor=s};return r.prototype=i.prototype,s.prototype=new r,e&&n.extend(s.prototype,e),s.__super__=i.prototype,s};d.extend=h.extend=k.extend=m.extend=U.extend=A;var M=function(){throw new Error('A "url" property or function must be specified')},L=function(e,t){var n=t.error;t.error=function(s){n&&n(e,s,t),e.trigger("error",e,s,t)}};return t}),function(e,t){"object"==typeof exports&&exports?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Mustache={})}(this,function(e){function t(e){return"function"==typeof e}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(e,t){return h.call(e,t)}function i(e){return!s(g,e)}function r(e){return String(e).replace(/[&<>"'\/]/g,function(e){return w[e]})}function o(t,s){function r(){if(x&&!S)for(;w.length;)delete g[w.pop()];else w=[];x=!1,S=!1}function o(e){if("string"==typeof e&&(e=e.split(v,2)),!b(e)||2!==e.length)throw new Error("Invalid tags: "+e);u=new RegExp(n(e[0])+"\\s*"),p=new RegExp("\\s*"+n(e[1])),d=new RegExp("\\s*"+n("}"+e[1]))}if(!t)return[];var u,p,d,h=[],g=[],w=[],x=!1,S=!1;o(s||e.tags);for(var k,I,E,N,$,U,C=new l(t);!C.eos();){if(k=C.pos,E=C.scanUntil(u))for(var T=0,V=E.length;V>T;++T)N=E.charAt(T),i(N)?w.push(g.length):S=!0,g.push(["text",N,k,k+1]),k+=1,"\n"===N&&r();if(!C.scan(u))break;if(x=!0,I=C.scan(_)||"name",C.scan(f),"="===I?(E=C.scanUntil(m),C.scan(m),C.scanUntil(p)):"{"===I?(E=C.scanUntil(d),C.scan(y),C.scanUntil(p),I="&"):E=C.scanUntil(p),!C.scan(p))throw new Error("Unclosed tag at "+C.pos);if($=[I,E,k,C.pos],g.push($),"#"===I||"^"===I)h.push($);else if("/"===I){if(U=h.pop(),!U)throw new Error('Unopened section "'+E+'" at '+k);if(U[1]!==E)throw new Error('Unclosed section "'+U[1]+'" at '+k)}else"name"===I||"{"===I||"&"===I?S=!0:"="===I&&o(E)}if(U=h.pop())throw new Error('Unclosed section "'+U[1]+'" at '+C.pos);return c(a(g))}function a(e){for(var t,n,s=[],i=0,r=e.length;r>i;++i)t=e[i],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(s.push(t),n=t));return s}function c(e){for(var t,n,s=[],i=s,r=[],o=0,a=e.length;a>o;++o)switch(t=e[o],t[0]){case"#":case"^":i.push(t),r.push(t),i=t[4]=[];break;case"/":n=r.pop(),n[5]=t[2],i=r.length>0?r[r.length-1][4]:s;break;default:i.push(t)}return s}function l(e){this.string=e,this.tail=e,this.pos=0}function u(e,t){this.view=null==e?{}:e,this.cache={".":this.view},this.parent=t}function p(){this.cache={}}var d=Object.prototype.toString,b=Array.isArray||function(e){return"[object Array]"===d.call(e)},h=RegExp.prototype.test,g=/\S/,w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},f=/\s*/,v=/\s+/,m=/\s*=/,y=/\s*\}/,_=/#|\^|\/|>|\{|&|=|!/;l.prototype.eos=function(){return""===this.tail},l.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},l.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},u.prototype.push=function(e){return new u(e,this)},u.prototype.lookup=function(e){var n,s=this.cache;if(e in s)n=s[e];else{for(var i,r,o=this;o;){if(e.indexOf(".")>0)for(n=o.view,i=e.split("."),r=0;null!=n&&r<i.length;)n=n[i[r++]];else n=o.view[e];if(null!=n)break;o=o.parent}s[e]=n}return t(n)&&(n=n.call(this.view)),n},p.prototype.clearCache=function(){this.cache={}},p.prototype.parse=function(e,t){var n=this.cache,s=n[e];return null==s&&(s=n[e]=o(e,t)),s},p.prototype.render=function(e,t,n){var s=this.parse(e),i=t instanceof u?t:new u(t);return this.renderTokens(s,i,n,e)},p.prototype.renderTokens=function(n,s,i,r){function o(e){return u.render(e,s,i)}for(var a,c,l="",u=this,p=0,d=n.length;d>p;++p)switch(a=n[p],a[0]){case"#":if(c=s.lookup(a[1]),!c)continue;if(b(c))for(var h=0,g=c.length;g>h;++h)l+=this.renderTokens(a[4],s.push(c[h]),i,r);else if("object"==typeof c||"string"==typeof c)l+=this.renderTokens(a[4],s.push(c),i,r);else if(t(c)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");c=c.call(s.view,r.slice(a[3],a[5]),o),null!=c&&(l+=c)}else l+=this.renderTokens(a[4],s,i,r);break;case"^":c=s.lookup(a[1]),(!c||b(c)&&0===c.length)&&(l+=this.renderTokens(a[4],s,i,r));break;case">":if(!i)continue;c=t(i)?i(a[1]):i[a[1]],null!=c&&(l+=this.renderTokens(this.parse(c),s,i,c));break;case"&":c=s.lookup(a[1]),null!=c&&(l+=c);break;case"name":c=s.lookup(a[1]),null!=c&&(l+=e.escape(c));break;case"text":l+=a[1]}return l},e.name="mustache.js",e.version="0.8.1",e.tags=["{{","}}"];var x=new p;e.clearCache=function(){return x.clearCache()},e.parse=function(e,t){return x.parse(e,t)},e.render=function(e,t,n){return x.render(e,t,n)},e.to_html=function(n,s,i,r){var o=e.render(n,s,i);return t(r)?void r(o):o},e.escape=r,e.Scanner=l,e.Context=u,e.Writer=p});var Hogan={};!function(e){function t(e,t,n){var s;return t&&"object"==typeof t&&(void 0!==t[e]?s=t[e]:n&&t.get&&"function"==typeof t.get&&(s=t.get(e))),s}function n(e,t,n,s,i,r){function o(){}function a(){}o.prototype=e,a.prototype=e.subs;var c,l=new o;l.subs=new a,l.subsText={},l.buf="",s=s||{},l.stackSubs=s,l.subsText=r;for(c in t)s[c]||(s[c]=t[c]);for(c in s)l.subs[c]=s[c];i=i||{},l.stackPartials=i;for(c in n)i[c]||(i[c]=n[c]);for(c in i)l.partials[c]=i[c];return l}function s(e){return String(null===e||void 0===e?"":e)}function i(e){return e=s(e),u.test(e)?e.replace(r,"&amp;").replace(o,"&lt;").replace(a,"&gt;").replace(c,"&#39;").replace(l,"&quot;"):e}e.Template=function(e,t,n,s){e=e||{},this.r=e.code||this.r,this.c=n,this.options=s||{},this.text=t||"",this.partials=e.partials||{},this.subs=e.subs||{},this.buf=""},e.Template.prototype={r:function(){return""},v:i,t:s,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},ep:function(e,t){var s=this.partials[e],i=t[s.name];if(s.instance&&s.base==i)return s.instance;if("string"==typeof i){if(!this.c)throw new Error("No compiler available.");i=this.c.compile(i,this.options)}if(!i)return null;if(this.partials[e].base=i,s.subs){t.stackText||(t.stackText={});for(key in s.subs)t.stackText[key]||(t.stackText[key]=void 0!==this.activeSub&&t.stackText[this.activeSub]?t.stackText[this.activeSub]:this.text);i=n(i,s.subs,s.partials,this.stackSubs,this.stackPartials,t.stackText)}return this.partials[e].instance=i,i},rp:function(e,t,n,s){var i=this.ep(e,n);return i?i.ri(t,n,s):""},rs:function(e,t,n){var s=e[e.length-1];if(!p(s))return void n(e,t,this);for(var i=0;i<s.length;i++)e.push(s[i]),n(e,t,this),e.pop()},s:function(e,t,n,s,i,r,o){var a;return p(e)&&0===e.length?!1:("function"==typeof e&&(e=this.ms(e,t,n,s,i,r,o)),a=!!e,!s&&a&&t&&t.push("object"==typeof e?e:t[t.length-1]),a)},d:function(e,n,s,i){var r,o=e.split("."),a=this.f(o[0],n,s,i),c=this.options.modelGet,l=null;if("."===e&&p(n[n.length-2]))a=n[n.length-1];else for(var u=1;u<o.length;u++)r=t(o[u],a,c),void 0!==r?(l=a,a=r):a="";return i&&!a?!1:(i||"function"!=typeof a||(n.push(l),a=this.mv(a,n,s),n.pop()),a)},f:function(e,n,s,i){for(var r=!1,o=null,a=!1,c=this.options.modelGet,l=n.length-1;l>=0;l--)if(o=n[l],r=t(e,o,c),void 0!==r){a=!0;break}return a?(i||"function"!=typeof r||(r=this.mv(r,n,s)),r):i?!1:""},ls:function(e,t,n,i,r){var o=this.options.delimiters;return this.options.delimiters=r,this.b(this.ct(s(e.call(t,i)),t,n)),this.options.delimiters=o,!1},ct:function(e,t,n){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(e,this.options).render(t,n)},b:function(e){this.buf+=e},fl:function(){var e=this.buf;return this.buf="",e},ms:function(e,t,n,s,i,r,o){var a,c=t[t.length-1],l=e.call(c);return"function"==typeof l?s?!0:(a=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(l,c,n,a.substring(i,r),o)):l},mv:function(e,t,n){var i=t[t.length-1],r=e.call(i);return"function"==typeof r?this.ct(s(r.call(i)),i,n):r},sub:function(e,t,n,s){var i=this.subs[e];i&&(this.activeSub=e,i(t,n,this,s),this.activeSub=!1)}};var r=/&/g,o=/</g,a=/>/g,c=/\'/g,l=/\"/g,u=/[&<>\"\']/,p=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}("undefined"!=typeof exports?exports:Hogan),function(e){var t={},n=this,s="before",i=[],r=null,o=null,a=!1;/jquery\.easyXDM\.debug=true/.test(String(window.location))&&(a=!0),a&&0==e("#log").length&&e("body").append('<div id="log"></div>');var c=function(n,s){function i(){var i=easyXDM.noConflict("jquery_easyXDM");t.easyXDM=i;var o=n+"/javascripts/jquery.easyXDM.provider.html",c=e("#jquery_easyXDM_provider_container")[0]||null;a&&(o+="?jquery.easyXDM.debug=true",c||(c=e('<div id="jquery_easyXDM_provider_container"></div>').appendTo(e("body"))[0])),r=new i.Rpc({remote:o,swf:n+"/easyXDM/easyxdm.swf",container:c,onReady:function(){s.success(r)}},{remote:{jquery_proxy:{}}})}if(!e.support.cors||a){var o=n+"/easyXDM/easyXDM.min.js";a&&(o=n+"/easyXDM/easyXDM.debug.js"),e.getScript(o,function(){"object"==typeof window.JSON&&window.JSON?i():e.getScript(n+"/easyXDM/json2.js",i)})}};t.getConnection=function(e,t){switch(s){case"before":s="working",i.push(t),c(e,{success:function(e){s="success",r=e;for(var t=0;t<i.length;t++)i[t].success(r);i=[]},failure:function(e){s="failure",o=e;for(var t=0;t<i.length;t++)i[t].failure(o);i=[]}});break;case"working":i.push(t);break;case"success":t.success(r);break;case"failure":t.failure(o);break;default:throw new Error("Invalid state: "+s)}},e.ajaxTransport("+*",function(n,s){if(n.crossDomain&&(!e.support.cors||a)){var i="",r=n.url.match(/^(https?:\/\/[^\/]*)\/?.*/);return r&&(i=r[1]),{send:function(e,n){t.getConnection(i,{success:function(e){function t(e){n(e.status,e.statusText,e.responses,e.headers)}s.context=null,e.jquery_proxy(s,t)},error:function(){}})},abort:function(){}}}}),n.jquery_easyXDM=t}(jQuery),function(e){e.extend(e,{placeholder:{browser_supported:function(){return void 0!==this._supported?this._supported:this._supported=!!("placeholder"in e('<input type="text">')[0])},shim:function(t){var n={color:"#888",cls:"placeholder",selector:"input[placeholder], textarea[placeholder]"};return e.extend(n,t),!this.browser_supported()&&e(n.selector)._placeholder_shim(n)}}}),e.extend(e.fn,{_placeholder_shim:function(t){function n(t){var n=e(t).offsetParent().offset(),s=e(t).offset();return{top:s.top-n.top,left:s.left-n.left,width:e(t).width()}}function s(t){var i=t.data("target");"undefined"!=typeof i&&(t.css(n(i)),e(window).one("resize",function(){s(t)}))}return this.each(function(){var i=e(this);if(i.is(":visible")){if(i.data("placeholder")){var r=i.data("placeholder");return r.css(n(i)),!0}var o={};i.is("textarea")||"auto"==i.css("height")||(o={lineHeight:i.css("height"),whiteSpace:"nowrap"});var a="border-box"===i.css("box-sizing"),c=i.is("textarea"),l=e("<label />").text(i.attr("placeholder")).addClass(t.cls).css(e.extend({position:"absolute",display:"inline","float":"none",overflow:"hidden",textAlign:"left",color:t.color,cursor:"text",paddingTop:!c&&a?"0":i.css("padding-top"),paddingRight:i.css("padding-right"),paddingBottom:!c&&a?"0":i.css("padding-bottom"),paddingLeft:i.css("padding-left"),fontSize:i.css("font-size"),fontFamily:i.css("font-family"),fontStyle:i.css("font-style"),fontWeight:i.css("font-weight"),textTransform:i.css("text-transform"),backgroundColor:"transparent",zIndex:99},o)).css(n(this)).attr("for",this.id).data("target",i).click(function(){e(this).data("target").is(":disabled")||e(this).data("target").focus()}).insertBefore(this);i.data("placeholder",l).keydown(function(){l.hide()}).blur(function(){l[i.val().length?"hide":"show"]()}).triggerHandler("blur"),e(window).one("resize",function(){s(l)})}})}})}(jQuery),jQuery(document).add(window).bind("ready load",function(){jQuery.placeholder&&jQuery.placeholder.shim()}),function(e){e.fn.touchwipe=function(t){var n={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!1};return t&&e.extend(n,t),this.each(function(){function e(){this.removeEventListener("touchmove",t),i=null,o=!1}function t(t){if(n.preventDefaultEvents&&t.preventDefault(),o){var s=t.touches[0].pageX,a=t.touches[0].pageY,c=i-s,l=r-a;Math.abs(c)>=n.min_move_x?(e(),c>0?n.wipeLeft():n.wipeRight()):Math.abs(l)>=n.min_move_y&&(e(),l>0?n.wipeDown():n.wipeUp())}}function s(e){1==e.touches.length&&(i=e.touches[0].pageX,r=e.touches[0].pageY,o=!0,this.addEventListener("touchmove",t,!1))}var i,r,o=!1;"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",s,!1)}),this}}(jQuery),!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Spinner=t()}(this,function(){"use strict";function e(e,t){var n,s=document.createElement(e||"div");for(n in t)s[n]=t[n];return s}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,s){var i=["opacity",t,~~(100*e),n,s].join("-"),r=.01+n/s*100,o=Math.max(1-(1-e)/t*(100-r),e),a=l.substring(0,l.indexOf("Animation")).toLowerCase(),c=a&&"-"+a+"-"||"";return p[i]||(d.insertRule("@"+c+"keyframes "+i+"{0%{opacity:"+o+"}"+r+"%{opacity:"+e+"}"+(r+.01)+"%{opacity:1}"+(r+t)%100+"%{opacity:"+e+"}100%{opacity:"+o+"}}",d.cssRules.length),p[i]=1),i}function s(e,t){var n,s,i=e.style;for(t=t.charAt(0).toUpperCase()+t.slice(1),s=0;s<u.length;s++)if(n=u[s]+t,void 0!==i[n])return n;return void 0!==i[t]?t:void 0}function i(e,t){for(var n in t)e.style[s(e,n)||n]=t[n];return e}function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)void 0===e[s]&&(e[s]=n[s])}return e}function o(e,t){return"string"==typeof e?e:e[t%e.length]}function a(e){this.opts=r(e||{},a.defaults,b)}function c(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}d.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(e,s){function r(){return i(n("group",{coordsize:u+" "+u,coordorigin:-l+" "+-l}),{width:u,height:u})}function a(e,a,c){t(d,t(i(r(),{rotation:360/s.lines*e+"deg",left:~~a}),t(i(n("roundrect",{arcsize:s.corners}),{width:l,height:s.width,left:s.radius,top:-s.width>>1,filter:c}),n("fill",{color:o(s.color,e),opacity:s.opacity}),n("stroke",{opacity:0}))))}var c,l=s.length+s.width,u=2*l,p=2*-(s.width+s.length)+"px",d=i(r(),{position:"absolute",top:p,left:p});if(s.shadow)for(c=1;c<=s.lines;c++)a(c,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(c=1;c<=s.lines;c++)a(c);return t(e,d)},a.prototype.opacity=function(e,t,n,s){var i=e.firstChild;s=s.shadow&&s.lines||0,i&&t+s<i.childNodes.length&&(i=i.childNodes[t+s],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}var l,u=["webkit","Moz","ms","O"],p={},d=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),b={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};a.defaults={},r(a.prototype,{spin:function(t){this.stop();var n=this,s=n.opts,r=n.el=i(e(0,{className:s.className}),{position:s.position,width:0,zIndex:s.zIndex});if(s.radius+s.length+s.width,i(r,{left:s.left,top:s.top}),t&&t.insertBefore(r,t.firstChild||null),r.setAttribute("role","progressbar"),n.lines(r,n.opts),!l){var o,a=0,c=(s.lines-1)*(1-s.direction)/2,u=s.fps,p=u/s.speed,d=(1-s.opacity)/(p*s.trail/100),b=p/s.lines;!function h(){a++;for(var e=0;e<s.lines;e++)o=Math.max(1-(a+(s.lines-e)*b)%p*d,s.opacity),n.opacity(r,e*s.direction+c,o,s);n.timeout=n.el&&setTimeout(h,~~(1e3/u))}()}return n},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(s,r){function a(t,n){return i(e(),{position:"absolute",width:r.length+r.width+"px",height:r.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*u+r.rotate)+"deg) translate("+r.radius+"px,0)",borderRadius:(r.corners*r.width>>1)+"px"})}for(var c,u=0,p=(r.lines-1)*(1-r.direction)/2;u<r.lines;u++)c=i(e(),{position:"absolute",top:1+~(r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:l&&n(r.opacity,r.trail,p+u*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&t(c,i(a("#000","0 0 4px #000"),{top:"2px"})),t(s,t(c,a(o(r.color,u),"0 0 1px rgba(0,0,0,.1)")));return s},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var h=i(e("group"),{behavior:"url(#default#VML)"});return!s(h,"transform")&&h.adj?c():l=s(h,"animation"),a}),function(e){if("object"==typeof exports)e(require("jquery"),require("spin"));else if("function"==typeof define&&define.amd)define(["jquery","spin"],e);else{if(!window.Spinner)throw new Error("Spin.js not present");e(window.jQuery,window.Spinner)}}(function(e,t){e.fn.spin=function(n,s){return this.each(function(){var i=e(this),r=i.data();r.spinner&&(r.spinner.stop(),delete r.spinner),n!==!1&&(n=e.extend({color:s||i.css("color")},e.fn.spin.presets[n]||n),r.spinner=new t(n).spin(this))})},e.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),function(e){e(["jquery"],function(e){return function(){function t(e,t,n){return h({type:y.error,iconClass:g().iconClasses.error,message:e,optionsOverride:n,title:t})}function n(t,n){return t||(t=g()),f=e("#"+t.containerId),f.length?f:(n&&(f=p(t)),f)}function s(e,t,n){return h({type:y.info,iconClass:g().iconClasses.info,message:e,optionsOverride:n,title:t})}function i(e){v=e}function r(e,t,n){return h({type:y.success,iconClass:g().iconClasses.success,message:e,optionsOverride:n,title:t})}function o(e,t,n){return h({type:y.warning,iconClass:g().iconClasses.warning,message:e,optionsOverride:n,title:t})}function a(e){var t=g();f||n(t),u(e,t)||l(t)}function c(t){var s=g();return f||n(s),t&&0===e(":focus",t).length?void w(t):void(f.children().length&&f.remove())}function l(t){for(var n=f.children(),s=n.length-1;s>=0;s--)u(e(n[s]),t)}function u(t,n){return t&&0===e(":focus",t).length?(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){w(t)}}),!0):!1}function p(t){return f=e("<div/>").attr("id",t.containerId).addClass(t.positionClass).attr("aria-live","polite").attr("role","alert"),f.appendTo(e(t.target)),f}function d(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:"<button>&times;</button>",newestOnTop:!0}}function b(e){v&&v(e)}function h(t){function s(t){return!e(":focus",l).length||t?l[o.hideMethod]({duration:o.hideDuration,easing:o.hideEasing,complete:function(){w(l),o.onHidden&&"hidden"!==h.state&&o.onHidden(),h.state="hidden",h.endTime=new Date,b(h)}}):void 0}function i(){(o.timeOut>0||o.extendedTimeOut>0)&&(c=setTimeout(s,o.extendedTimeOut))}function r(){clearTimeout(c),l.stop(!0,!0)[o.showMethod]({duration:o.showDuration,easing:o.showEasing})}var o=g(),a=t.iconClass||o.iconClass;"undefined"!=typeof t.optionsOverride&&(o=e.extend(o,t.optionsOverride),a=t.optionsOverride.iconClass||a),m++,f=n(o,!0);var c=null,l=e("<div/>"),u=e("<div/>"),p=e("<div/>"),d=e(o.closeHtml),h={toastId:m,state:"visible",startTime:new Date,options:o,map:t};return t.iconClass&&l.addClass(o.toastClass).addClass(a),t.title&&(u.append(t.title).addClass(o.titleClass),l.append(u)),t.message&&(p.append(t.message).addClass(o.messageClass),l.append(p)),o.closeButton&&(d.addClass("toast-close-button").attr("role","button"),l.prepend(d)),l.hide(),o.newestOnTop?f.prepend(l):f.append(l),l[o.showMethod]({duration:o.showDuration,easing:o.showEasing,complete:o.onShown}),o.timeOut>0&&(c=setTimeout(s,o.timeOut)),l.hover(r,i),!o.onclick&&o.tapToDismiss&&l.click(s),o.closeButton&&d&&d.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),s(!0)}),o.onclick&&l.click(function(){o.onclick(),s()}),b(h),o.debug&&console,l}function g(){return e.extend({},d(),_.options)}function w(e){f||(f=n()),e.is(":visible")||(e.remove(),e=null,0===f.children().length&&f.remove())}var f,v,m=0,y={error:"error",info:"info",success:"success",warning:"warning"},_={clear:a,remove:c,error:t,getContainer:n,info:s,options:{},subscribe:i,success:r,version:"2.0.3",warning:o};return _}()})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)});var base,base1,base10,base11,base2,base3,base4,base5,base6,base7,base8,base9;window.Expresso||(window.Expresso={}),(base=window.Expresso).Acquisition||(base.Acquisition={}),(base1=window.Expresso).Routing||(base1.Routing={}),(base2=window.Expresso).Models||(base2.Models={}),(base3=window.Expresso).Collections||(base3.Collections={}),(base4=window.Expresso).Views||(base4.Views={}),(base5=window.Expresso).Styles||(base5.Styles={}),(base6=window.Expresso).Gigya||(base6.Gigya={}),(base7=window.Expresso).Templates||(base7.Templates={}),(base8=window.Expresso.Templates).Gigya||(base8.Gigya={}),(base9=window.Expresso.Templates).Account||(base9.Account={}),(base10=window.Expresso.Templates).Subscriptions||(base10.Subscriptions={}),(base11=window.Expresso.Templates).RegistrationDialog||(base11.RegistrationDialog={}),function(){var e;return e=Backbone.sync,Backbone.sync=function(t,n,s){var i,r,o,a,c,l,u,p;return s||(s={}),s.crossDomain||(s.crossDomain=!0),l=s.error,"function"==typeof l&&(r=function(e,t,n){return 401===e.status&&toastr.error("Sorry, you must be logged in to view this content"),l(e,t,n)},s.error=r),s.xhrFields||(s.xhrFields={withCredentials:!0}),window.expressoUser&&window.expressoUser.get("token")&&(i="Bearer "+window.expressoUser.get("token"),s.headers=s.headers||{},s.headers.Authorization=i),window.expressoUser.isNotLoggedIn()?(p=function(i){var r;return r=i.access_token,window.expressoUser.set("token",r),s.headers={Authorization:"Bearer "+r},e(t,n,s)},u=new window.Expresso.Models.BearerToken,u.customSave(p)):window.isSafari?(a=function(i){var r;return r=i.access_token,s.headers={Authorization:"Bearer "+r},e(t,n,s)},c={UID:window.expressoUser.userId(),UIDSignature:window.expressoUser.UIDSignature(),signatureTimestamp:window.expressoUser.signatureTimestamp(),brand:window.expressoOptions.brand},o=new window.Expresso.Models.BearerToken,o.customSaveIos(c,a)):e(t,n,s)}}();var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Models.BearerToken=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.url=window.expressoOptions.apiUrl+"/token/Brand/"+window.expressoOptions.brand,t.prototype.initialize=function(){},t.prototype.customSave=function(e){return $.ajax({type:"POST",url:this.url,data:{client_id:"NS.Expresso",grant_type:"NS.Expresso.BearerToken"},success:e,contentType:"application/x-www-form-urlencoded",dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0})},t.prototype.customSaveIos=function(e,t){return $.ajax({type:"POST",url:this.url,data:{client_id:"NS.Expresso",grant_type:"NS.Expresso.iOS",uid:e.UID,uidSignature:e.UIDSignature,signatureTimestamp:e.signatureTimestamp,brand:e.brand},success:t,contentType:"application/x-www-form-urlencoded",dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0})},t}(Backbone.Model);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Models.Category=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.url=function(){return window.expressoOptions.apiUrl+"/newsletters/Brand/"+window.expressoOptions.brand+"/categories/"+this.get("id")},t.prototype.initialize=function(){return this.set("Brand",window.expressoOptions.brand)},t.prototype.forTemplate=function(){var e,t;return t=[],_.each(this.get("SubCategories"),function(e){var n;return n=!1,(parseInt(e.Count)>6||"Mobile"===window.expressoOptions.mode&&parseInt(e.Count)>1)&&(n=!0),t.push({Name:e.Name,WebSafeTitle:e.WebSafeTitle,Full:e.Full,SubFull:!n})}),e={Name:this.get("Name"),WebSafeTitle:this.get("WebSafeTitle"),SubCategories:t,Full:this.get("Full")}},t}(Backbone.Model);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Models.Email=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.url=window.expressoOptions.apiUrl+"/account/email/exists",t.prototype.initialize=function(){return this.set("Exists",!1),this.set("brand",window.expressoOptions.brand)},t.prototype.isValid=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},t.prototype.check=function(e,t){if(null==t&&(t=!1),!this.iv||this.iv!==e){if(!this.isValid(e))return;return this.set("emailAddress",e),this.save({contentType:"application/json"})}},t.prototype.setInitialValue=function(e){return this.iv=e},t}(Backbone.Model);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Models.FirstLastNameSuggestion=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.url=window.expressoOptions.apiUrl+"/account/screenname/suggestion",t.prototype.initialize=function(){return this.set("SuggestedScreenName",""),this.set("brand",window.expressoOptions.brand)},t.prototype.check=function(e,t){return this.set("SuggestedScreenName"," "),this.set("firstName",e),this.set("lastName",t),this.save({contentType:"application/json"})},t}(Backbone.Model);var bind=function(e,t){return function(){return e.apply(t,arguments)}},extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Models.LoggedInUser=function(e){function t(){return this.fullName=bind(this.fullName,this),t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.initialize=function(){return this.set("brand",window.expressoOptions.brand),this.set("loggedin",!1),this.loginEvents=[]},t.prototype.addLoginEvent=function(e){return this.loginEvents.push(e)},t.prototype.onLogin=function(){return _.each(this.loginEvents,function(e){return"function"==typeof e?e():void 0})},t.prototype.logOut=function(){var e;return this.url=window.expressoOptions.apiUrl+"/notify/loggedout",e=this,this.save(null,{success:function(){return e.set("loggedin",!1),window.location="/"}}),this},t.prototype.userId=function(){return this.get("userId")},t.prototype.isNotLoggedIn=function(){return!this.get("loggedin")},t.prototype.fullName=function(){return this.firstName()+" "+this.lastName()},t.prototype.isLoggedIn=function(){return this.get("loggedin")},t.prototype.firstName=function(){return this.get("firstName")
},t.prototype.lastName=function(){return this.get("lastName")},t.prototype.specialInterest=function(){return this.get("specialInterest")},t.prototype.signatureTimestamp=function(){return this.get("signatureTimestamp")},t.prototype.UIDSignature=function(){return this.get("UIDSignature")},t.prototype.reload=function(){return window.location.reload(!0)},t.prototype.populateName=function(){return $(".nse_name-container").html(this.fullName()),this.get("avatar")&&""!==this.get("avatar")?$(".nse_profile-photo").attr({alt:this.fullName()+" avatar",src:this.get("avatar")}):void 0},t.prototype.setAccountInfo=function(e){var t;return t=window.expressoUser,t.set("userId",e.UID),e.profile?(t.set("firstName",e.profile.firstName),t.set("lastName",e.profile.lastName),e.profile.thumbnailURL&&t.set("avatar",e.profile.thumbnailURL),e.data.specialInterest&&t.set("specialInterest",e.data.specialInterest),t.populateName()):gigya.accounts.getAccountInfo({callback:window.expressoUser.setAccountInfo}),t.set("signatureTimestamp",e.signatureTimestamp),t.set("UIDSignature",e.UIDSignature)},t.prototype.verifyAuthenticated=function(e,t,n){var s;return s=this,this.url=window.expressoOptions.apiUrl+"/account/authenticated",this.setAccountInfo(e),this.save(null,{success:function(e){if(s.set("loggedin",e.get("Authenticated")),e.get("Authenticated")){if(s.onLogin(),"function"==typeof t)return t()}else if("function"==typeof n)return n()}}),this},t.prototype.logIn=function(e,t){var n;return e.newUser&&e.user&&"twitter"===e.user.loginProvider&&(window.currentGigyaAction="registering"),n=this,this.url=window.expressoOptions.apiUrl+"/notify/loggedin",this.setAccountInfo(e),this.save(null,{success:function(){return n.set("loggedin",!0),n.onLogin(),"function"==typeof t?t():void 0}}),this},t}(Backbone.Model);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Models.Newsletter=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.url=function(){return window.expressoOptions.apiUrl+"/newsletters/Brand/"+window.expressoOptions.brand+"/List/"},t.prototype.initialize=function(){return this.set("UserId",window.expressoUser.userId()),this.set("Brand",window.expressoOptions.brand)},t.prototype.parse=function(e){return e&&e.ImageUrl&&(e.ImageUrl=Expresso.util.assetUrl(e.ImageUrl)),e},t.prototype.truncatedDescription=function(e){var t;return t=this.get("Description"),t?t.length>e?t.substring(0,e)+"...":t:"No description."},t.prototype.truncatedName=function(e){var t;return t=this.get("Name"),t.length>e?t.substring(0,e)+"...":t},t.prototype.forTemplate=function(e,t){var n;return n=[],_.each(this.get("FrequencyChoices"),function(e){return n.push({Frequency:e.Frequency,PublicationListId:e.PublicationListId})}),this.set("Name",this.truncatedName(e[0])),this.set("ShowFrequencies",!t&&n.length>1),this.set("Subscribed",t),this.set("Description",this.truncatedDescription(e[1])),this.set("FrequencyChoices",n),this.set("loggedIn",window.expressoUser.isLoggedIn()),this.toJSON()},t.prototype.getSubscription=function(){var e;return e=new window.Expresso.Models.Subscription,e.set("NewsletterId",this.get("NewsletterId")),e.set("Name",this.get("Name")),e.set("FrequencyDescription",this.get("FrequencyDescription")),e.set("ImageUrl",this.get("ImageUrl")),e},t.prototype.fetchByPublicationListId=function(e,t){var n;return n=this,this.fetch({url:this.url()+e.listid,success:function(){return n.set("Subscribed",!0),"function"==typeof t?t(e):void 0},error:function(){return"function"==typeof t?t(e):void 0}})},t}(Backbone.Model);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Models.Preferences=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.url=function(){return window.expressoOptions.apiUrl+"/preferences/"+window.expressoUser.userId()+"/Brand/"+window.expressoOptions.brand},t.prototype.initialize=function(){return this.set("UserId",window.expressoUser.userId()),this.set("Brand",window.expressoOptions.brand),this.set("isDirty",!1)},t.prototype.toggleDirty=function(){return this.set("isDirty",!this.get("isDirty"))},t.prototype.isNew=function(){return!1},t.prototype.updateOptIn=function(e,t){var n,s,i;for(n=s=0;2>=s;n=s+=1)i=this.get("OptInPreferences")[n],i.Name===e&&(i.OptedIn=t);return this},t.prototype.readOptIn=function(e){var t,n,s,i;for(i=!1,t=n=0;2>=n;t=n+=1)this.get("OptInPreferences")&&(s=this.get("OptInPreferences")[t],s.Name===e&&(i=s.OptedIn));return i},t.prototype.toUnsubscribed=function(){return this.set("OptInPreferences",[{Name:"brandOptIn",OptedIn:!1},{Name:"nsOptIn",OptedIn:!1},{Name:"thirdPartyOptIn",OptedIn:!1}]),this},t}(Backbone.Model),window.Expresso.Models.LoggedOutPreferences=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.url=function(){return window.expressoOptions.apiUrl+"/preferences/email/"+this.get("email")+"/Brand/"+this.get("Brand")},t.prototype.initialize=function(){return this.set("Brand",window.expressoOptions.brand),this.toUnsubscribed()},t}(window.Expresso.Models.Preferences);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Models.ScreenName=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.url=window.expressoOptions.apiUrl+"/account/screenname/exists",t.prototype.initialize=function(){return this.set("brand",window.expressoOptions.brand)},t.prototype.check=function(e){return this.iv&&this.iv===e?void 0:(this.set("screenName",e),this.save({contentType:"application/json"}))},t.prototype.setInitialValue=function(e){return this.iv=e},t}(Backbone.Model);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Models.SimpleNewsletter=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.isNew=function(){return!0},t.prototype.url=function(){var e,t;return t="",e="",this.get("loggedIn")&&(t="UserId/"+window.expressoUser.userId()+"/"),this.get("isAM")&&(e="?forAcquisitionModule=true"),window.expressoOptions.apiUrl+"/newsletters/Brand/"+window.expressoOptions.brand+"/"+t+"Keys"+e},t.prototype.initialize=function(){return this.get("isAM")&&this.set("acquisitionModule",!0),this.set("Frequency","Daily"),this.set("UserId",window.expressoUser.userId()),this.set("Brand",window.expressoOptions.brand)},t.prototype.parse=function(e){return e&&e.ImageUrl&&(e.ImageUrl=Expresso.util.assetUrl(e.ImageUrl)),e},t}(Backbone.Model);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Models.Subscription=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.url=function(){return window.expressoOptions.apiUrl+"/subscriptions/brand/"+window.expressoOptions.brand+"/user/"+window.expressoUser.userId()},t.prototype.defaultUrl=function(){return window.expressoOptions.apiUrl+"/subscriptions/brand/"+window.expressoOptions.brand+"/user/"+window.expressoUser.userId()},t.prototype.initialize=function(){return this.set("UserId",window.expressoUser.userId()),this.set("Brand",window.expressoOptions.brand)},t.prototype.parse=function(e){return e&&e.ImageUrl&&(e.ImageUrl=Expresso.util.assetUrl(e.ImageUrl)),e},t.prototype.forTemplate=function(){return this.toJSON()},t}(Backbone.Model);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Collections.Categories=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.model=window.Expresso.Models.Category,t.prototype.url=function(){return window.expressoOptions.apiUrl+"/newsletters/Brand/"+window.expressoOptions.brand+"/categories"},t.prototype.initialize=function(){return this.set("Brand",window.expressoOptions.brand)},t.prototype.parse=function(e){return _.each(e.Categories,function(e){return _.each(e.SubCategories,function(e){return e.Full=!1})}),e.Categories},t.prototype.getCategories=function(){var e;return e=[],_.each(this.models,function(t){return e.push(t.forTemplate())}),e},t.prototype.setFullAndGetParentCategoryByWebSafeTitle=function(e){var t;return t=null,_.each(this.models,function(n){var s;return s=n,s.get("WebSafeTitle")===e?(s.set("Full",!0),t=s):_.each(n.get("SubCategories"),function(n){return n.WebSafeTitle===e?(n.Full=!0,t=s):void 0})}),t},t}(Backbone.Collection);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Collections.Newsletters=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.model=window.Expresso.Models.Newsletter,t.prototype.url=function(){return window.expressoOptions.apiUrl+"/newsletters/Brand/"+window.expressoOptions.brand},t.prototype.initialize=function(){return this.set("UserId",window.expressoUser.userId()),this.set("Brand",window.expressoOptions.brand)},t.prototype.parse=function(e){return _.each(e.Newsletters,function(e){return e.id=e.NewsletterId}),e.Newsletters},t.prototype.isNew=function(){return!1},t.prototype.getNewslettersByCategory=function(e){var t,n;return n=[],t=0,_.each(this.models,function(s){return s.get("WebSafeCategory")===e&&(t++,n.push(s.forTemplate([30,175])),t%3===0)?n.push({Break:!0,WebSafeCategory:e}):void 0}),n},t.prototype.getMostPopular=function(e){var t,n;return n=[],t=0,_.each(this.models,function(e){var s;return s=e.forTemplate([30,175]),s.MostPopular===!0&&(t++,n.push(s),t%3===0)?n.push({Break:!0}):void 0}),e&&e(n),n},t.prototype.updateSubscriptionStatusByNewsletterId=function(e,t){var n;return n=_.find(this.models,function(t){return t.get("NewsletterId")===e}),n?(n.set("Subscribed",t),n):null},t.prototype.unsubscribeFromAllNewsletters=function(){return _.each(this.models,function(e){return e.set("Subscribed",!1)})},t.prototype.fetchByCategory=function(e,t,n){return this.fetch({url:this.url()+"/Category/"+e,add:!0,merge:!0,remove:!1,success:function(){return"function"==typeof t?t(e,n):void 0}})},t.prototype.getPublicationListIdByNewsletterIdAndFrequency=function(e,t){var n;return n=null,_.each(this.models,function(s){return s.get("NewsletterId")===e?_.each(s.get("FrequencyChoices"),function(e){return e.Frequency===t?n=e.PublicationListId:void 0}):void 0}),n},t.prototype.getNewsletterByPublicationListId=function(e){var t;return t=null,_.each(this.models,function(n){return _.each(n.get("FrequencyChoices"),function(s){return s.PublicationListId===e?t=n:void 0})}),t},t}(Backbone.Collection);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Collections.Subscriptions=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.model=window.Expresso.Models.Subscription,t.prototype.url=function(){return window.expressoOptions.apiUrl+"/subscriptions/brand/"+window.expressoOptions.brand+"/user/"+window.expressoUser.userId()},t.prototype.initialize=function(){return this.set("UserId",window.expressoUser.userId()),this.set("Brand",window.expressoOptions.brand)},t.prototype.parse=function(e){return _.each(e.Subscriptions,function(e){return e.PublicationListId=window.Expresso.Newsletters.getPublicationListIdByNewsletterIdAndFrequency(e.NewsletterId,e.Frequency)}),e.Subscriptions},t.prototype.removeByNewsletterId=function(e){var t,n;return n=this,t="Unknown",_.each(n.models,function(s){var i;if(s)return s.get("NewsletterId")===e?(t=s.get("Frequency"),s.isNew=function(){return!1},i=s.url()+"/"+s.get("NewsletterId")+"/"+s.get("Frequency"),s.url=function(){return i},s.destroy(),n.remove(s)):void 0}),t},t.prototype.removeByEmailAndPublicationListId=function(e,t){var n;return n=new window.Expresso.Models.Subscription,n.set("Email",e),n.set("ListId",t),n.url=function(){return window.expressoOptions.apiUrl+"/unsubscribe/"+e+"/list/"+t},n.save()},t.prototype.removeAll=function(){return Backbone.sync("delete",this,{url:this.url()+"/all"})},t.prototype.forTemplate=function(){var e;return e=[],_.each(this.models,function(t){return e.push(t.forTemplate())}),e},t.prototype.addSubscription=function(e,t){var n,s;return n=e.get("NewsletterId"),s=new window.Expresso.Models.Subscription,s.set("NewsletterId",n),s.set("Frequency",t),s.set("PublicationListId",window.Expresso.Newsletters.getPublicationListIdByNewsletterIdAndFrequency(n,t)),s.set("ImageUrl",e.get("ImageUrl")),s.set("Name",e.get("Name")),window.Expresso.Subscriptions.add(s),s.save()},t.prototype.isSubscribedToNewsletter=function(e){var t;return t=!1,_.each(this.models,function(n){return n.get("PublicationListId")===e?t=!0:void 0}),t},t}(Backbone.Collection);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};window.Expresso.Views.AccountView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.el="#nse_account",t.prototype.initialize=function(){return this.checkboxView=new window.Expresso.Views.CheckboxView,this.WelcomeMessageView=new window.Expresso.Views.WelcomeMessageView,window.Expresso.Preferences=new window.Expresso.Models.Preferences,window.Expresso.Preferences.on("change:isDirty",this.setUI,this),this.spinner=new window.Expresso.Views.SpinnerView,this.startRequest(),window.expressoUser.isNotLoggedIn()&&this.stopRequest(),this.setupRouting(),window.expressoUser.populateName(),window.Expresso.Preferences.on("sync",this.notifyPrefsUpdated,this)},t.prototype.events={"click .nse_checkbox-override":"changePreference","click #nse_save-preferences":"savePreference","click #nse_pref-signin":"signIn","click #nse_pref-register":"register"},t.prototype.signIn=function(e){return e.preventDefault(),window.currentGigyaAction="loggingin",window.widgetView?$(".nse_login-link").trigger("click"):void 0},t.prototype.register=function(e){return e.preventDefault(),window.currentGigyaAction="registering",window.widgetView?$(".nse_register-link").trigger("click"):void 0},t.prototype.startRequest=function(){return this.$el.find("#nse_opt-in-container .nse_checkbox-group-wrapper").find(".nse_checkbox-wrapper").hide(),this.spinner.createCustomSpinner(this.$el.find("#nse_opt-in-container"),".nse_loading",window.expressoOptions.customSpinners.lines,window.expressoOptions.customSpinners.length,window.expressoOptions.customSpinners.width,window.expressoOptions.customSpinners.radius)},t.prototype.stopRequest=function(){return this.spinner.killCustomSpinner(this.$el.find("#nse_opt-in-container"),".nse_loading"),this.$el.find("#nse_opt-in-container .nse_loading").remove(),this.$el.find("#nse_opt-in-container .nse_checkbox-group-wrapper .nse_checkbox-wrapper").show()},t.prototype.switchTabs=function(e){return $(".nse_active-tab").removeClass("nse_active-tab"),$(".nse_page-container").hide(),$('a[data-nse-page="'+e+'"]').parent().addClass("nse_active-tab"),$('div[data-nse-page="'+e+'"]').show()},t.prototype.setUp=function(){var e;return e=this,this.xhr=window.Expresso.Preferences.fetch({success:function(){return e.setUI(),e.notifyPrefsUpdated()},error:function(){return!1}})},t.prototype.setUI=function(){var e;return e=this,this.$(".nse_checkbox.optin").each(function(){var t,n,s;return t=$(this),n=t.attr("data-type"),s=window.Expresso.Preferences.readOptIn(n),s?t.attr("checked","checked"):t.removeAttr("checked","checked"),t.siblings(".nse_checkbox-override").toggleClass("checked",s),e.stopRequest()})},t.prototype.setupRouting=function(){var e;return e=this,window.accountsView||(window.accountsView=this),window.Expresso.appRouter.on("route:globalUnsubscribe",function(t,n){var s;return e.xhr&&e.xhr.abort(),e.stopRequest(),s=window.Expresso.appRouter.parse(n),e.handleGlobalUnsubscribe(s),e.setUpRoute()}),window.Expresso.appRouter.on("route:specificUnsubscribe",function(t,n){var s;return s=window.Expresso.appRouter.parse(n),e.switchTabs("nse_preference-centre"),e.setUpRoute(),window.SpecificUnsubscribeNewsletter=null,window.expressoUser.isLoggedIn()&&(window.SpecificUnsubscribeNewsletter=window.Expresso.Newsletters.getNewsletterByPublicationListId(s.listid)),window.SpecificUnsubscribeNewsletter?e.handleSpecificUnsubscribe(s):(window.SpecificUnsubscribeNewsletter=new window.Expresso.Models.Newsletter,window.SpecificUnsubscribeNewsletter.set("ListId",s.listid),window.SpecificUnsubscribeNewsletter.fetchByPublicationListId(s,window.accountsView.handleSpecificUnsubscribe))}),window.Expresso.appRouter.on("route:resetPassword",function(e,t){return $("#nse_account").length?(localStorage.setItem("nse_route","reset-password"),$("#nse_account").html(Mustache.to_html(window.Expresso.Templates.ResetPassword,window.expressoOptions)),window.resetPasswordView||(window.resetPasswordView=new window.Expresso.Views.ResetPasswordView(window.Expresso.appRouter.parse(t)))):void 0}),window.Expresso.appRouter.on("route:accountSettings",function(){return window.expressoUser.isLoggedIn()?(localStorage.setItem("nse_route","update-profile"),e.switchTabs("nse_account-settings-content"),window.detailsView.setUpRoute("update-profile")):window.location.replace(window.expressoOptions.preferencesLink)}),window.Expresso.appRouter.on("route:accountPassword",function(){return window.expressoUser.isLoggedIn()?(localStorage.setItem("nse_route","change-password"),e.switchTabs("nse_change-password-content"),window.detailsView.setUpRoute("change-password")):window.location.replace(window.expressoOptions.preferencesLink)}),window.Expresso.appRouter.on("route:accountPreferences",function(){return window.expressoUser.isLoggedIn()&&(localStorage.setItem("nse_route","update-profile"),e.switchTabs("nse_account-settings-content"),window.detailsView.setUpRoute("update-profile")),window.location.replace(window.expressoOptions.preferencesLink)}),window.Expresso.appRouter.on("route:defaultRoute",function(){return $("#nse_account").length?(localStorage.setItem("nse_route","update-profile"),e.switchTabs("nse_account-settings-content"),window.detailsView.setUpRoute("update-profile")):void 0}),Backbone.History.started?void 0:Backbone.history.start({pushState:indexOf.call(window.history,"pushState")>=0})},t.prototype.setUpRoute=function(){var e;return e=this,$("#nse_newsletter-categories").length?(localStorage.setItem("isRegistration","0"),window.NewsletterCategoriesView||(window.NewsletterCategoriesView=new window.Expresso.Views.NewsletterCategoriesView(function(){return e.levelContainerHeights(),$("#nse_subscriptions-container").length?window.NewsletterSubscriptionsView||(window.NewsletterSubscriptionsView=new window.Expresso.Views.NewsletterSubscriptionsView(function(){return window.SubscribeUnsubscribeView||(window.SubscribeUnsubscribeView=new window.Expresso.Views.SubscribeUnsubscribeView(function(){return window.expressoUser.isLoggedIn()?(e.setUp(),window.Expresso.subscriptionsLoaded=!0):void 0}))})):void 0}))):void 0},t.prototype.handleGlobalUnsubscribe=function(e){return window.expressoUser.isLoggedIn()||(window.Expresso.Preferences=new window.Expresso.Models.LoggedOutPreferences(e)),window.Expresso.Preferences.toUnsubscribed().save(),window.Expresso.Preferences.set("Global",!0).set("Specific",!1).set("LoggedIn",window.expressoUser.isLoggedIn()),window.Expresso.Preferences.set("brandOptIn",window.expressoOptions.brandOptIn),window.Expresso.Preferences.set("nsOptIn",window.expressoOptions.nsOptIn),window.Expresso.Preferences.set("thirdPartyOptIn",window.expressoOptions.thirdPartyOptIn),window.UnsubscribeView&&(window.UnsubscribeView.unbind(),$(window.UnsubscribeView.el).empty()),window.UnsubscribeView=new window.Expresso.Views.InstantUnsubscribeView(window.Expresso.Preferences),window.UnsubscribeView.render(),window.accountsView.checkboxView&&window.accountsView.checkboxView.unbind(),window.accountsView.checkboxView=new window.Expresso.Views.CheckboxView,window.accountsView.setUI(),toastr.success("You have been unsubscribed from all communications")},t.prototype.handleSpecificUnsubscribe=function(e){var t,n;return n=this,window.expressoUser.isLoggedIn()&&!window.Expresso.subscriptionsLoaded?setTimeout(function(){return window.accountsView.handleSpecificUnsubscribe.apply(window.accountsView,[e])},200):(window.expressoUser.isLoggedIn()||(window.Expresso.Preferences=new window.Expresso.Models.LoggedOutPreferences(e),(t=window.Expresso).Subscriptions||(t.Subscriptions=new window.Expresso.Collections.Subscriptions),window.Expresso.Subscriptions.removeByEmailAndPublicationListId(e.email,e.listid)),window.SpecificUnsubscribeNewsletter&&window.SpecificUnsubscribeNewsletter.get("Subscribed")||toastr.info("No subscription found"),window.SpecificUnsubscribeNewsletter&&window.SpecificUnsubscribeNewsletter.get("Subscribed")&&(window.SpecificUnsubscribeNewsletter.set("FrequencyDescription",window.Expresso.Subscriptions.removeByNewsletterId(window.SpecificUnsubscribeNewsletter.get("NewsletterId"))),window.SpecificUnsubscribeNewsletter.set("Subscribed",!1),window.expressoUser.isLoggedIn()&&(window.NewsletterSubscriptionsView.setNewsletterSubscriptionsUI(),window.accountsView.updateSubscriptionStateInUI(window.SpecificUnsubscribeNewsletter.get("NewsletterId"),!1),window.Expresso.Preferences.set("Newsletter",window.SpecificUnsubscribeNewsletter.forTemplate([30,175])),window.Expresso.Preferences.set("Specific",!0).set("Global",!1).set("LoggedIn",window.expressoUser.isLoggedIn()).set("ShowUnsubscribeAll",!!window.Expresso.Subscriptions.models.length)),toastr.success("You have unsubscribed from "+window.SpecificUnsubscribeNewsletter.get("Name"))),window.UnsubscribeView&&(window.UnsubscribeView.unbind(),$(window.UnsubscribeView.el).empty()),window.UnsubscribeView=new window.Expresso.Views.InstantUnsubscribeView(window.Expresso.Preferences),window.UnsubscribeView.render())},t.prototype.changePreference=function(e){var t,n;return t=$(e.currentTarget).siblings("input.nse_checkbox").attr("data-type"),n=$(e.currentTarget).siblings("input.nse_checkbox").prop("checked"),window.Expresso.Preferences.updateOptIn(t,n),this.setUI(),window.Expresso.Preferences.toggleDirty()},t.prototype.savePreference=function(e){return e.preventDefault(),window.Expresso.Preferences.save(),toastr.success("Your opt-in preferences have been changed")},t.prototype.notifyAuthEvent=function(){return this.tryGigyaLogin()},t.prototype.notifyPrefsUpdated=function(){return this.trigger("prefsUpdated",{})},t.prototype.promptToOptIn=function(){return toastr.options={onclick:this.addBrandOptIn},toastr.warning(window.expressoOptions.promptToOptIn)},t.prototype.addBrandOptIn=function(){return $("html, body").animate({scrollTop:$("#nse_checkbox_brandOptIn-override").offset().top+"px"},"slow"),setTimeout(function(){var e,t;return e="brandOptIn",t="checked",window.Expresso.Preferences.updateOptIn(e,!0).save(),this.$("#nse_checkbox_brandOptIn").each(function(){var e;return e=$(this),e.attr("checked","checked")}),window.Expresso.Preferences.toggleDirty(),toastr.success("Thanks. You can now subscribe to any newsletters.")},1e3)},t.prototype.updateSubscriptionStateInUI=function(e,t){var n,s,i,r;return n=$("[data-newsletter-container='"+e+"']").find('[data-newsletter-id="'+e+'"]'),n?(s=n.siblings(".nse_select-wrapper"),s.length&&n.toggleClass("nse_half-width",!t),n.toggleClass("nse_subscribe",!t).toggleClass("nse_subscribed",t),i=n.attr("data-subscribe-text"),r=n.attr("data-unsubscribe-text"),t?(n.text(r),s.hide()):(n.text(i),s.show(),window.NewsletterSubscriptionsView.checkRemoveLastItemFromMySubscriptions(e),window.NewsletterSubscriptionsView.checkHideRemoveAllButton())):void 0},t.prototype.levelContainerHeights=function(){return $("#nse_newsletter-categories").find(".nse_subscription-list, .nse_subscription-sublist").each(function(){var e;return e=0,$(this).find(".nse_subscription-container-content").each(function(){return $(this).height()>e?e=$(this).height():void 0}),$(this).find(".nse_subscription-container-content").height(e)})},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.CheckboxView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.el=".nse_checkbox",t.prototype.initialize=function(){return jQuery.support.opacity!==!1?this.$el.each(function(){var e,t,n,s;return t=$(this),e=t.next("label"),s="",t.siblings(".nse_checkbox-override").remove(),s=t.prop("checked")?" checked":"",n=$('<div class="nse_checkbox-override'+s+'" id="'+t.attr("id")+'-override"><div class="nse_checkbox-override-selector"></div></div>'),t.after(n).hide(),n.on("click",function(){return n.toggleClass("checked"),t.prop("checked",!t.prop("checked"))}),e.on("click",function(e){return e.preventDefault(),n.trigger("click")})}):void 0},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.CompleteRegistrationView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.initialize=function(){return window.emailAddressView=new window.Expresso.Views.EmailAddressView,window.screenNameView=new window.Expresso.Views.ScreennameView,window.screenNameView.checkName(),this.validateForm()},t.prototype.el=".gigya-screen-dialog #gigya-complete-registration-screen",t.prototype.validateForm=function(){var e;return e=this,this.$el.find(".nse_required").each(function(){return $(this).find("input").val()&&($(this).addClass("valid"),$(this).hasClass("nse_email-wrapper")&&!e.validateEmail($(this).find("input").val()))?($(this).removeClass("valid"),$(this).addClass("invalid")):void 0}),$(this).find(".gigya-error-display").html("Invalid email").show()},t.prototype.validateEmail=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.DetailsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.el="#nse_account-details",t.prototype.screenSet=!1,t.prototype.events={"click .nse_close-block":"closeMessage","click .nse_forgot-password-link":"forgotPassword"},t.prototype.setUpRoute=function(e){var t,n;return n=this,$(".gigya-photo-upload-form").hide(),t===!0?gigya.accounts.switchScreen({screenSet:"Profile-Express-web",screen:"gigya-"+e+"-screen",containerID:"nse_account-details"}):(gigya.accounts.showScreenSet({screenSet:"Profile-Express-web",startScreen:"gigya-"+e+"-screen",containerID:"nse_account-details",onAfterScreenLoad:function(){return n.clearFields(),setTimeout(function(){return window.editFormView=new window.Expresso.Views.EditFormView,n.setUp(e)},100)},onAfterSubmit:function(e){return n.onSuccess(e)}}),t=!0)},t.prototype.setUp=function(e){return"update-profile"===e?setTimeout(function(){return"update-profile"===localStorage.getItem("nse_route")?$(".gigya-photo-upload-form").show():void 0},1e3):void 0},t.prototype.closeMessage=function(e){return e.preventDefault(),this.$el.find(".nse_message").remove()},t.prototype.onSuccess=function(e){return 0===e.response.errorCode?(toastr.success("Your account details have been updated."),this.clearFields(),window.editFormView.updateValues()):toastr.error("There was a problem updating your details, please try again later.")},t.prototype.clearFields=function(){return $(".nse_input-wrapper").removeClass("valid invalid"),$(".nse_email-taken, .nse_check-fields").hide(),$('input[type="password"]').val("")},t.prototype.forgotPassword=function(e){return e.preventDefault(),gigya.accounts.showScreenSet({screenSet:"nse_Login-Expresso-Web",startScreen:"gigya-forgot-password-screen",mobileScreenSet:"nse_Login-Expresso-Web",onAfterScreenLoad:function(){return $("body").find("#blur").length||$("body").prepend("<div id='blur' class='blur' />"),clearTimeout(this.rebindTimer),this.rebindTimer=setTimeout(function(){return window.gigyaFormView=new window.Expresso.Views.GigyaFormView},100)},onHide:function(){return $(".nse_input-wrapper").removeClass("valid invalid"),$(".nse_email-taken, .nse_check-fields").hide(),$("#blur").remove()}})},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.EditFormView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.el=".gigya-profile-form",t.prototype.starSigns={"321-419":"Aries","420-520":"Taurus","521-620":"Gemini","621-722":"Cancer","723-822":"Leo","823-922":"Virgo","923-1022":"Libra","1023-1121":"Scorpio","1122-1221":"Sagittarius","1222-119":"Capricorn","120-218":"Aquarius","219-320":"Pisces"},t.prototype.events={"submit form":"onFormSubmit"},t.prototype.initialize=function(){var e;return this.emailAddressView||(this.emailAddressView=new window.Expresso.Views.EmailAddressView),this.emailAddressView.setInitialValue(this.$el.find("#nse_email").val()),this.screenNameView||(this.screenNameView=new window.Expresso.Views.ScreennameView),this.screenNameView.setInitialValue(this.$el.find("#nse_nickname").val()),this.passwordView||(this.passwordView=new window.Expresso.Views.PasswordView),window.expressoOptions.specialInterest.options.length&&($("#nse_special-interest").append(Mustache.render('{{#.}}<option value="{{value}}" >{{displayText}}</option>{{/.}}',window.expressoOptions.specialInterest.options)),window.expressoUser.specialInterest()&&(e=_.find(window.expressoOptions.specialInterest.options,function(e){return e.value===window.expressoUser.specialInterest()}),e&&$('#nse_special-interest option[value="'+e.value+'"]').attr("selected","selected"))),this.bindValidation(),$("#nse_birthday").val()&&$("#nse_birthday").val().length&&$("#nse_birthmonth").val()&&$("#nse_birthmonth").val().length&&this.getStarSign(),$("#nse_special-interest").val()&&$("#nse_special-interest").val().length&&"default-value"!==$("#nse_special-interest").val()?this.getSpecialInterest():void 0},t.prototype.getStarSign=function(){var e,t,n,s,i,r;return i=this,$("#nse_birthday").val()&&$("#nse_birthday").val().length||$("#nse_birthmonth").val()&&$("#nse_birthmonth").val().length?(n=$("#nse_birthmonth").val(),e=$("#nse_birthday").val(),e.length<2&&(e=0+e),parseInt(n)>0&&parseInt(n)<13&&parseInt(e)>0&&parseInt(e)<32?(t=parseInt(n+e),r=null,_.each(i.starSigns,function(e,n){var s;
return s=n.split("-"),t>=parseInt(s[0])&&t<=parseInt(s[1])?r=e:void 0}),r||(r="Capricorn"),s=new window.Expresso.Models.SimpleNewsletter({keys:r,loggedIn:window.expressoUser.isLoggedIn()}),s.save(null,{success:function(){return i.renderNewsletter(s,"star-sign")}})):!1):void 0},t.prototype.getSpecialInterest=function(){var e,t;return t=this,""!==$("#nse_special-interest").val()&&"Select"!==$("#nse_special-interest").val()?(e=new window.Expresso.Models.SimpleNewsletter({keys:$("#nse_special-interest").val(),loggedIn:window.expressoUser.isLoggedIn()}),e.save(null,{success:function(){return t.renderNewsletter(e,"special-interest")},error:function(){return t.clearNewsletter(e,"special-interest")}})):void 0},t.prototype.renderNewsletter=function(e,t){var n;return n=this,e.get("NewsletterId")?($("#nse_"+t+"-recommendation").html(Mustache.to_html(window.Expresso.Templates.Account.SuggestedNewsletter,e.toJSON())),window.Expresso.subscribeUnsubscribeView=new window.Expresso.Views.SimpleSubscribeUnsubscribeView({model:e,onSubscribe:function(){return n.subscribeSuccess(e,t)},onUnSubscribe:function(){return n.subscribeSuccess(e,t)}})):n.clearNewsletter(e,t)},t.prototype.clearNewsletter=function(e,t){return e.destroy(),$("#nse_"+t+"-recommendation").empty()},t.prototype.subscribeSuccess=function(e,t){var n;return n=$("#nse_"+t+"-recommendation").find("a"),n.hasClass("nse_subscribe")?(n.removeClass("nse_subscribe").addClass("nse_subscribed").html("Unsubscribe"),toastr.success("You have subscribed to "+e.get("Name"))):(n.removeClass("nse_subscribed").addClass("nse_subscribe").html("Subscribe"),toastr.success("You have unsubscribed from "+e.get("Name")))},t.prototype.onFormSubmit=function(e){var t,n;return n=this,t=!1,$(e.currentTarget).find(".gigya-error-msg:not(:empty)").each(function(){return $(this).closest(".nse_input-wrapper").removeClass("valid").addClass("invalid"),$(this).parent().find(".gigya-error-display").length&&$(this).parent().find(".gigya-error-display:empty")&&$(this).parent().hasClass("invalid")&&!$(this).parent().find(".nse_input input").val()&&$(this).parent().find(".gigya-error-display").html("This field is required"),t=!0}),t&&(e.preventDefault(),e.originalEvent.preventDefault(),n.validateForm()),!t},t.prototype.bindValidation=function(){var e;return e=this,e.$el.find(".nse_input-wrapper.nse_required").each(function(){var t;return t=$(this),t.find('input[type!="file"]').off("blur").on("blur",function(){var n;return n=t.find(".gigya-error-display-active").length||t.hasClass("nse_required")&&!$(this).val(),t.toggleClass("valid",!n).toggleClass("invalid",!!n),t.hasClass("nse_required")&&!$(this).val()&&t.find(".gigya-error-display").html("This field is required").show(),e.validateForm()})}),e.$el.find("*[data-nse-type='number']").off("blur").on("blur",function(){return $(this).val()?parseInt($(this).val())?($(this).closest(".nse_input-wrapper").removeClass("invalid").addClass("valid"),$(this).parent().parent().find(".gigya-error-display").html("").hide()):($(this).closest(".nse_input-wrapper").removeClass("valid").addClass("invalid"),$(this).parent().parent().find(".gigya-error-display").html("Invalid number").show()):($(this).closest(".nse_input-wrapper").removeClass("invalid").removeClass("valid"),$(this).parent().parent().find(".gigya-error-display").html("").hide()),e.validateForm()}),e.$el.find("*[data-nse-minlength]").off("blur").on("blur",function(){var t;return t=parseInt($(this).attr("data-nse-minlength")),$(this).val()?$(this).val().length!==t?($(this).closest(".nse_input-wrapper").removeClass("valid").addClass("invalid"),$(this).parent().parent().find(".gigya-error-display").html("Invalid number").show()):($(this).closest(".nse_input-wrapper").removeClass("invalid").addClass("valid"),$(this).parent().parent().find(".gigya-error-display").html("").hide()):($(this).closest(".nse_input-wrapper").removeClass("invalid").removeClass("valid"),$(this).parent().parent().find(".gigya-error-display").html("").hide()),e.validateForm()}),e.$el.find(".nse_validate-phone").off("blur").on("blur",function(){return $(this).val()?e.validatePhone($(this).val())?($(this).closest(".nse_input-wrapper").removeClass("invalid").addClass("valid"),$(this).parent().parent().find(".gigya-error-display").html("").hide()):($(this).closest(".nse_input-wrapper").removeClass("valid").addClass("invalid"),$(this).parent().parent().find(".gigya-error-display").html("Invalid number").show(),e.validateForm()):($(this).closest(".nse_input-wrapper").removeClass("invalid").removeClass("valid"),$(this).parent().parent().find(".gigya-error-display").html("").hide()),e.validateForm()}),e.$el.find(".nse_dob-wrapper").find("#nse_birthday, #nse_birthmonth").off("blur").on("blur",function(){return $("#nse_birthday").val().length&&$("#nse_birthmonth").val().length?e.getStarSign():void 0}),e.$el.find("#nse_special-interest").off("change").on("change",function(){return $("#nse_special-interest").val()&&$("#nse_special-interest").val().length&&"Select"!==$("#nse_special-interest").val()?e.getSpecialInterest():void 0})},t.prototype.validateForm=function(){return this.$el.find(".invalid").length&&this.$el.find(".nse_check-fields").length?(this.$el.find(".nse_check-fields").show(),$("#nse_form-submit").attr("disabled","disabled")):(this.$el.find(".nse_check-fields").hide(),this.$el.find(".gigya-error-msg").html(""),$("#nse_form-submit").removeAttr("disabled"))},t.prototype.updateValues=function(){return this.emailAddressView.setInitialValue(this.$el.find("#nse_email").val()),this.screenNameView.setInitialValue(this.$el.find("#nse_nickname").val())},t.prototype.validatePhone=function(e){return/^[0-9]{11}$/.test(e)},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.EmailAddressView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.initialize=function(){var e;return e=this,this.model=new window.Expresso.Models.Email,this.spinner=new window.Expresso.Views.SpinnerView,this.timer=null,this.model.on("change:Exists",function(){return this.validateEmail()},this),this.model.on("change:emailAddress",function(){return this.validateEmail()},this),this.model.on("request",function(){return e.startRequest(!1,e)},this),this.model.on("sync",function(){return e.stopRequest(!1,e)},this),jQuery.support.opacity===!1?($("#nse_email").on("keyup",function(t){return e.checkEmail(t,e)}),$("#nse_email").on("click",function(t){return e.stopRequest(t,e)})):void 0},t.prototype.el=".nse_email-wrapper",t.prototype.events={"keyup #nse_email":"checkEmail","click #nse_email":"stopRequest"},t.prototype.checkEmail=function(e,t){var n;return null==t&&(t=this),n=t,clearTimeout(t.timer),t.timer=setTimeout(function(){return $(e.target).val()?n.model.check($(e.target).val().toLowerCase()):void 0},500)},t.prototype.validateEmail=function(){var e;return e=this.model.get("Exists"),jQuery.support.opacity===!1?($(".nse_email-wrapper").find(".nse_email-taken").toggle(e).toggleClass("gigya-error-msg",e).toggleClass("gigya-error-display-active",e),$(".nse_email-wrapper").toggleClass("invalid",e).toggleClass("valid",!e)):(this.$el.find(".nse_email-taken").toggle(e).toggleClass("gigya-error-msg",e).toggleClass("gigya-error-display-active",e),this.$el.toggleClass("invalid",e).toggleClass("valid",!e))},t.prototype.startRequest=function(e,t){return null==e&&(e=!1),null==t&&(t=this),jQuery.support.opacity===!1?t.spinner.createSpinner($(".nse_email-wrapper")):this.spinner.createSpinner(this.$el)},t.prototype.stopRequest=function(e,t){return null==e&&(e=!1),null==t&&(t=this),jQuery.support.opacity===!1?t.spinner.killSpinner($(".nse_email-wrapper")):this.spinner.killSpinner(this.$el)},t.prototype.setInitialValue=function(e){return this.model.setInitialValue(e)},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.GigyaFormView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.el=".gigya-screen-dialog",t.prototype.initialize=function(){return this.createBenefitList(),this.registrationView=new window.Expresso.Views.RegistrationView(function(){return this.completeRegistrationView=new window.Expresso.Views.CompleteRegistrationView}),this.passwordView=new window.Expresso.Views.PasswordView,this.checkboxView=new window.Expresso.Views.CheckboxView,this.bindSwitchEvent(),this.bindValidation(),$("form").on("submit",this.onFormSubmit),$(".nse_register-link").on("click",this.register),$(".nse_login-link").on("click",this.signIn)},t.prototype.events={"submit form":"onFormSubmit"},t.prototype.createBenefitList=function(){var e;return e=this,window.expressoOptions.screens.register.benefits.length?$("#nse_benefit-list-container").append(Mustache.render('<ul class="nse_benefit-list">{{#.}}<li class="nse_benefit">{{.}}</li>{{/.}}</ul>',window.expressoOptions.screens.register.benefits)):void 0},t.prototype.showRegNewsletters=function(){return window.expressoUser.get("loggedin")?window.suggestedRegistrationNewslettersView||(window.suggestedRegistrationNewslettersView=new window.Expresso.Views.SuggestedRegistrationNewslettersView):void 0},t.prototype.sentToSettings=function(){return window.currentGigyaAction&&"registering"===window.currentGigyaAction?window.location.replace(window.expressoOptions.preferencesLink+"#/account/settings"):void 0},t.prototype.onFormSubmit=function(e){var t,n;return n=this,t=!1,$(e.currentTarget).find(".gigya-error-msg:not(:empty)").each(function(){return $(this).closest(".nse_input-wrapper").removeClass("valid").addClass("invalid"),$(this).parent().find(".gigya-error-display").length&&$(this).parent().find(".gigya-error-display:empty")&&$(this).parent().hasClass("invalid")&&!$(this).parent().find(".nse_input input").val()&&$(this).parent().find(".gigya-error-display").html("This field is required"),t=!0}),t&&(e.preventDefault(),e.originalEvent.preventDefault(),window.gigyaFormView.validateForm()),!t},t.prototype.bindValidation=function(){var e;return e=this,$(".nse_form").find(".nse_input-wrapper").each(function(){var t;return t=$(this),t.find('input[type!="file"]').off("blur").on("blur",function(n){var s;return s=$(n.target).closest(".nse_input-wrapper").find(".gigya-error-display-active").length||$(n.target).closest(".nse_input-wrapper").hasClass("nse_required")&&!$(n.target).val(),jQuery.support.opacity===!1?$(n.target).closest(".nse_input-wrapper").toggleClass("valid",!s).toggleClass("invalid",!!s):t.toggleClass("valid",!s).toggleClass("invalid",!!s),t.hasClass("nse_required")&&!$(n.target).val()&&t.find(".gigya-error-display").html("This field is required").show(),e.validateForm(),$(n.target).hasClass("nse_validate-email")&&$(n.target).val()?e.validateEmail($(n.target).val())?($(n.target).closest(".nse_input-wrapper").removeClass("invalid").addClass("valid"),$(n.target).parent().parent().find(".gigya-error-display").html("").hide()):($(n.target).closest(".nse_input-wrapper").removeClass("valid").addClass("invalid"),$(n.target).parent().parent().find(".gigya-error-display").html("Invalid email").show(),e.validateForm()):void 0})})},t.prototype.bindSwitchEvent=function(){var e;return e=this,$('a, input[type="submit"]').each(function(){return void 0!==$(this).attr("data-switch-screen")||$(this).hasClass("gigya-input-submit")?$(this).on("mousedown",function(e){return e.preventDefault()}):void 0}),$('input[type="submit"]').each(function(){return $(this).on("click",function(t){return e.$el.find(".nse_input-wrapper input").blur(),e.$el.find(".invalid").length?t.preventDefault():void 0})}),e.validateForm()},t.prototype.validateForm=function(){return $(".nse_form").find(".invalid").length&&$(".nse_form").find(".nse_check-fields").length?$(".nse_form").find(".nse_check-fields").show():($(".nse_form").find(".nse_check-fields").hide(),$(".nse_form").find(".gigya-error-msg").html(""))},t.prototype.validateEmail=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},t.prototype.register=function(){return window.currentGigyaAction="registering"},t.prototype.signIn=function(){return window.currentGigyaAction="loggingin"},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.InstantUnsubscribeView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.el="#nse_unsubscribe-options",t.prototype.initialize=function(){return this.loggedIn=window.expressoUser.isLoggedIn()},t.prototype.events={"click #nse_resubscribe_newsletter":"resubscribeToNewsletter","click #nse_unsubscribe_all":"unsubscribeFromAll","click #nse_resubscribe":"reSavePreference","click .nse_unsubscribe-login-link":"signIn","click .nse_unsubscribe-register-link":"register"},t.prototype.render=function(){return this.$el.append(Mustache.to_html(window.Expresso.Templates.InstantUnsubscribe,{Preferences:window.Expresso.Preferences.toJSON()},window.Expresso.Templates.Subscriptions))},t.prototype.resubscribeToNewsletter=function(e){var t,n;return e.preventDefault(),n=this.getNewsletterId(e.currentTarget),t=window.Expresso.Newsletters.updateSubscriptionStatusByNewsletterId(n,!0),t||(t=window.SpecificUnsubscribeNewsletter),window.accountsView.updateSubscriptionStateInUI(n,!0),window.Expresso.Subscriptions.addSubscription(t,this.getFrequencyOnReSubscribe(e.currentTarget)),window.NewsletterSubscriptionsView.setNewsletterSubscriptionsUI(),toastr.success("You have re-subscribed to "+t.get("Name")),this.finished()},t.prototype.unsubscribeFromAll=function(e){return window.NewsletterSubscriptionsView.removeAllSubscriptions(e),window.accountsView.handleGlobalUnsubscribe(),this.finished()},t.prototype.reSavePreference=function(e){return window.accountsView.savePreference(e),this.finished()},t.prototype.getNewsletterId=function(e){return $(e).attr("data-newsletter-id")},t.prototype.getFrequencyOnReSubscribe=function(e){return $(e).attr("data-frequency")},t.prototype.finished=function(){return window.history.pushState("","","/preferences"),this.remove()},t.prototype.signIn=function(e){return window.widgetView.signIn(e),window.widgetView.tryGigyaLogin()},t.prototype.register=function(e){return window.widgetView.register(e)},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.NewsletterCategoriesView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.el="#nse_newsletter-categories",t.prototype.callback=null,t.prototype.initialize=function(e){var t;return window.Expresso.Categories=new window.Expresso.Collections.Categories,(t=window.Expresso).Newsletters||(t.Newsletters=new window.Expresso.Collections.Newsletters),this.callback=e,this.setUp()},t.prototype.events={"click .nse_newsletter-break .nse_button":"getNewslettersForCategory","click a[data-type='most-popular']":"getNewslettersForCategory"},t.prototype.setUp=function(){var e;return e=this,window.Expresso.Categories.fetch({success:function(){return e.getNewsletterCategories(),e.setUpNewsletters()},error:function(){return!1}})},t.prototype.getNewsletterCategories=function(){var e;return e=this,_.each(window.Expresso.Categories.models,function(t){var n,s,i,r;return r=t.get("WebSafeTitle"),s="most-popular"===r?!0:!1,i=!1,(parseInt(t.get("Count"))>6||"Mobile"===window.expressoOptions.mode&&parseInt(t.get("Count"))>1)&&(i=!0),$(e.el).append(Mustache.to_html(window.Expresso.Templates.Subscriptions.CategoryContainer,{WebSafeCategory:r})),n=$(e.el).find(".nse_category-container."+r),$(n).append(Mustache.to_html(window.Expresso.Templates.Subscriptions.Category,{Category:t.forTemplate(),isMostPopular:s,Full:!i})),"most-popular"===r?$(n).after('<h2 class="nse_content-block-header nse_mobile_extra">Newsletters</h2>'):void 0})},t.prototype.setUpNewsletters=function(){var e;return e=this,window.Expresso.Newsletters.fetch({success:function(){return e.getMostPopularNewsletters(),e.getNewslettersForCategories(),"function"==typeof e.callback?e.callback():void 0},error:function(){return!1}})},t.prototype.getMostPopularNewsletters=function(){return this.$el.find("#nse_list-most-popular").prepend(Mustache.to_html(window.Expresso.Templates.Subscriptions.Newsletters,{Newsletters:window.Expresso.Newsletters.getMostPopular()},window.Expresso.Templates.Subscriptions))},t.prototype.getNewslettersForCategories=function(){var e;return e=this,_.each(window.Expresso.Categories.models,function(t){var n;return n=t.get("WebSafeTitle"),$(e.el).find("#nse_list-"+n).prepend(Mustache.to_html(window.Expresso.Templates.Subscriptions.Newsletters,{Newsletters:window.Expresso.Newsletters.getNewslettersByCategory(n)},window.Expresso.Templates.Subscriptions)),_.each(t.get("SubCategories"),function(t){var n;return n=t.WebSafeTitle,$(e.el).find("#nse_list-"+n).prepend(Mustache.to_html(window.Expresso.Templates.Subscriptions.Newsletters,{Newsletters:window.Expresso.Newsletters.getNewslettersByCategory(n)},window.Expresso.Templates.Subscriptions))})}),setUpShowMore(),setUpAccordians(),mobileCarousel(".nse_slider-prev",".nse_slider-next")},t.prototype.getNewslettersForCategory=function(e){var t;return e.preventDefault(),$(e.currentTarget).hasClass("clicked")?void 0:($(e.currentTarget).addClass("clicked"),t=$(e.currentTarget).attr("data-type"),"most-popular"===t?window.Expresso.Newsletters.fetchByCategory(t,this.renderMostPopularNewsletters,this.el):window.Expresso.Newsletters.fetchByCategory(t,this.renderNewslettersForCategory,this.el))},t.prototype.renderMostPopularNewsletters=function(e,t){var n,s,i;return i=this,n=window.Expresso.Categories.setFullAndGetParentCategoryByWebSafeTitle(e),s=$(t).find(".nse_category-container."+e),n&&s.length?($(s).find(".nse_subscription").remove(),$(t).find("#nse_list-"+e).prepend(Mustache.to_html(window.Expresso.Templates.Subscriptions.Newsletters,{Newsletters:window.Expresso.Newsletters.getMostPopular()},window.Expresso.Templates.Subscriptions)),"Mobile"!==window.expressoOptions.mode&&$(s).find('.nse_newsletter-break[data-more="'+e+'"]').remove(),window.NewsletterCategoriesView.rebindAndUpdateSubscriptionUI(),"Mobile"===window.expressoOptions.mode&&($(s).find(".nse_subscription").show(),resetCarousel(),mobileCarousel(".nse_slider-prev",".nse_slider-next")),window.accountsView.levelContainerHeights()):void 0},t.prototype.renderNewslettersForCategory=function(e,t){var n,s,i,r,o;return r=this,i=window.Expresso.Newsletters.getNewslettersByCategory(e),s=$(t).find(".nse_subscription-list."+e),o=$(t).find(".nse_newsletter-subtitle."+e),s.length?($(s).find('.nse_subscription.nse_newsletter[data-category="'+e+'"]').remove(),$(s).find('.nse_newsletter-break[data-category="'+e+'"]').remove(),"Mobile"!==window.expressoOptions.mode&&$(s).find('.nse_newsletter-break[data-more="'+e+'"]').remove(),n=$(s).prepend(Mustache.to_html(window.Expresso.Templates.Subscriptions.Newsletters,{Newsletters:[i.shift()]},window.Expresso.Templates.Subscriptions)).find(":first"),n.after(Mustache.to_html(window.Expresso.Templates.Subscriptions.Newsletters,{Newsletters:i},window.Expresso.Templates.Subscriptions))):o.length&&($(o).nextAll("ul").find('.nse_subscription.nse_newsletter[data-category="'+e+'"]').remove(),$(o).nextAll("ul").find('.nse_newsletter-break[data-category="'+e+'"]').remove(),"Mobile"!==window.expressoOptions.mode&&$(o).nextAll("ul").find('.nse_newsletter-break[data-more="'+e+'"]').remove(),$(o).nextAll("ul").prepend(Mustache.to_html(window.Expresso.Templates.Subscriptions.Newsletters,{Newsletters:i},window.Expresso.Templates.Subscriptions))),"Mobile"===window.expressoOptions.mode&&(s.length?$(s).find('.nse_subscription.nse_newsletter[data-category="'+e+'"]').show():o.length&&$(o).nextAll("ul").find('.nse_subscription.nse_newsletter[data-category="'+e+'"]').show()),s.length||o.length?(window.NewsletterCategoriesView.rebindAndUpdateSubscriptionUI(),window.accountsView.levelContainerHeights()):void 0},t.prototype.rebindAndUpdateSubscriptionUI=function(){return window.SubscribeUnsubscribeView.unbind(),window.SubscribeUnsubscribeView.undelegateEvents(),window.SubscribeUnsubscribeView=new window.Expresso.Views.SubscribeUnsubscribeView,window.SubscribeUnsubscribeView.updateAllSubscriptionStateInUI()},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.NewsletterSubscriptionsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.el="#nse_subscriptions-container",t.prototype.initialize=function(e){var t;return t=this,window.Expresso.Subscriptions=new window.Expresso.Collections.Subscriptions,window.accountsView||(window.accountsView=new window.Expresso.Views.AccountView),this.callback=e,this.spinner||(this.spinner=new window.Expresso.Views.SpinnerView),window.expressoUser.isLoggedIn()?(this.toggleButtons(!1),window.Expresso.Subscriptions.on("request",this.startRequest,this),window.Expresso.Subscriptions.on("sync",function(e){return e.length>=parseInt(localStorage.getItem("subcriptionCount"),10)||"1"===localStorage.getItem("isRegistration")||null===localStorage.getItem("subcriptionCount")||!e.length?(this.stopRequest(),"0"===localStorage.getItem("isRegistration")&&localStorage.setItem("subcriptionCount",String(0)),this.toggleButtons(!0)):setTimeout(function(){return t.setUp()},500)},this),this.setUp()):(this.stopRequest(),this.$el.empty().append(Mustache.to_html(window.Expresso.Templates.Subscriptions.NotLoggedInSubscriptions)),"function"==typeof this.callback&&this.callback()),this.accountsView=window.accountsView,this.accountsView.bind("prefsUpdated",this.setNewsletterSubscriptionsUI,this)},t.prototype.events={"click .nse_remove-item":"removeSubscription","click #nse_remove-all":"openConfirmRemoveAllSubscriptions"},t.prototype.toggleButtons=function(e){var t,n;return n=this,t=$("#nse_newsletter-categories").find(".nse_button"),t.each(e===!1?function(){return $(this).addClass("nse_disabled-button").on("click",n.killClick)}:function(){return $(this).removeClass("nse_disabled-button").off("click",n.killClick)})},t.prototype.killClick=function(e){return e.preventDefault(),!1},t.prototype.setUp=function(){var e;return e=this,window.Expresso.Newsletters?window.Expresso.Subscriptions.fetch({success:function(){return e.setNewsletterSubscriptionsUI(),"function"==typeof e.callback?e.callback():void 0},error:function(){return"function"==typeof e.callback?e.callback():void 0}}):this.stopRequest()},t.prototype.setNewsletterSubscriptionsUI=function(){var e,t,n;if(t=this,n=[],e=!window.Expresso.Preferences.readOptIn("brandOptIn"),_.each(window.Expresso.Subscriptions.models,function(t){var n,s;return s=t.get("NewsletterId"),e?void window.accountsView.updateSubscriptionStateInUI(s,!1):(n=window.Expresso.Newsletters.updateSubscriptionStatusByNewsletterId(s,!0),n&&window.accountsView?window.accountsView.updateSubscriptionStateInUI(s,!0):void 0)}),!e){if(!window.Expresso.Subscriptions.models.length)return t.$el.empty().append(Mustache.to_html(window.Expresso.Templates.Subscriptions.NoSubscriptions));if(window.Expresso.Subscriptions.models.length>=parseInt(localStorage.getItem("subcriptionCount"),10)||"1"===localStorage.getItem("isRegistration"))return window.Expresso.Subscriptions.models[0].get("UserId")?(t.$el.html(Mustache.to_html(window.Expresso.Templates.Subscriptions.SubscriptionList)),t.$el.find(".nse_subscription-list").prepend(Mustache.to_html(window.Expresso.Templates.Subscriptions.Subscription,{Subscriptions:window.Expresso.Subscriptions.forTemplate()}))):t.$el.empty().append(Mustache.to_html(window.Expresso.Templates.Subscriptions.NotLoggedInSubscriptions))}},t.prototype.removeSubscription=function(e){var t,n;return e.preventDefault(),n=this.getNewsletterId(e.currentTarget),t=window.Expresso.Newsletters.updateSubscriptionStatusByNewsletterId(n,!1),window.accountsView&&window.accountsView.updateSubscriptionStateInUI(n,!1),window.Expresso.Subscriptions.removeByNewsletterId(n),this.setNewsletterSubscriptionsUI(),toastr.success("You have unsubscribed from "+t.get("Name"))},t.prototype.openConfirmRemoveAllSubscriptions=function(e){var t;return e.preventDefault(),t=confirm("Are you sure you want to remove all of your newsletters?"),t?this.removeAllSubscriptions():void 0},t.prototype.removeAllSubscriptions=function(){return window.Expresso.Newsletters.unsubscribeFromAllNewsletters(),this.clearAllSubscriptionsInUI(),window.Expresso.Subscriptions.reset(),window.Expresso.Subscriptions.removeAll(),this.setNewsletterSubscriptionsUI(),toastr.success("You have unsubscribed from all newsletters")},t.prototype.getNewsletterId=function(e){return $(e).attr("data-newsletter-id")},t.prototype.clearAllSubscriptionsInUI=function(){return _.each(window.Expresso.Subscriptions.models,function(e){return window.accountsView?window.accountsView.updateSubscriptionStateInUI(e.get("NewsletterId"),!1):void 0}),this.$el.find("#nse_remove-all-parent").remove()},t.prototype.checkRemoveLastItemFromMySubscriptions=function(e){return _.each(this.$el.find(".nse_subscription"),function(t){return $(t).attr("data-newsletter-id")===e?$(t).remove():void 0})},t.prototype.checkHideRemoveAllButton=function(){return this.$el.find(".nse_subscription").length?void 0:this.$el.find("#nse_remove-all-parent").remove()},t.prototype.startRequest=function(){return this.spinner.createCustomSpinner(this.$el,".nse_loading",window.expressoOptions.customSpinners.lines,window.expressoOptions.customSpinners.length,window.expressoOptions.customSpinners.width,window.expressoOptions.customSpinners.radius)},t.prototype.stopRequest=function(){return this.spinner.killCustomSpinner(this.$el,".nse_loading"),this.$el.find(".nse_loading").remove()},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.PasswordView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.initialize=function(){return this.bindShowHide()},t.prototype.el=".nse_input-show",t.prototype.bindShowHide=function(){return this.$el.each(function(){var e;return e=$(this),e.on("click",function(e){return"text"===$(e.target).next().prop("type")?($(e.target).next().prop("type","password"),$(e.target).html("show")):($(e.target).next().prop("type","text"),$(e.target).html("hide"))})})},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.ResetPasswordView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.el="#nse_reset-password-form",t.prototype.initialize=function(e){return this.pwdtoken=e.pwrt,this.passwordView||(this.passwordView=new window.Expresso.Views.PasswordView),this.bindValidation()},t.prototype.events={"click #nse_form-submit":"onFormSubmit","keyup #nse_reenter-new-password":"validateAndSubmit"},t.prototype.onFormSubmit=function(e){var t,n;return n=this,t=!1,$(e.currentTarget).closest(".nse_form").find(".gigya-error-msg:not(:empty)").each(function(){return $(this).closest(".nse_input-wrapper").removeClass("valid").addClass("invalid"),$(this).parent().find(".gigya-error-display").length&&$(this).parent().find(".gigya-error-display:empty")&&$(this).parent().hasClass("invalid")&&!$(this).parent().find(".nse_input input").val()&&$(this).parent().find(".gigya-error-display").html("This field is required"),t=!0}),t?(e.preventDefault(),e.originalEvent&&e.originalEvent.preventDefault(),n.validateForm()):n.resetPassword($("#nse_new-password").val())},t.prototype.bindValidation=function(){var e;return e=this,e.$el.find(".nse_input-wrapper.nse_required").each(function(){var t;return t=$(this),t.find("input").off("blur").on("blur",function(){var n;return n=t.find(".gigya-error-display-active").length||t.hasClass("nse_required")&&!$(this).val(),t.toggleClass("valid",!n).toggleClass("invalid",!!n),t.hasClass("nse_required")&&!$(this).val()&&t.find(".gigya-error-display").html("This field is required").show(),e.validateForm(),$(this).hasClass("nse_validate-password-length")&&$(this).val()&&e.validatePasswordLength(t),$(this).hasClass("nse_validate-password-matches")&&$(this).val()?e.validatePasswordMatches(t):void 0})})},t.prototype.validatePasswordMatches=function(e){return""!==$("#nse_new-password").val()&&$("#nse_new-password").val()!==$("#nse_reenter-new-password").val()?(e.removeClass("valid").addClass("invalid"),e.find(".gigya-error-display").html("Passwords must match").show(),this.validateForm()):void 0},t.prototype.validatePasswordLength=function(e){var t;return t=e.find(".nse_validate-password-length"),t.val()?t.val().length>5?(e.removeClass("invalid").addClass("valid"),e.find(".gigya-error-display").html("").show(),this.validateForm()):(e.removeClass("valid").addClass("invalid"),e.find(".gigya-error-display").html("Password must be at least 6 characters").show(),this.validateForm()):void 0},t.prototype.validateForm=function(){return this.$el.find(".invalid").length&&this.$el.find(".nse_check-fields").length?(this.$el.find(".nse_check-fields").show(),$("nse_form-submit").attr("disabled","disabled")):(this.$el.find(".nse_check-fields").hide(),this.$el.find(".gigya-error-msg").html(""),$("nse_form-submit").removeAttr("disabled"))},t.prototype.validateAndSubmit=function(e){return 13===e.which?($("input#nse_reenter-new-password").trigger("blur"),$("#nse_form-submit").trigger("click")):void 0},t.prototype.resetPassword=function(e){return gigya.accounts.resetPassword({passwordResetToken:this.pwdtoken,newPassword:e,callback:this.resetPasswordCallback})},t.prototype.resetPasswordCallback=function(e){return"400006"===e.errorCode?gigya.accounts.showScreenSet({screenSet:"nse_Login-Expresso-Web",startScreen:"gigya-forgot-password-screen",mobileScreenSet:"gigya-forgot-password-screen",onAfterScreenLoad:function(){return $("body").find("#blur").length||$("body").prepend("<div id='blur' class='blur' />"),$("#nse_forgot-password-intro-text").text("The password reset link has expired please enter your email address again and press submit to reset your password."),clearTimeout(this.rebindTimer),this.rebindTimer=setTimeout(function(){return window.gigyaFormView=new window.Expresso.Views.GigyaFormView},100)},onHide:function(){return $(".nse_input-wrapper").removeClass("valid invalid"),$(".nse_email-taken, .nse_check-fields").hide(),$("#blur").remove()}}):window.location.replace("/")},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.ScreennameView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.nameTimer=null,t.prototype.screenNameTimer=null,t.prototype.initialize=function(){var e;
return e=this,this.screenName=new window.Expresso.Models.ScreenName,this.spinner=new window.Expresso.Views.SpinnerView,this.screenName.on("change:Exists",this.updateScreenname,this),this.firstLastNameSuggestion=new window.Expresso.Models.FirstLastNameSuggestion,this.firstLastNameSuggestion.on("change:SuggestedScreenName",function(){return this.updateSuggestion()},this),this.firstLastNameSuggestion.on("request",function(){return e.startRequest(e)},this),this.firstLastNameSuggestion.on("sync",function(){return e.stopRequest(!1,e)},this),jQuery.support.opacity===!1?($("#nse_firstname").on("keyup",function(t){return e.checkName(t,e)}),$("#nse_lastname").on("keyup",function(t){return e.checkName(t,e)}),$("#nse_nickname").on("keyup",function(t){return e.checkNickname(t,e)}),$("#nse_nickname").on("click",function(t){return e.stopRequest(t,e)})):void 0},t.prototype.el=".nse_screenname-wrapper",t.prototype.events={"keyup #nse_firstname":"checkName","keyup #nse_lastname":"checkName","keyup #nse_nickname":"checkNickname","click #nse_nickname":"stopRequest"},t.prototype.getFirstnameVal=function(){return jQuery.support.opacity===!1?$(".nse_screenname-wrapper").find("#nse_firstname").val():this.$el.find("#nse_firstname").val()},t.prototype.getFirstname=function(){return jQuery.support.opacity===!1?$(".nse_screenname-wrapper").find("#nse_firstname"):this.$el.find("#nse_firstname")},t.prototype.getSurname=function(){return jQuery.support.opacity===!1?$(".nse_screenname-wrapper").find("#nse_lastname"):this.$el.find("#nse_lastname")},t.prototype.getSurnameVal=function(){return jQuery.support.opacity===!1?$(".nse_screenname-wrapper").find("#nse_lastname").val():this.$el.find("#nse_lastname").val()},t.prototype.getScreenname=function(){return jQuery.support.opacity===!1?$(".nse_screenname-wrapper").find("#nse_nickname"):this.$el.find("#nse_nickname")},t.prototype.getScreennameVal=function(){return jQuery.support.opacity===!1?$(".nse_screenname-wrapper").find("#nse_nickname").val():this.$el.find("#nse_nickname").val()},t.prototype.checkNickname=function(e,t){var n,s;return null==t&&(t=this),0===t.getScreennameVal().length?(n=t.getScreenname().closest(".nse_input-wrapper"),n.find(".nse_screenname-exists").removeClass("gigya-error-display-active").empty().hide()):(clearTimeout(t.screenNameTimer),s=t,t.screenNameTimer=setTimeout(function(){return s.screenName.unset("Exists",{silent:!0}),s.screenName.check(s.getScreenname().val())},750))},t.prototype.performNameCheck=function(){var e;return clearTimeout(this.nameTimer),e=this,this.nameTimer=setTimeout(function(){return e.firstLastNameSuggestion.check(e.getFirstnameVal(),e.getSurnameVal())},750)},t.prototype.canCheckName=function(){return!(this.getScreenname().val()||!this.getSurnameVal()||!this.getFirstnameVal())},t.prototype.checkName=function(e,t){var n,s;return null==t&&(t=this),s=t.getSurnameVal(),n=t.getFirstnameVal(),t.getSurname().closest(".nse_input-wrapper").toggleClass("valid",!!s),t.getFirstname().closest(".nse_input-wrapper").toggleClass("valid",!!n),t.canCheckName()?t.performNameCheck():void 0},t.prototype.updateSuggestion=function(){var e;return $(this.screenName.el).toggleClass("valid",!0).toggleClass("invalid",!1),this.getScreenname().val(this.firstLastNameSuggestion.get("SuggestedScreenName")),e=this.getScreenname().closest(".nse_input-wrapper"),e.toggleClass("valid",!0).toggleClass("invalid",!1),e.find(".nse_screenname-exists").removeClass("gigya-error-display-active").empty().hide(),e.find(".gigya-error-display").removeClass("gigya-error-display-active").empty().hide()},t.prototype.updateScreenname=function(){var e;return e=this.getScreenname().closest(".nse_input-wrapper"),e.toggleClass("valid",!this.screenName.get("Exists")).toggleClass("invalid",this.screenName.get("Exists")),this.screenName.get("Exists")?(e.find(".gigya-error-display").removeClass("gigya-error-display-active").empty().hide(),e.find(".nse_screenname-exists").addClass("gigya-error-display-active").html("This username is already in use").show()):e.find(".nse_screenname-exists").removeClass("gigya-error-display-active").empty().hide()},t.prototype.startRequest=function(e){return null==e&&(e=this),jQuery.support.opacity===!1?e.spinner.createSpinner($(".nse_screenname-wrapper").find(".nse_screenname-input-wrapper")):this.spinner.createSpinner(this.$el.find(".nse_screenname-input-wrapper"))},t.prototype.stopRequest=function(e,t){return null==e&&(e=!1),null==t&&(t=this),jQuery.support.opacity===!1?t.spinner.killSpinner($(".nse_screenname-wrapper").find(".nse_screenname-input-wrapper")):this.spinner.killSpinner(this.$el.find(".nse_screenname-input-wrapper"))},t.prototype.setInitialValue=function(e){return this.screenName.setInitialValue(e)},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.SimpleSubscribeUnsubscribeView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.el=".nse_subscription-container",t.prototype.events={"click .nse_subscribe":"subscribeToNewsletter","click .nse_subscribed":"unsubscribeFromNewsletter"},t.prototype.initialize=function(e){return this.options=e,this.subscription=new window.Expresso.Models.Subscription(this.model),this.model.on("change:Subscribed",this.updateSubscription,this)},t.prototype.updateSubscription=function(){var e,t,n;return t=this,n=this.model.get("Subscribed"),this.subscription.isNew=function(){return n},e=n?this.subscription.defaultUrl():this.subscription.defaultUrl()+"/"+this.model.get("NewsletterId")+"/"+this.model.get("Frequency"),this.subscription.url=function(){return e},n?this.subscription.save(null,{success:t.options.onSubscribe}):this.subscription.destroy({success:t.options.onUnSubscribe})},t.prototype.subscribeToNewsletter=function(e){return e.preventDefault(),this.model.set("Subscribed",!0)},t.prototype.unsubscribeFromNewsletter=function(e){return e.preventDefault(),this.model.set("Subscribed",!1)},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.SpinnerView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.createSpinner=function(e){return $(e).addClass("nse_pending").find(".nse_input").spin({lines:8,length:4,width:3,radius:5,className:"nse_spinner"})},t.prototype.killSpinner=function(e){return $(e).removeClass("nse_pending").find(".nse_input").spin(!1)},t.prototype.createCustomSpinner=function(e,t,n,s,i,r){return $(e).addClass("nse_pending").find(t).spin({lines:n,length:s,width:i,radius:r,className:"nse_spinner"})},t.prototype.killCustomSpinner=function(e,t){return $(e).removeClass("nse_pending").find(t).spin(!1)},t.prototype.createBasicSpinner=function(e,t,n){return null==t&&(t=""),null==n&&(n="#000"),$(e).addClass(t).spin({lines:8,length:4,width:3,radius:5,color:n,className:"nse_spinner"})},t.prototype.killBasicSpinner=function(e,t){return null==t&&(t=""),$(e).removeClass(t).spin(!1)},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.SubscribeUnsubscribeView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.el=".nse_subscription-container",t.prototype.callback=null,t.prototype.initialize=function(e){return this.callback=e,"function"==typeof this.callback?this.callback():void 0},t.prototype.events={"click .nse_subscribe":"subscribeToNewsletter","click .nse_subscribed":"unsubscribeFromNewsletter"},t.prototype.subscribeToNewsletter=function(e){var t,n,s;return e.preventDefault(),window.expressoUser.isLoggedIn()?(s=window.Expresso.Preferences&&window.Expresso.Preferences.readOptIn("brandOptIn"),s?(n=this.getNewsletterId(e.currentTarget),t=window.Expresso.Newsletters.updateSubscriptionStatusByNewsletterId(n,!0),window.accountsView.updateSubscriptionStateInUI(n,!0),window.Expresso.Subscriptions.addSubscription(t,this.getFrequencyOnSubscribe(e.currentTarget,t)),window.NewsletterSubscriptionsView.setNewsletterSubscriptionsUI(),toastr.success("You have subscribed to "+t.get("Name"))):window.accountsView.promptToOptIn()):void 0},t.prototype.unsubscribeFromNewsletter=function(e){var t,n;return e.preventDefault(),window.expressoUser.isLoggedIn()?(n=this.getNewsletterId(e.currentTarget),t=window.Expresso.Newsletters.updateSubscriptionStatusByNewsletterId(n,!1),window.accountsView.updateSubscriptionStateInUI(n,!1),window.Expresso.Subscriptions.removeByNewsletterId(n),window.NewsletterSubscriptionsView.setNewsletterSubscriptionsUI(),toastr.success("You have unsubscribed from "+t.get("Name"))):void 0},t.prototype.getNewsletterId=function(e){return $(e).attr("data-newsletter-id")},t.prototype.getFrequencyOnSubscribe=function(e,t){var n,s;return s=$(e).siblings(".nse_select-wrapper").find(".nse_frequency-select option:selected").text(),s||(n=t.get("FrequencyChoices"),s=n.length?t.get("FrequencyChoices")[0].Frequency:"Unknown"),s},t.prototype.updateAllSubscriptionStateInUI=function(){var e;return e=this,_.each(window.Expresso.Subscriptions.models,function(e){var t;return t=e.get("NewsletterId"),window.Expresso.Newsletters.updateSubscriptionStatusByNewsletterId(t,!0),window.accountsView.updateSubscriptionStateInUI(t,!0)})},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.SuggestedRegistrationNewslettersView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.el="#nse_suggested-registration-newsletters",t.prototype.MAX_SUBSCRIBED_ITEMS_TO_SHOW=3,t.prototype.MAX_AVAILABLE_ITEMS_TO_SHOW=3,t.prototype.allMostPopular=[],t.prototype.availableToSubscribe=function(){var e;return e=this,_.reject(e.allMostPopular,function(t){return _.contains(e.subscribedIds(),t.NewsletterId)})},t.prototype.subscribed=function(){return _.filter(window.Expresso.Subscriptions.forTemplate(),function(e){return!!e.NewsletterId})},t.prototype.subscribedIds=function(){return _.map(this.subscribed(),function(e){return e.NewsletterId})},t.prototype.filteredAvailableToSubscribe=function(){var e;return e=this.availableToSubscribe().length>=this.MAX_AVAILABLE_ITEMS_TO_SHOW?this.MAX_AVAILABLE_ITEMS_TO_SHOW:this.availableToSubscribe().length,this.availableToSubscribe().slice(0,e)},t.prototype.filteredSubscribed=function(){var e;return e=this.subscribed().length>=this.MAX_SUBSCRIBED_ITEMS_TO_SHOW?this.MAX_SUBSCRIBED_ITEMS_TO_SHOW:this.subscribed().length,this.subscribed().slice(0,e)},t.prototype.initialize=function(){var e,t;return t=this,window.scrollTo(0,0),window.subcriptionCount=0,localStorage.setItem("isRegistration","1"),window.NewsletterSubscriptionsView=new window.Expresso.Views.NewsletterSubscriptionsView(function(){return window.SubscribeUnsubscribeView=new window.Expresso.Views.SubscribeUnsubscribeView}),this.spinner=new window.Expresso.Views.SpinnerView,this.spinner.createCustomSpinner(this.el,".nse_loading",window.expressoOptions.customSpinners.lines,window.expressoOptions.customSpinners.length,window.expressoOptions.customSpinners.width,window.expressoOptions.customSpinners.radius),(e=window.Expresso).Newsletters||(e.Newsletters=new window.Expresso.Collections.Newsletters),window.Expresso.Newsletters.fetch({success:function(){return window.Expresso.Newsletters.getMostPopular(function(e){return t.allMostPopular=_.filter(e,function(e){return!!e.NewsletterId})}),t.setNewsletterSubscriptionsInDialog(),t.spinner.killCustomSpinner(t.el,".nse_loading")},error:function(){return toastr.error("An error occured loading newsletters")}})},t.prototype.setNewsletterSubscriptionsInDialog=function(){var e,t,n,s,i,r,o;return s=this,s.$el?(s.$el.empty(),this.subscribed()&&this.subscribed().length>0?(o="You have signed up to",e="Why not sign up to one of our other popular newsletters?",r=!0):(o=void 0,e="Sign up to one of our popular newsletters?"),t=-(this.MAX_SUBSCRIBED_ITEMS_TO_SHOW-this.subscribed().length),t>0&&(i=!0,n="and "+t+" more."),r&&s.$el.prepend(Mustache.to_html(window.Expresso.Templates.RegistrationDialog.SubscribedNewsletter,{Newsletters:this.filteredSubscribed(),SectionTitle:o,ShowHiddenSubscriptionsText:i,HiddenSubscriptionsText:n})),this.availableToSubscribe().length>0&&s.$el.append(Mustache.to_html(window.Expresso.Templates.RegistrationDialog.SuggestedNewsletters,{Newsletters:this.filteredAvailableToSubscribe(),SectionTitle:e})),mobileCarousel(".nse_slider-prev",".nse_slider-next")):void 0},t.prototype.subscribe=function(e){var t,n;return e.preventDefault(),localStorage.setItem("subcriptionCount",String(++window.subcriptionCount)),n=this.getNewsletterId(e.currentTarget),t=window.Expresso.Newsletters.updateSubscriptionStatusByNewsletterId(n,!0),window.Expresso.Subscriptions.addSubscription(t,this.getFrequencyOnSubscribe(e.currentTarget,t)),window.NewsletterSubscriptionsView.setNewsletterSubscriptionsUI(),this.setNewsletterSubscriptionsInDialog()},t.prototype.remove=function(e){var t,n;return e.preventDefault(),localStorage.setItem("subcriptionCount",String(--window.subcriptionCount)),n=this.getNewsletterId(e.currentTarget),t=window.Expresso.Newsletters.updateSubscriptionStatusByNewsletterId(n,!0),window.Expresso.Subscriptions.removeByNewsletterId(n),window.NewsletterSubscriptionsView.setNewsletterSubscriptionsUI(),this.setNewsletterSubscriptionsInDialog()},t.prototype.getNewsletterId=function(e){return $(e).attr("data-newsletter-id")},t.prototype.getFrequencyOnSubscribe=function(e,t){var n,s;return s=$(e).siblings(".nse_select-wrapper").find(".nse_frequency-select option:selected").text(),s||(n=t.get("FrequencyChoices"),s=n.length?t.get("FrequencyChoices")[0].Frequency:"Unknown"),s},t.prototype.events={"click #nse_dialog-subscribe":"subscribe","click .nse_remove-subscription-from-dialog":"remove"},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.WelcomeMessageView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.el="#nse_welcome-message",t.prototype.initialize=function(){return this.getData()},t.prototype.events={"click #nse_close-welcome-message":"closeMessage"},t.prototype.getData=function(){var e;return e=this,gigya?gigya.accounts.getAccountInfo({callback:function(t){return e.showWelcomeMessage(t)}}):void 0},t.prototype.showWelcomeMessage=function(e){return e.data&&!e.data.hideWelcomeMessage&&(this.$el.html(Mustache.to_html(window.Expresso.Templates.WelcomeMessage,{Message:window.expressoOptions.screens.preferencecentre.welcomeMessage,Name:e.profile.firstName})),"1"!==localStorage.getItem("isRegistration"))?gigya.accounts.setAccountInfo({data:{hideWelcomeMessage:!0}}):void 0},t.prototype.closeMessage=function(e){return e.preventDefault(),this.$el.html("")},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.WidgetView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return extend(t,e),t.prototype.el="#nse-widget",t.prototype.rebindTimer=null,t.prototype.lotameClientId=null,t.prototype.lotameThirdPartyId=null,t.prototype.initialize=function(){return window.expressoUser=new window.Expresso.Models.LoggedInUser,window.expressoUser.on("change:userId",this.setUserMatch,this),window.expressoUser.addLoginEvent(function(){return window.widgetView.setLotameIdForUrl(),window.expressoUser.attributes.unity_id?widgetView.lotameClientId&&widgetView.lotameThirdPartyId?widgetView.lotameImagePixel():void 0:$.post(window.expressoOptions.apiUrl+"/notify/loggedin",window.expressoUser.attributes).done(function(e){return window.expressoUser.attributes.unity_id=e.unity_id,widgetView.lotameClientId&&widgetView.lotameThirdPartyId?widgetView.lotameImagePixel():void 0})}),this.guest=this.$el.find(".nse_guest"),this.knownUser=this.$el.find(".nse_known-user")},t.prototype.lotameImagePixel=function(){return $(window.widgetView.knownUser.selector).append('<img src="//bcp.crwdcntrl.net/map/c='+widgetView.lotameClientId+"/tp="+widgetView.lotameThirdPartyId+"/tpid="+window.expressoUser.attributes.unity_id+'" style="display:none;" onload="window.widgetView.lotame()">'),window.widgetView.setUserDataLayer()},t.prototype.setLotameIdForUrl=function(){return"OK"===window.expressoOptions.brand?(widgetView.lotameClientId=10144,widgetView.lotameThirdPartyId="OKEM"):"DX"===window.expressoOptions.brand?(widgetView.lotameClientId=10145,widgetView.lotameThirdPartyId="DEEM"):"DS"===window.expressoOptions.brand?(widgetView.lotameClientId=10146,widgetView.lotameThirdPartyId="DSEM"):void 0},t.prototype.bindGigyaEvents=function(){return gigya&&gigya.socialize.addEventHandlers({onLogin:window.widgetView.notifyLogin,onLogout:window.widgetView.notifyLogout}),this},t.prototype.dispatchFakeEvent=function(e,t,n){var s;return n=null!=(s=!n)?s:{"false":!0},1===e.nodeType&&e[t]>=0&&e[t]++,n&&e!==document?this.dispatchFakeEvent(e.parentNode,t,n):void 0},t.prototype.dispatchUserEstablishedEvent=function(){var e;return e=null,document.createEvent&&(e=document.createEvent("HTMLEvents"),e.initEvent("user_established",!0,!0),e.eventName="user_established"),document.createEvent?document.dispatchEvent(e):this.dispatchFakeEvent(document.documentElement,"user_established",!0)},t.prototype.tryGigyaLogin=function(){var e,t;return t=this,e=function(e){var n,s,i;return i=function(e){return t.renderAccounts(e)},0===e.errorCode?(n=function(){return window.widgetView.showLoggedInUi(),i(!0),t.dispatchUserEstablishedEvent()},s=function(){return t.showLoggedOutUi(),i(!1),window.expressoUser.addLoginEvent(function(){return window.location.pathname.indexOf(window.expressoOptions.preferencesLink)>-1?window.widgetView.reloadPageUnlessJustRegistered.apply(window.widgetView):void 0}),t.dispatchUserEstablishedEvent()},window.expressoUser.setAccountInfo(e),window.isSafari&&window.expressoUser.set("loggedin",!0),window.expressoUser.verifyAuthenticated(e,n,s)):(t.showLoggedOutUi(),i(!1),window.expressoUser.addLoginEvent(function(){return window.location.pathname.indexOf(window.expressoOptions.preferencesLink)>-1?window.widgetView.reloadPageUnlessJustRegistered.apply(window.widgetView):void 0}),t.dispatchUserEstablishedEvent())},gigya.accounts.getAccountInfo({callback:e})},t.prototype.events={"click .nse_login-link":"signIn","click .nse_register-link":"register","click .nse_logout-link":"logout"},t.prototype.renderAccounts=function(e){var t;return $("#nse_account").length?(t=window.expressoOptions,t.isLoggedIn=e,t.mode=window.expressoOptions.mode,t.defaultAvatar=Expresso.util.assetUrl(window.expressoOptions.defaultAvatar),$("#nse_account").html(Mustache.to_html(window.Expresso.Templates.Account.UI,t)),window.detailsView=new window.Expresso.Views.DetailsView,window.accountsView=new window.Expresso.Views.AccountView):void 0},t.prototype.showLoggedInUi=function(){return window.widgetView.guest.fadeOut(300,function(){return window.widgetView.knownUser.fadeIn()})},t.prototype.showLoggedOutUi=function(){return window.widgetView.knownUser.fadeOut(300,function(){return window.widgetView.guest.fadeIn()})},t.prototype.notifyLogin=function(e){var t;return t=function(){var t,n;return n=e.user.loginProvider,t={call_type:"event",events:{category:"Login",action:"Login Successful",event:"login_successful"},user:{id:window.expressoUser.attributes.unity_id,login_platform:"googleplus"===n?"Google":n[0].toUpperCase()+n.slice(1)}},"Site"===t.user.login_platform&&(t.user.login_platform="Email"),(window.utag_add_event||function(){})(t)},e.newUser&&(window.expressoUser.attributes.newUser=!0),window.expressoUser.logIn(e,function(){return window.widgetView.showLoggedInUi(),e.newUser?void 0:t()})},t.prototype.lotame=function(){return $(window.widgetView.knownUser.selector).append('<script src="//ad.crwdcntrl.net/5/c=7001/pe=y/callback=window.widgetView.lotameCb">')},t.prototype.lotameCb=function(e){var t;return t=new Date,$.post(window.expressoOptions.apiUrl+"/api/user/data",{lotameId:e.Profile.tpid,unityId:window.expressoUser.attributes.unity_id,hour:t.getHours(),minute:t.getMinutes(),brand:window.expressoOptions.brand})},t.prototype.setUserDataLayer=function(){var e;return e=function(e){var t,n,s,i,r;if(window.utag_data||(window.utag_data={}),i={id:window.expressoUser.attributes.unity_id,twitter_id:"",facebook_id:"",google_id:"",returning:!0,login_state:"Logged In"},e.user.identities.twitter&&(i.twitter_id=e.user.identities.twitter.providerUID),e.user.identities.facebook&&(i.facebook_id=e.user.identities.facebook.providerUID),e.user.identities.googleplus&&(i.google_id=e.user.identities.googleplus.providerUID),window.expressoUser.attributes.newUser&&(n={call_type:"event",events:{category:"Registration",action:"Registration Successful",event:"registration_successful"},user:i},(window.utag_add_event||function(){})(n),window.expressoUser.attributes.newUser=!1,window.currentGigyaAction&&"registering"===window.currentGigyaAction&&window.location.replace(window.expressoOptions.preferencesLink+"#/account/settings")),window.utag_data.user){s=[];for(t in i)r=i[t],s.push(window.utag_data.user[t]=i[t]);return s}return window.utag_data.user=i},gigya.socialize.getUserInfo({UID:window.expressoUser.attributes.userId,callback:e})},t.prototype.notifyLogout=function(){return window.expressoUser.logOut(),window.widgetView.showLoggedOutUi()},t.prototype.onHide=function(){return $(".nse_input-wrapper").removeClass("valid invalid"),$(".nse_email-taken, .nse_check-fields").hide(),$("#blur").remove()},t.prototype.bindForm=function(){return $("body").find("#blur").length||$("body").prepend("<div id='blur' class='blur' />"),clearTimeout(this.rebindTimer),this.rebindTimer=setTimeout(function(){return window.gigyaFormView=new window.Expresso.Views.GigyaFormView},100)},t.prototype.getOptions=function(e){var t;return t={screenSet:"nse_Login-Expresso-Web",startScreen:e,mobileScreenSet:"nse_Login-Expresso-Web",onAfterScreenLoad:function(){return window.widgetView.bindForm()},onHide:function(){return window.widgetView.onHide()}},"gigya-social-register-screen"===e&&(t.onError=window.widgetView.registerErrorHandler),"gigya-login-screen"===e&&(t.onError=window.widgetView.loginErrorHandler),t},t.prototype.loginErrorHandler=function(){var e;return e={call_type:"event",events:{category:"Login",action:"Login Failed",event:"login_failed"}},(window.utag_add_event||function(){})(e)},t.prototype.registerErrorHandler=function(){var e;return e={call_type:"event",events:{category:"Registration",action:"Registration Failed",event:"registration_failed"}},(window.utag_add_event||function(){})(e)},n=function(){var e,t;return e=navigator.userAgent.toLowerCase(),-1===e.indexOf("mozilla/5.0")?!1:-1===e.indexOf("android 4")?!1:-1===e.indexOf("applewebkit")?!1:(t=e.indexOf("chrome")>-1,t?e.indexOf("samsung")>-1:!0)},t.prototype.register=function(e){var t;return e.preventDefault(),n()?toastr.warning("You are unable to login or register using this browser."):(window.currentGigyaAction="registering",gigya.accounts.showScreenSet(this.getOptions("gigya-social-register-screen")),t={call_type:"event",events:{category:"Registration",action:"Display Registration",event:"registration_popup"}},(window.utag_add_event||function(){})(t))},t.prototype.signIn=function(e){var t;return e.preventDefault(),n()?toastr.warning("You are unable to login or register using this browser."):(window.currentGigyaAction="loggingin",gigya.accounts.showScreenSet(this.getOptions("gigya-login-screen")),t={call_type:"event",events:{category:"Login",action:"Display Login",event:"login_popup"}}),(window.utag_add_event||function(){})(t)},t.prototype.logout=function(e){return e.preventDefault(),gigya.accounts.logout()},t.prototype.reloadPageUnlessJustRegistered=function(){return window.currentGigyaAction&&"loggingin"===window.currentGigyaAction?window.location.reload():void 0},t.prototype.setUserMatch=function(e){return e.userId()?$(".nse_beacon").attr("src",window.expressoOptions.userMatchUrl+e.userId()):$(".nse_beacon").attr("src","")},t}(Backbone.View);var extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Views.RegistrationView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.initialize=function(e){return this.callback=e,"function"==typeof this.callback?this.callback():void 0},t.prototype.el=".gigya-screen-dialog #gigya-register-screen",t}(Backbone.View),window.Expresso.AcquisitionModule=function(){function e(){}return e.prototype.createFor=function(e){return this.initialized=!0,this.metaTag=e.metaTag,this.loadTargetElement()},e.prototype.loadNewsletter=function(){var e,t;return this.initialized=this.initialized||!!window.expressoModuleMeta,this.metaTag||(this.metaTag=window.expressoModuleMeta),this.targetElement||(this.targetElement=window.expressoModuleTarget),this.initialized?(this.content=$("meta[name='"+this.metaTag+"']").attr("content"),this.content&&(e=this.content.split(","),$.each(e,function(t,n){return e[t]=n.replace(/[^a-z A-Z0-9]+/g,"")}),this.content=e.join()),this.pathName=window.location.pathname,t=this.pathName.split("/").reverse(),this.partsAsString=t.join(),this.combined=[this.partsAsString,this.content].join(),this.newsletter=new window.Expresso.Models.SimpleNewsletter({keys:this.combined,loggedIn:window.expressoUser.isLoggedIn(),isAM:!0}),this.newsletter.save(null,{success:window.Expresso.Acquisition.reRender})):void 0},e.prototype.reRender=function(){return $(".nse_acquisition-module").remove(),window.Expresso.Acquisition.newsletter.set("loggedIn",window.expressoUser.isLoggedIn()),window.Expresso.Acquisition.render()},e.prototype.render=function(){var e,t,n,s;return s=this,window.Expresso.Acquisition.newsletter.get("NewsletterId")?(window.expressoUser.addLoginEvent(function(){return window.Expresso.Acquisition.loadNewsletter()}),n=window.Expresso.Acquisition.newsletter.toJSON(),n.mode=window.expressoOptions.mode,e=Mustache.to_html(window.Expresso.Templates.AcquisitionModuleNewsletter,n),t=$('<div class="nse_acquisition-module"></div>').html($('<ul class="nse_subscription-list"></ul>').html(e)),t.insertAfter(window.Expresso.Acquisition.targetElement),$('a[data-login-required="true"]').off("click").on("click",function(e){return window.widgetView.register(e),$(document).scrollTop(0)}),window.Expresso.Acquisition.subscribeUnsubscribeView=new window.Expresso.Views.SimpleSubscribeUnsubscribeView({model:window.Expresso.Acquisition.newsletter,onSubscribe:window.Expresso.Acquisition.reRender,onUnSubscribe:window.Expresso.Acquisition.reRender})):void 0},e.prototype.dispatchFakeEvent=function(e,t,n){var s;return n=null!=(s=!n)?s:{"false":!0},1===e.nodeType&&e[t]>=0&&e[t]++,n&&e!==document?this.dispatchFakeEvent(e.parentNode,t,n):void 0},e.prototype.dispatchModuleCreatedEvent=function(){var e;return e=null,document.createEvent&&(e=document.createEvent("HTMLEvents"),e.initEvent("module_created",!0,!0),e.eventName="module_created"),document.createEvent?document.dispatchEvent(e):this.dispatchFakeEvent(document.documentElement,"module_created",!0)},e.prototype.loadTargetElement=function(){var e;for(e=document.documentElement;e.childNodes.length&&1===e.lastChild.nodeType;)e=e.lastChild;return this.targetElement=e,this.dispatchModuleCreatedEvent()},e}(),window.Expresso.Acquisition=new window.Expresso.AcquisitionModule;var templates={};templates["Gigya.UI"]=new Hogan.Template({code:function(e,t,n){var s=this;return s.b(n=n||""),s.b('<div class="gigya-screen-set nse_body"'),s.b("\n"+n),s.b('     id="nse_Login-Expresso-Web"'),s.b("\n"+n),s.b('     style="display:none"'),s.b("\n"+n),s.b('     data-on-existing-login-identifier-screen="gigya-link-account-screen"'),s.b("\n"+n),s.b('     data-on-pending-registration-screen="gigya-complete-registration-screen"'),s.b("\n"+n),s.b('     data-on-pending-verification-screen="gigya-email-verification-screen"'),s.b("\n"+n),s.b('     data-width="760">'),s.b("\n"+n),s.b('<div class="gigya-screen" id="gigya-login-screen" data-caption="'),s.b(s.v(s.d("screens.login.caption",e,t,0))),s.b('" style="width: 700px; max-width: 700px;" data-width="700">'),s.b("\n"+n),s.b('  <div class="nse_container">'),s.b("\n"+n),s.b('    <form id="nse_login" class="nse_form gigya-login-form">'),s.b("\n"+n),s.b('      <div class="nse_section nse_2col">'),s.b("\n"),s.b("\n"+n),s.b('        <h2 class="nse_section-header">Sign in with your social network</h2>'),s.b("\n"),s.b("\n"+n),s.b('        <div class="gigya-composite-control gigya-composite-control-social-login nse_social-login-override">'),s.b("\n"+n),s.b('          <div class="gigya-social-login">'),s.b("\n"+n),s.b('            <param name="width" value="300">'),s.b("\n"+n),s.b('            <param name="height" value="300">'),s.b("\n"+n),s.b('            <param name="enabledProviders" value="facebook,Twitter,googleplus">'),s.b("\n"+n),s.b('            <param name="buttonsStyle" value="signInWith">'),s.b("\n"+n),s.b('            <param name="buttonSize" value="35">'),s.b("\n"+n),s.b('            <param name="showWhatsThis" value="false">'),s.b("\n"+n),s.b('            <param name="showTermsLink" value="false">'),s.b("\n"+n),s.b('            <param name="hideGigyaLink" value="true">'),s.b("\n"+n),s.b("          </div>"),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b("      </div>"),s.b("\n"),s.b("\n"+n),s.b('      <div class="nse_section nse_3col">'),s.b("\n"),s.b("\n"+n),s.b('        <h2 class="nse_section-header">Sign in with your email address</h2>'),s.b("\n"),s.b("\n"+n),s.b('        <div class="gigya-error-display gigya-composite-control gigya-composite-control-form-error" data-bound-to="nse_login">'),s.b("\n"+n),s.b('          <div class="gigya-error-msg gigya-form-error-msg nse_bold" data-bound-to="nse_login" style=""></div>'),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_check-fields nse_bold" style="display:none;">Please check the field(s) below and try again</div>'),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_input-wrapper nse_required ">'),s.b("\n"+n),s.b('          <label for="nse_login-email">Email</label>'),s.b("\n"+n),s.b('          <div class="nse_input"><input type="text" name="loginID" id="nse_login-email" class="nse_validate-email" maxlength="100" /></div>'),s.b("\n"+n),s.b('          <span class="gigya-error-msg gigya-error-display" data-bound-to="loginID"></span>'),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_input-wrapper nse_required">'),s.b("\n"+n),s.b('          <label for="nse_login-password">Password</label>'),s.b("\n"+n),s.b('          <div class="nse_input nse_show-content">'),s.b("\n"+n),s.b('            <span class="nse_input-show">show</span>'),s.b("\n"+n),s.b('            <input type="password" id="nse_login-password" name="password" maxlength="100" autocomplete="off" />'),s.b("\n"+n),s.b("          </div>"),s.b("\n"+n),s.b('          <span class="gigya-error-msg gigya-error-display" data-bound-to="password"></span>'),s.b("\n"+n),s.b('          <span class="nse_input-hint"><a data-switch-screen="gigya-forgot-password-screen" title="Reset your password here">Forgotten your password?</a></span>'),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_form-submit-wrapper">'),s.b("\n"+n),s.b('          <input type="submit" id="nse_login-form-submit" class="nse_button green gigya-input-submit" value="Submit" />'),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b('        <p class="nse_bold">Don\'t have an account? <a onclick="window.widgetView.register(event)" class="nse_register-link" title="Register an account here" href="javascript:;">Register</a></p>'),s.b("\n"),s.b("\n"+n),s.b("      </div>"),s.b("\n"+n),s.b("    </form>"),s.b("\n"+n),s.b("  </div>"),s.b("\n"+n),s.b("</div>"),s.b("\n"+n),s.b('<div class="gigya-screen" id="gigya-social-register-screen" data-caption="'),s.b(s.v(s.d("screens.register.caption",e,t,0))),s.b('" style="width: 700px; max-width: 700px;" data-width="700">'),s.b("\n"),s.b("\n"+n),s.b('  <div class="nse_container">'),s.b("\n"),s.b("\n"+n),s.b('    <div class="nse_section nse_3col">'),s.b("\n"),s.b("\n"+n),s.b('      <h2 class="nse_section-header">Benefits of registering</h2>'),s.b("\n"),s.b("\n"+n),s.b('      <div id="nse_benefit-list-container"></div>'),s.b("\n"),s.b("\n"+n),s.b("    </div>"),s.b("\n"),s.b("\n"+n),s.b('    <div class="nse_section nse_2col">'),s.b("\n"),s.b("\n"+n),s.b('      <h2 class="nse_section-header">Register with your social network</h2>'),s.b("\n"),s.b("\n"+n),s.b('      <div class="gigya-composite-control gigya-composite-control-social-login nse_social-login-override">'),s.b("\n"+n),s.b('        <div class="gigya-social-login">'),s.b("\n"+n),s.b('          <param name="width" value="300">'),s.b("\n"+n),s.b('          <param name="height" value="300">'),s.b("\n"+n),s.b('          <param name="enabledProviders" value="facebook,Twitter,googleplus">'),s.b("\n"+n),s.b('          <param name="buttonsStyle" value="signInWith">'),s.b("\n"+n),s.b('          <param name="buttonSize" value="35">'),s.b("\n"+n),s.b('          <param name="showWhatsThis" value="false">'),s.b("\n"+n),s.b('          <param name="showTermsLink" value="false">'),s.b("\n"+n),s.b('          <param name="hideGigyaLink" value="true">'),s.b("\n"+n),s.b("        </div>"),s.b("\n"+n),s.b("      </div>"),s.b("\n"),s.b("\n"+n),s.b("    </div>"),s.b("\n"),s.b("\n"+n),s.b('    <div class="nse_section-break"></div>'),s.b("\n"),s.b("\n"+n),s.b('    <div class="nse_section nse_2col">'),s.b("\n"),s.b("\n"+n),s.b('      <p id="nse_gigya-register-email-link" class="nse_bold"><a data-switch-screen="gigya-register-screen" title="Register with your email address here">Register with email</a></p>'),s.b("\n"),s.b("\n"+n),s.b("    </div>"),s.b("\n"),s.b("\n"+n),s.b('    <div class="nse_section nse_3col">'),s.b("\n"),s.b("\n"+n),s.b('      <p >Already have an account? <a onclick="window.widgetView.signIn(event)" class="nse_login-link" title="Sign in with an existing account here" href="javascript:;">Sign in</a></p>'),s.b("\n"),s.b("\n"+n),s.b("    </div>"),s.b("\n"+n),s.b("  </div>"),s.b("\n"+n),s.b("</div>"),s.b("\n"+n),s.b('<div data-caption="'),s.b(s.v(s.d("screens.register.caption",e,t,0))),s.b('" id="gigya-register-screen" class="gigya-screen" style="width: 700px; max-width: 700px;" data-width="700" data-on-pending-verification-screen="gigya-thank-you-screen">'),s.b("\n"+n),s.b('  <div class="nse_container">'),s.b("\n"+n),s.b('    <div class="nse_section nse_full-width">'),s.b("\n"+n),s.b('      <form id="nse_register" class="nse_form gigya-register-form" data-on-success-screen="gigya-registration-newsletters">'),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_check-fields nse_bold" style="display:none;">Please check the field(s) below and try again</div>'),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_input-wrapper nse_required nse_email-wrapper">'),s.b("\n"+n),s.b('          <label for="nse_email1">Email</label>'),s.b("\n"+n),s.b('          <div class="nse_input"><input type="text" name="email" id="nse_email1" maxlength="100" /></div>'),s.b("\n"+n),s.b('          <span class="gigya-error-msg gigya-error-display" data-bound-to="email"></span>'),s.b("\n"+n),s.b('          <span class="nse_email-taken" style="display:none;">The email address you have provided is taken. <a data-switch-screen="gigya-login-screen">Click here to sign in</a></span>'),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_screenname-wrapper">'),s.b("\n"+n),s.b('              <div class="nse_input-group-wrapper">'),s.b("\n"+n),s.b('                  <div class="nse_input-wrapper nse_required">'),s.b("\n"+n),s.b('                      <label for="nse_firstname1">First name</label>'),s.b("\n"+n),s.b('                      <div class="nse_input"><input type="text" name="profile.firstName" id="nse_firstname1" maxlength="32" /></div>'),s.b("\n"+n),s.b('                      <span class="gigya-error-msg gigya-error-display" data-bound-to="profile.firstName"></span>'),s.b("\n"+n),s.b("                  </div>"),s.b("\n"),s.b("\n"+n),s.b('                  <div class="nse_input-wrapper nse_required" data-bound-to="profile.lastName">'),s.b("\n"+n),s.b('                      <label for="nse_lastname1">Last name</label>'),s.b("\n"+n),s.b('                      <div class="nse_input"><input type="text" name="profile.lastName" id="nse_lastname1" maxlength="32" /></div>'),s.b("\n"+n),s.b('                      <span class="gigya-error-msg gigya-error-display" data-bound-to="profile.lastName"></span>'),s.b("\n"+n),s.b("                  </div>"),s.b("\n"+n),s.b("              </div>"),s.b("\n"+n),s.b('              <div class="nse_input-wrapper nse_required nse_screenname-input-wrapper">'),s.b("\n"+n),s.b('                  <label for="nse_nickname1">Screen name</label>'),s.b("\n"+n),s.b('                  <span class="nse_input-help">(The name which appears when posting comments)</span>'),s.b("\n"+n),s.b('                  <div class="nse_input"><input type="text" name="profile.nickname" id="nse_nickname1" maxlength="48" /></div>'),s.b("\n"+n),s.b('                  <span class="gigya-error-msg gigya-error-display" data-bound-to="profile.nickname"></span>'),s.b("\n"+n),s.b('                  <span class="gigya-error-msg nse_screenname-exists"></span>'),s.b("\n"+n),s.b("              </div>"),s.b("\n"+n),s.b("          </div>"),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_input-wrapper nse_required">'),s.b("\n"+n),s.b('          <label for="nse_password">Password</label>'),s.b("\n"+n),s.b('          <div class="nse_input nse_show-content">'),s.b("\n"+n),s.b('            <span class="nse_input-show">show</span>'),s.b("\n"+n),s.b('            <input type="password" id="nse_password" name="password" maxlength="100" autocomplete="off" />'),s.b("\n"+n),s.b("          </div>"),s.b("\n"+n),s.b('          <span class="nse_input-hint">At least 6 characters</span>'),s.b("\n"+n),s.b('          <span class="gigya-error-msg gigya-error-display" data-bound-to="password"></span>'),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_checkbox-group-wrapper">'),s.b("\n"+n),s.b('          <div class="nse_checkbox-wrapper">'),s.b("\n"+n),s.b('            <input type="checkbox" data-nse-cb="true" name="data.brandOptIn" class="nse_checkbox" id="nse_checkbox11" value="one">'),s.b("\n"+n),s.b('            <label for="nse_checkbox11">'),s.b(s.v(s.f("brandOptIn",e,t,0))),s.b("</label>"),s.b("\n"+n),s.b("          </div>"),s.b("\n"),s.b("\n"+n),s.b('          <div class="nse_checkbox-wrapper">'),s.b("\n"+n),s.b('            <input type="checkbox" data-nse-cb="true" name="data.nsOptIn" class="nse_checkbox" id="nse_checkbox22" value="two">'),s.b("\n"+n),s.b('            <label for="nse_checkbox22">'),s.b(s.v(s.f("nsOptIn",e,t,0))),s.b("</label>"),s.b("\n"+n),s.b("          </div>"),s.b("\n"),s.b("\n"+n),s.b('          <div class="nse_checkbox-wrapper">'),s.b("\n"+n),s.b('            <input type="checkbox" data-nse-cb="true" name="data.thirdPartyOptIn" class="nse_checkbox" id="nse_checkbox33" value="two">'),s.b("\n"+n),s.b('            <label for="nse_checkbox33">'),s.b(s.v(s.f("thirdPartyOptIn",e,t,0))),s.b("</label>"),s.b("\n"+n),s.b("          </div>"),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b('        <p>By registering I understand and agree to the <a href="'),s.b(s.v(s.f("termsOfUseLink",e,t,0))),s.b('" target="_blank" class="nse_bold" title="read our terms of use">Terms of use</a> &amp; <a href="'),s.b(s.v(s.f("privacyPolicyLink",e,t,0))),s.b('" target="_blank" class="nse_bold" title="read our privacy policy">Privacy policy</a></p>'),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_form-submit-wrapper">'),s.b("\n"+n),s.b('          <input type="submit" id="nse_form-submit3" class="nse_button green gigya-input-submit" value="Complete registration" />'),s.b("\n"+n),s.b('          <span class="nse_form-alt">Already have an account? <a onclick="window.widgetView.signIn(event)" class="nse_login-link" title="sign in here" href="javascript:;">Sign in</a></span>'),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b("      </form>"),s.b("\n"+n),s.b("    </div>"),s.b("\n"+n),s.b("  </div>"),s.b("\n"+n),s.b("</div>"),s.b("\n"+n),s.b('<div class="gigya-screen" id="gigya-complete-registration-screen" data-caption="'),s.b(s.v(s.d("screens.register.caption",e,t,0))),s.b('" style="width: 700px; max-width: 700px;" data-width="700">'),s.b("\n"+n),s.b('  <div class="nse_container">'),s.b("\n"+n),s.b('    <div class="nse_section nse_full-width">'),s.b("\n"+n),s.b('      <form id="nse_complete-registration" class="se_form gigya-profile-form">'),s.b("\n"),s.b("\n"+n),s.b('        <h2 class="nse_section-header">We still need some details from you...</h2>'),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_check-fields nse_bold" style="display:none;">Please check the field(s) below and try again</div>'),s.b("\n"+n),s.b('        <span class="gigya-error-display" data-bound-to="nse_complete-registration" data-scope="all-errors">'),s.b("\n"+n),s.b('          <span class="gigya-error-msg" data-scope="all-errors" data-bound-to="nse_complete-registration"><div class="nse_check-fields nse_bold" style="display:none;">Please check the field(s) below and try again</div></span>'),s.b("\n"+n),s.b("        </span>"),s.b("\n"+n),s.b('        <div class="nse_input-wrapper nse_required nse_email-wrapper">'),s.b("\n"+n),s.b('          <label for="nse_email">Email</label>'),s.b("\n"+n),s.b('          <div class="nse_input"><input type="text" name="email" id="nse_email" maxlength="100" /></div>'),s.b("\n"+n),s.b('          <span class="gigya-error-msg gigya-error-display" data-bound-to="email"></span>'),s.b("\n"+n),s.b('          <span class="nse_email-taken" style="display:none;">The email address you have provided is taken. <a data-switch-screen="gigya-login-screen">Click here to sign in</a></span>'),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_screenname-wrapper">'),s.b("\n"+n),s.b('            <div class="nse_input-group-wrapper">'),s.b("\n"+n),s.b('                <div class="nse_input-wrapper nse_required">'),s.b("\n"+n),s.b('                    <label for="nse_firstname">First name</label>'),s.b("\n"+n),s.b('                    <div class="nse_input"><input type="text" name="profile.firstName" id="nse_firstname" maxlength="32" /></div>'),s.b("\n"+n),s.b('                    <span class="gigya-error-msg gigya-error-display" data-bound-to="profile.firstName"></span>'),s.b("\n"+n),s.b("                </div>"),s.b("\n"),s.b("\n"+n),s.b('                <div class="nse_input-wrapper nse_required" data-bound-to="profile.lastName">'),s.b("\n"+n),s.b('                    <label for="nse_lastname">Last name</label>'),s.b("\n"+n),s.b('                    <div class="nse_input"><input type="text" name="profile.lastName" id="nse_lastname" maxlength="32" /></div>'),s.b("\n"+n),s.b('                    <span class="gigya-error-msg gigya-error-display" data-bound-to="profile.lastName"></span>'),s.b("\n"+n),s.b("                </div>"),s.b("\n"+n),s.b("            </div>"),s.b("\n"+n),s.b('            <div class="nse_input-wrapper nse_required nse_screenname-input-wrapper">'),s.b("\n"+n),s.b('                <label for="nse_nickname">Screen name</label>'),s.b("\n"+n),s.b('                <span class="nse_input-help">(The name which appears when posting comments)</span>'),s.b("\n"+n),s.b('                <div class="nse_input"><input type="text" name="profile.nickname" id="nse_nickname" maxlength="48" /></div>'),s.b("\n"+n),s.b('                <span class="gigya-error-msg gigya-error-display" data-bound-to="profile.nickname"></span>'),s.b("\n"+n),s.b('                <span class="gigya-error-msg nse_screenname-exists"></span>'),s.b("\n"+n),s.b("            </div>"),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_checkbox-group-wrapper">'),s.b("\n"+n),s.b('          <div class="nse_checkbox-wrapper">'),s.b("\n"+n),s.b('            <input type="checkbox" data-nse-cb="true" name="data.brandOptIn" class="nse_checkbox" id="nse_checkbox1" value="one" checked>'),s.b("\n"+n),s.b('            <label for="nse_checkbox1">'),s.b(s.v(s.f("brandOptIn",e,t,0))),s.b("</label>"),s.b("\n"+n),s.b("          </div>"),s.b("\n"),s.b("\n"+n),s.b('          <div class="nse_checkbox-wrapper">'),s.b("\n"+n),s.b('            <input type="checkbox" data-nse-cb="true" name="data.nsOptIn" class="nse_checkbox" id="nse_checkbox2" value="two">'),s.b("\n"+n),s.b('            <label for="nse_checkbox2">'),s.b(s.v(s.f("nsOptIn",e,t,0))),s.b("</label>"),s.b("\n"+n),s.b("          </div>"),s.b("\n"),s.b("\n"+n),s.b('          <div class="nse_checkbox-wrapper">'),s.b("\n"+n),s.b('            <input type="checkbox" data-nse-cb="true" name="data.thirdPartyOptIn" class="nse_checkbox" id="nse_checkbox3" value="two">'),s.b("\n"+n),s.b('            <label for="nse_checkbox3">'),s.b(s.v(s.f("thirdPartyOptIn",e,t,0))),s.b("</label>"),s.b("\n"+n),s.b("          </div>"),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b('        <p>By registering I understand and agree to the <a href="'),s.b(s.v(s.f("termsOfUseLink",e,t,0))),s.b('" target="_blank" class="nse_bold" title="read our terms of use">Terms of use</a> &amp; <a href="'),s.b(s.v(s.f("privacyPolicyLink",e,t,0))),s.b('" target="_blank" class="nse_bold" title="read our privacy policy">Privacy policy</a></p>'),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_form-submit-wrapper">'),s.b("\n"+n),s.b('          <input type="submit" id="nse_form-submit4" class="nse_button green gigya-input-submit" value="Complete registration" />'),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b("      </form>"),s.b("\n"),s.b("\n"+n),s.b("    </div>"),s.b("\n"+n),s.b("  </div>"),s.b("\n"+n),s.b("</div>"),s.b("\n"+n),s.b('<div class="gigya-screen" id="gigya-link-account-screen" data-caption="'),s.b(s.v(s.d("screens.linkaccounts.caption",e,t,0))),s.b('" style="width: 700px; max-width: 700px;" data-width="700">'),s.b("\n"+n),s.b('  <div class="nse_container">'),s.b("\n"+n),s.b('    <form id="nse_link-accounts" class="nse_form gigya-link-accounts-form">'),s.b("\n"+n),s.b('      <div class="nse_section">'),s.b("\n"),s.b("\n"+n),s.b('        <h2 class="nse_section-header">We found your email in our system</h2>'),s.b("\n"+n),s.b('        <p>Please provide your site password to link to your existing account or <a data-switch-screen="gigya-register-screen" title="create a new account">click here</a> to create a new account</p>'),s.b("\n"),s.b("\n"+n),s.b('        <div class="gigya-error-display gigya-composite-control gigya-composite-control-form-error" data-bound-to="nse_link-accounts" style="display: block;">'),s.b("\n"+n),s.b('          <div class="gigya-error-msg gigya-form-error-msg" data-bound-to="nse_link-accounts" style="">'),s.b("\n"+n),s.b("            <strong>Please check the field(s) below and try again</strong>"),s.b("\n"+n),s.b("          </div>"),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_input-wrapper nse_required ">'),s.b("\n"+n),s.b('          <label for="nse_login-email1">Email</label>'),s.b("\n"+n),s.b('          <div class="nse_input"><input type="email" name="loginID" id="nse_login-email1" maxlength="100" /></div>'),s.b("\n"+n),s.b('          <span class="gigya-error-msg" data-bound-to="loginID"></span>'),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_input-wrapper nse_required">'),s.b("\n"+n),s.b('          <label for="nse_login-password1">Password</label>'),s.b("\n"+n),s.b('          <div class="nse_input nse_show-content">'),s.b("\n"+n),s.b('            <span class="nse_input-show">show</span>'),s.b("\n"+n),s.b('            <input type="password" id="nse_login-password1" name="password" maxlength="100" autocomplete="off" />'),s.b("\n"+n),s.b("          </div>"),s.b("\n"+n),s.b('          <span class="gigya-error-msg" data-bound-to="password"></span>'),s.b("\n"+n),s.b('          <span class="nse_input-hint"><a data-switch-screen="gigya-forgot-password-screen" title="Reset your password here">Forgotten your password?</a></span>'),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_form-submit-wrapper">'),s.b("\n"+n),s.b('          <input type="submit" id="nse_form-submit1" class="nse_button green gigya-input-submit" value="Submit" />'),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b("      </div>"),s.b("\n"+n),s.b("    </form>"),s.b("\n"+n),s.b("  </div>"),s.b("\n"+n),s.b("</div>"),s.b("\n"+n),s.b('<div class="gigya-screen" id="gigya-forgot-password-screen" data-caption="'),s.b(s.v(s.d("screens.forgotpassword.caption",e,t,0))),s.b('" style="width: 700px; max-width: 700px;" data-width="700">'),s.b("\n"),s.b("\n"+n),s.b('  <div class="nse_container">'),s.b("\n"+n),s.b('    <form id="nse_forgot-password" class="nse_form gigya-reset-password-form" data-on-success-screen="gigya-forgot-password-success-screen">'),s.b("\n"),s.b("\n"+n),s.b('      <div class="nse_section">'),s.b("\n"),s.b("\n"+n),s.b('        <div class="gigya-error-display gigya-composite-control gigya-composite-control-form-error" data-bound-to="nse_forgot-password" style="display: block;">'),s.b("\n"+n),s.b('          <div class="gigya-error-msg gigya-form-error-msg" data-bound-to="nse_forgot-password" style=""></div>'),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_check-fields nse_bold" style="display:none;">Please check the field(s) below and try again</div>'),s.b("\n"),s.b("\n"+n),s.b('        <p class="nse_bold" id="nse_forgot-password-intro-text">Please enter your email address to reset your password</p>'),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_input-wrapper nse_required ">'),s.b("\n"+n),s.b('          <label for="nse_login-email2">Email</label>'),s.b("\n"+n),s.b('          <div class="nse_input"><input type="text" name="loginID" id="nse_login-email2" class="nse_validate-email" maxlength="100" /></div>'),s.b("\n"+n),s.b('          <span class="gigya-error-msg gigya-error-display" data-bound-to="loginID"></span>'),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b('        <div class="nse_form-submit-wrapper">'),s.b("\n"+n),s.b('          <input type="submit" id="nse_form-submit2" class="nse_button green gigya-input-submit" value="Submit" />'),s.b("\n"+n),s.b("        </div>"),s.b("\n"),s.b("\n"+n),s.b('        <p class="nse_bold"><a onclick="window.widgetView.signIn(event)" title="Sign in with a different account here" href="javascript:;">Sign in with a different account</a></p>'),s.b("\n"),s.b("\n"+n),s.b("      </div>"),s.b("\n"+n),s.b("    </form>"),s.b("\n"+n),s.b("  </div>"),s.b("\n"),s.b("\n"+n),s.b("</div>"),s.b("\n"),s.b("\n"+n),s.b('<div class="gigya-screen" id="gigya-forgot-password-success-screen" data-caption="'),s.b(s.v(s.d("screens.forgotpasswordsuccess.caption",e,t,0))),s.b('"  style="width: 700px; max-width: 700px;" data-width="700">'),s.b("\n"+n),s.b('  <div class="nse_container">'),s.b("\n"+n),s.b('    <div class="nse_section">'),s.b("\n"+n),s.b('        <h2 class="nse_section-header">We’ve sent you an email to reset your password</h2>'),s.b("\n"),s.b("\n"+n),s.b('        <p class="nse_bold">The email should arrive straight away, it may be in your spam.</p>'),s.b("\n"+n),s.b('        <p class="nse_bold">The link will expire after 24 hours.</p>'),s.b("\n"+n),s.b("    </div>"),s.b("\n"+n),s.b("  </div>"),s.b("\n"+n),s.b("</div>"),s.b("\n"+n),s.b('<div class="gigya-screen" id="gigya-email-verification-screen" data-caption="Your email was not verified" style="width: 350px; max-width: 350px;" data-width="350">'),s.b("\n"+n),s.b('    <form class="gigya-resend-verification-code-form" data-on-success-screen="gigya-thank-you-screen">'),s.b("\n"+n),s.b('        <div class="gigya-layout-row">'),s.b("\n"+n),s.b('            <label class="gigya-composite-control gigya-composite-control-label" style="display: block;">We have not verified that the email belongs to you. Please check your inbox for'),s.b("\n"+n),s.b("                the verification email."),s.b("\n"+n),s.b("                <br>"),s.b("\n"+n),s.b("                <br>To resend the verification email, please enter your email address and click Submit.</label>"),s.b("\n"+n),s.b("            <div"),s.b("\n"+n),s.b('                    class="gigya-composite-control gigya-spacer" data-units="1" style="height: 10px;"></div>'),s.b("\n"+n),s.b('            <div class="gigya-composite-control gigya-composite-control-textbox" style="display: block;">'),s.b("\n"+n),s.b('                <label class="gigya-label">'),s.b("\n"+n),s.b('                    <span class="gigya-label-text">Email:</span>'),s.b("\n"+n),s.b("                </label>"),s.b("\n"+n),s.b('                <input type="text" name="email" class="gigya-input-text" tabindex="1">'),s.b("\n"+n),s.b('                <span class="gigya-error-msg" data-bound-to="email"></span>'),s.b("\n"+n),s.b("            </div>"),s.b("\n"+n),s.b("        </div>"),s.b("\n"+n),s.b('        <div class="gigya-layout-row">'),s.b("\n"+n),s.b('            <div class="gigya-layout-cell">'),s.b("\n"+n),s.b('                <div class="gigya-error-display gigya-composite-control gigya-composite-control-form-error"'),s.b("\n"+n),s.b('                     data-bound-to="gigya-resend-verification-code-form" style="display: block;">'),s.b("\n"+n),s.b('                    <div class="gigya-error-msg gigya-form-error-msg" data-bound-to="gigya-resend-verification-code-form"'),s.b("\n"+n),s.b('                         style=""></div>'),s.b("\n"+n),s.b("                </div>"),s.b("\n"+n),s.b("            </div>"),s.b("\n"+n),s.b('            <div class="gigya-layout-cell">'),s.b("\n"+n),s.b('                <div class="gigya-composite-control gigya-composite-control-submit" style="display: block;">'),s.b("\n"+n),s.b('                    <input type="submit" class="gigya-input-submit" value="Submit" tabindex="2">'),s.b("\n"+n),s.b("                </div>"),s.b("\n"+n),s.b("            </div>"),s.b("\n"+n),s.b('            <div class="gigya-clear"></div>'),s.b("\n"+n),s.b("        </div>"),s.b("\n"+n),s.b('        <div class="gigya-layout-row ">'),s.b("\n"+n),s.b('            <div class="gigya-layout-cell ">'),s.b("\n"+n),s.b('                <div class="gigya-layout-row ">'),s.b("\n"+n),s.b('                    <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('                    <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('                    <div class="gigya-clear"></div>'),s.b("\n"+n),s.b("                </div>"),s.b("\n"+n),s.b("            </div>"),s.b("\n"+n),s.b('            <div class="gigya-layout-cell ">'),s.b("\n"+n),s.b('                <div class="gigya-layout-row ">'),s.b("\n"+n),s.b('                    <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('                    <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('                    <div class="gigya-clear"></div>'),s.b("\n"+n),s.b("                </div>"),s.b("\n"+n),s.b("            </div>"),s.b("\n"+n),s.b('            <div class="gigya-clear"></div>'),s.b("\n"+n),s.b("        </div>"),s.b("\n"+n),s.b('        <div class="gigya-layout-row">'),s.b("\n"+n),s.b('            <div class="gigya-composite-control gigya-spacer" data-units="8" style="height: 80px; display: block;"></div>'),s.b("\n"+n),s.b('            <label class="gigya-composite-control gigya-composite-control-label" style="text-align: right; display: block;">To login with a different account <a data-switch-screen="gigya-login-screen">click here                    </a>'),s.b("\n"+n),s.b("            </label>"),s.b("\n"+n),s.b("        </div>"),s.b("\n"+n),s.b('        <div class="gigya-layout-row ">'),s.b("\n"+n),s.b('            <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('            <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('            <div class="gigya-clear"></div>'),s.b("\n"+n),s.b("        </div>"),s.b("\n"+n),s.b('        <div class="gigya-layout-row ">'),s.b("\n"+n),s.b('            <div class="gigya-layout-cell ">'),s.b("\n"+n),s.b('                <div class="gigya-layout-row ">'),s.b("\n"+n),s.b('                    <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('                    <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('                    <div class="gigya-clear"></div>'),s.b("\n"+n),s.b("                </div>"),s.b("\n"+n),s.b("            </div>"),s.b("\n"+n),s.b('            <div class="gigya-layout-cell ">'),s.b("\n"+n),s.b('                <div class="gigya-layout-row ">'),s.b("\n"+n),s.b('                    <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('                    <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('                    <div class="gigya-clear"></div>'),s.b("\n"+n),s.b("                </div>"),s.b("\n"+n),s.b("            </div>"),s.b("\n"+n),s.b('            <div class="gigya-clear"></div>'),s.b("\n"+n),s.b("        </div>"),s.b("\n"+n),s.b('        <div class="gigya-layout-row"></div>'),s.b("\n"+n),s.b('        <div class="gigya-clear"></div>'),s.b("\n"+n),s.b("    </form>"),s.b("\n"+n),s.b("</div>"),s.b("\n"+n),s.b('<div class="gigya-screen" id="gigya-thank-you-screen" data-caption="Thank you for registering!" style="width: 300px;" data-width="300">'),s.b("\n"+n),s.b('    <div class="gigya-layout-row">'),s.b("\n"+n),s.b('        <div class="gigya-composite-control gigya-spacer" data-units="4" style="height: 40px; display: block;"></div>'),s.b("\n"+n),s.b('        <label class="gigya-composite-control gigya-composite-control-label gigya-message">A confirmation email has been sent to you with a link to activate the account.</label>'),s.b("\n"+n),s.b("        <div"),s.b("\n"+n),s.b('                class="gigya-composite-control gigya-spacer" data-units="5" style="height: 50px; display: block;"></div>'),s.b("\n"+n),s.b("    </div>"),s.b("\n"+n),s.b('    <div class="gigya-layout-row">'),s.b("\n"+n),s.b('        <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('        <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('        <div class="gigya-clear"></div>'),s.b("\n"+n),s.b("    </div>"),s.b("\n"+n),s.b('    <div class="gigya-layout-row ">'),s.b("\n"+n),s.b('        <div class="gigya-layout-cell ">'),s.b("\n"+n),s.b('            <div class="gigya-layout-row ">'),s.b("\n"+n),s.b('                <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('                <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('                <div class="gigya-clear"></div>'),s.b("\n"+n),s.b("            </div>"),s.b("\n"+n),s.b("        </div>"),s.b("\n"+n),s.b('        <div class="gigya-layout-cell ">'),s.b("\n"+n),s.b('            <div class="gigya-layout-row ">'),s.b("\n"+n),s.b('                <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('                <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('                <div class="gigya-clear"></div>'),s.b("\n"+n),s.b("            </div>"),s.b("\n"+n),s.b("        </div>"),s.b("\n"+n),s.b('        <div class="gigya-clear"></div>'),s.b("\n"+n),s.b("    </div>"),s.b("\n"+n),s.b('    <div class="gigya-layout-row"></div>'),s.b("\n"+n),s.b('    <div class="gigya-layout-row ">'),s.b("\n"+n),s.b('        <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('        <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('        <div class="gigya-clear"></div>'),s.b("\n"+n),s.b("    </div>"),s.b("\n"+n),s.b('    <div class="gigya-layout-row ">'),s.b("\n"+n),s.b('        <div class="gigya-layout-cell ">'),s.b("\n"+n),s.b('            <div class="gigya-layout-row ">'),s.b("\n"+n),s.b('                <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('                <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('                <div class="gigya-clear"></div>'),s.b("\n"+n),s.b("            </div>"),s.b("\n"+n),s.b("        </div>"),s.b("\n"+n),s.b('        <div class="gigya-layout-cell ">'),s.b("\n"+n),s.b('            <div class="gigya-layout-row ">'),s.b("\n"+n),s.b('                <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('                <div class="gigya-layout-cell"></div>'),s.b("\n"+n),s.b('                <div class="gigya-clear"></div>'),s.b("\n"+n),s.b("            </div>"),s.b("\n"+n),s.b("        </div>"),s.b("\n"+n),s.b('        <div class="gigya-clear"></div>'),s.b("\n"+n),s.b("    </div>"),s.b("\n"+n),s.b('    <div class="gigya-layout-row"></div>'),s.b("\n"+n),s.b('    <div class="gigya-clear"></div>'),s.b("\n"+n),s.b("  </div>"),s.b("\n"+n),s.b("</div>"),s.b("\n"),s.fl()
},partials:{},subs:{}}),templates["Gigya.Widget"]=new Hogan.Template({code:function(e,t,n){var s=this;return s.b(n=n||""),s.b('<div class="nse_guest" style="display: none;">'),s.b("\n"+n),s.b('  <ul class="nse_widget-list">'),s.b("\n"+n),s.b("    <li class=\"nse_widget-list-item nse_login\"><a class='nse_login-link' href='#'>Login</a></li>"),s.b("\n"+n),s.b("    <li class=\"nse_widget-list-item nse_register\"><a class='nse_register-link' href='#'>Register</a></li>"),s.b("\n"+n),s.b("  </ul>"),s.b("\n"+n),s.b("</div>"),s.b("\n"),s.b("\n"+n),s.b('<div class="nse_known-user" style="display: none;">'),s.b("\n"+n),s.b('  <img class="nse_beacon" src="" style="display: none;"></img>'),s.b("\n"+n),s.b('  <span class="nse_name-container"></span>'),s.b("\n"+n),s.b('  <img class="nse_profile-photo" alt="" src=""></span>'),s.b("\n"+n),s.b('  <ul class="nse_widget-list">'),s.b("\n"+n),s.b('    <!-- <li class="nse_widget-list-item nse_preferences"><a class="nse_preferences-link" href="'),s.b(s.v(s.f("preferencesLink",e,t,0))),s.b('">Your Email News</a></li> -->'),s.b("\n"+n),s.b('    <li class="nse_widget-list-item nse_profile"><a class="nse_profile-link" href="'),s.b(s.v(s.f("preferencesLink",e,t,0))),s.b('#/account/settings">Your Account</a></li>'),s.b("\n"+n),s.b('    <li class="nse_widget-list-item nse_logout"><a class="nse_logout-link" href="#">Sign Out</a></li>'),s.b("\n"+n),s.b("  </ul>"),s.b("\n"+n),s.b("</div>"),s.b("\n"),s.fl()},partials:{},subs:{}}),templates["Styles.Colours"]=new Hogan.Template({code:function(e,t,n){var s=this;return s.b(n=n||""),s.b("<style>"),s.b("\n"+n),s.b("  .nse_header, .gigya-screen-dialog-top {"),s.b("\n"+n),s.b("    background-color: "),s.b(s.v(s.f("headerBackgroundColor",e,t,0))),s.b(" !important;"),s.b("\n"+n),s.b("  }"),s.b("\n"+n),s.b("  div.gigya-screen-dialog-mobile h1 {"),s.b("\n"+n),s.b("  background-color: "),s.b(s.v(s.f("headerBackgroundColor",e,t,0))),s.b(" !important;"),s.b("\n"+n),s.b("  }"),s.b("\n"+n),s.b("  .nse_container .nse_content-block.nse_message, .nse_page .nse_content-block.nse_message {"),s.b("\n"+n),s.b("    background-color: "),s.b(s.v(s.f("messageBackgroundColor",e,t,0))),s.b(" !important;"),s.b("\n"+n),s.b("  }"),s.b("\n"),s.b("\n"+n),s.b("  @media screen and (min-width: 639px) {"),s.b("\n"+n),s.b("    .nse_container .nse_content-block.nse_message.nse_mobile-only, .nse_page .nse_content-block.nse_message.nse_mobile-only {"),s.b("\n"+n),s.b("        background-color:transparent !important;"),s.b("\n"+n),s.b("    }"),s.b("\n"+n),s.b("  }"),s.b("\n"),s.b("\n"+n),s.b("  .nse_acquisition-module {"),s.b("\n"+n),s.b("    background-color: "),s.b(s.v(s.d("modules.acquisitionModule.moduleBackgroundColor",e,t,0))),s.b(" !important;"),s.b("\n"+n),s.b("  }"),s.b("\n"),s.b("\n"+n),s.b("  .nse_acquisition-module .nse_item-header {"),s.b("\n"+n),s.b("    background-color: "),s.b(s.v(s.d("modules.acquisitionModule.headerBackgroundColor",e,t,0))),s.b(" !important;"),s.b("\n"+n),s.b("  }"),s.b("\n"),s.b("\n"+n),s.b("  .nse_acquisition-module .nse_item-header:after {"),s.b("\n"+n),s.b("    border-color: transparent transparent transparent "),s.b(s.v(s.d("modules.acquisitionModule.headerCornerColor",e,t,0))),s.b(" !important;"),s.b("\n"+n),s.b("  }"),s.b("\n"),s.b("\n"+n),s.b("  /* for IE8 */"),s.b("\n"),s.b("\n"+n),s.b("  .nse_input-wrapper .nse_input .nse_input-show  {"),s.b("\n"+n),s.b("    display: none\\\\9;"),s.b("\n"+n),s.b("  }"),s.b("\n"+n),s.b("  :root *> .nse_input-wrapper .nse_input .nse_input-show { "),s.b("\n"+n),s.b("    display:block;  "),s.b("\n"+n),s.b("  }"),s.b("\n"+n),s.b("  #nse_account-settings-form .nse_input-wrapper label, #nse_account-settings-form .nse_input-wrapper .nse_input-help {"),s.b("\n"+n),s.b("    display: inline\\\\9;"),s.b("\n"+n),s.b("  }"),s.b("\n"),s.b("\n"+n),s.b("  .nse_page-container .nse_section .nse_mobile-only .nse_close-block {"),s.b("\n"+n),s.b("     display:none\\\\9 !important;"),s.b("\n"+n),s.b("   }"),s.b("\n"),s.b("\n"+n),s.b("  .nse_page-container .nse_section .nse_mobile-only {"),s.b("\n"+n),s.b("    background-color:transparent\\\\9 !important;"),s.b("\n"+n),s.b("    color:#000\\\\9 !important;"),s.b("\n"+n),s.b("  }"),s.b("\n"+n),s.b("</style>"),s.fl()},partials:{},subs:{}}),window.Expresso.Templates.Account.UI='<div class="nse_page">\n\n  <ul class="nse_tabs">\n<!--      <li class="nse_tab nse_active-tab"><a href="#/account/preferences" title="edit your newsletter preferences" data-nse-page="nse_preference-centre">Preference Centre</a></li> -->\n    <li class="nse_tab"><a{{ #isLoggedIn }} href="#/account/settings"{{ /isLoggedIn }} title="edit your account settings" data-nse-page="nse_account-settings-content">Account Settings</a></li>\n    <li class="nse_tab"><a{{ #isLoggedIn }} href="#/account/password"{{ /isLoggedIn }} title="change your account password" data-nse-page="nse_change-password-content">Change password</a></li>\n  </ul>\n\n<!--\n  <div class="nse_page-container" id="nse_preference-centre" data-nse-page="nse_preference-centre">\n\n    <div class="nse_section nse_1-5col nse_sidebar">\n\n        {{ #isLoggedIn }}\n          <ul class="nse_account-nav">\n            <li class="nse_account-user">\n              <img src="{{ defaultAvatar }}" class="nse_profile-photo" alt="" />\n              <p class="nse_bold nse_name-container"></p>\n            </li>\n            <li class="nse_account-nav-item"><a href="#/account/settings" title="click here to view your account">Your Account</a></li>\n            <li class="nse_account-nav-item"><a href="#/account/preferences" title="click here to view your email preferences">Your Email News</a></li>\n          </ul>\n        {{ /isLoggedIn }}\n\n        {{^mode}}\n          <h2 class="nse_section-header">Newsletter subscriptions</h2>\n          <div id="nse_subscriptions-container">\n            <p class="nse_section-subheader nse_loading"></p>\n          </div>\n\n        {{/mode}}\n    </div>\n\n    <div class="nse_section nse_3-5col" id="nse_centre-section">\n\n        {{ #isLoggedIn }}\n          <div id="nse_welcome-message"></div>\n        {{ /isLoggedIn }}\n\n        {{ ^isLoggedIn }}\n          <div class="nse_content-block" id="nse_login-message">\n            <h2 class="nse_section-header">You need to be logged in to access the preference centre</h2>\n            <p>Please register or sign in now for instant access.\n\n            <div class="nse_form-submit-wrapper">\n              <a href="#" class="nse_button green" title="Register an account" style="float:left; margin-right:10px" id="nse_pref-register">Register</a>\n              <a href="#" class="nse_button green" title="Sign in to your account" style="float:left;" id="nse_pref-signin">Sign in</a>\n            </div>\n          </div>\n        {{ /isLoggedIn }}\n\n        <div id="nse_unsubscribe-options">\n\n        </div>\n\n        <div id="nse_newsletter-categories"{{ ^isLoggedIn }}  class="nse_frosting"{{ /isLoggedIn }}>\n\n        </div>\n\n        {{#mode}}\n          <h2 class="nse_content-block-header{{ ^isLoggedIn }}  nse_frosting{{ /isLoggedIn }}">Newsletter subscriptions</h2>\n          <div id="nse_subscriptions-container">\n            <p class="nse_section-subheader nse_loading"></p>\n          </div>\n        {{/mode}}\n\n        <h2 class="nse_content-block-header{{ ^isLoggedIn }}  nse_frosting{{ /isLoggedIn }}">Your Email Opt-in Preferences</h2>\n\n        <div class="nse_content-block{{ ^isLoggedIn }}  nse_frosting{{ /isLoggedIn }}" id="nse_opt-in-container">\n          <p class="nse_loading"></p>\n          <div class="nse_checkbox-group-wrapper">\n            <div class="nse_checkbox-wrapper">\n            <div id="nse_prompt-opt-in-to-sub"></div>\n              <input type="checkbox" data-nse-cb="true" data-type="brandOptIn" class="nse_checkbox optin" id="nse_checkbox_brandOptIn" value="one">\n              <label for="nse_checkbox_brandOptIn">{{ brandOptIn }}</label>\n            </div>\n\n            <div class="nse_checkbox-wrapper">\n              <input type="checkbox" data-nse-cb="true" data-type="nsOptIn" class="nse_checkbox optin" id="nse_checkbox_nsOptIn" value="two">\n              <label for="nse_checkbox_nsOptIn">{{ nsOptIn }}</label>\n            </div>\n\n            <div class="nse_checkbox-wrapper">\n              <input type="checkbox" data-nse-cb="true" data-type="thirdPartyOptIn" class="nse_checkbox optin" id="nse_checkbox_thirdPartyOptIn" value="three">\n              <label for="nse_checkbox_thirdPartyOptIn">{{ thirdPartyOptIn }}</label>\n            </div>\n          </div>\n\n          <div class="nse_form-submit-wrapper">\n            <a href="#" class="nse_button green" id="nse_save-preferences">Save</a>\n          </div>\n        </div>\n\n    </div>\n  </div>\n-->\n\n  <div id="nse_account-details"></div>\n\n  <div class="gigya-screen-set" id="Profile-Express-web" style="display:none;">\n\n    <div class="gigya-screen" id="gigya-update-profile-screen">\n\n      <div class="nse_page-container" id="nse_account-settings-content" data-nse-page="nse_account-settings-content">\n        <div class="nse_section nse_3-5col">\n\n\n           {{ ^isLoggedIn }}\n                  <div class="nse_content-block" id="nse_login-message">\n                    <h2 class="nse_section-header">You need to be logged in to access Account Settings</h2>\n                    <p>Please register or sign in now for instant access.\n\n                    <div class="nse_form-submit-wrapper">\n                      <a href="#" class="nse_button green" title="Register an account" style="float:left; margin-right:10px" id="nse_pref-register">Register</a>\n                      <a href="#" class="nse_button green" title="Sign in to your account" style="float:left;" id="nse_pref-signin">Sign in</a>\n                    </div>\n                  </div>\n           {{ /isLoggedIn }}\n\n          {{ #isLoggedIn }}\n\n              <div class="nse_content-block nse_message nse_mobile-only">\n                <h2 class="nse_section-header">Tell us more about yourself so you never miss the best stuff</h2>\n\n                <a href="#" class="nse_close-block">close</a>\n              </div>\n\n              <form id="nse_account-settings-form" class="nse_form gigya-profile-form">\n\n                <div class="gigya-error-display gigya-composite-control gigya-composite-control-form-error" data-bound-to="nse_account-settings-form" style="display: block;">\n                  <div class="gigya-error-msg gigya-form-error-msg nse_bold" data-bound-to="nse_account-settings-form" style=""></div>\n                </div>\n\n                <div class="nse_check-fields nse_bold" style="display:none;">Please check the field(s) below and try again</div>\n\n                <div class="nse_input-wrapper nse_required nse_email-wrapper">\n                  <label for="nse_email">Email</label>\n                  <div class="nse_input"><input type="text" name="email" id="nse_email" maxlength="100" /></div>\n                  <span class="gigya-error-msg gigya-error-display" data-bound-to="email"></span>\n                  <span class="nse_email-taken" style="display: none;">The email address you have provided is taken.</span>\n                </div>\n\n                <div class="nse_screenname-wrapper">\n                    <div class="nse_input-group-wrapper">\n                        <div class="nse_input-wrapper nse_required">\n                            <label for="nse_firstname">First name</label>\n                            <div class="nse_input"><input type="text" name="profile.firstName" id="nse_firstname" maxlength="32" /></div>\n                            <span class="gigya-error-msg gigya-error-display" data-bound-to="profile.firstName"></span>\n                        </div>\n\n                        <div class="nse_input-wrapper nse_required" data-bound-to="profile.lastName">\n                            <label for="nse_lastname">Last name</label>\n                            <div class="nse_input"><input type="text" name="profile.lastName" id="nse_lastname" maxlength="32" /></div>\n                            <span class="gigya-error-msg gigya-error-display" data-bound-to="profile.lastName"></span>\n                        </div>\n                    </div>\n                    <div class="nse_input-wrapper nse_required nse_screenname-input-wrapper nse_screenname-avatar">\n                        <label for="nse_nickname">Screen name</label>\n\n                        <div class="nse_account-nickname">\n                            <div class="nse_input"><input type="text" name="profile.nickname" id="nse_nickname" maxlength="48" /></div>\n                            <span class="gigya-error-msg" data-bound-to="profile.nickname"></span>\n                            <span class="gigya-error-msg nse_screenname-exists"></span>\n                        </div>\n\n                        <div class="nse_account-avatar">\n                          <label>Profile picture</label>\n\n                          <div class="gigya-photo-upload"></div>\n\n                        </div>\n                    </div>\n                </div>\n\n\n\n                <p>By clicking update I understand and agree to the <a href="{{ termsOfUseLink }}" target="_blank" class="nse_bold" title="read our terms of use">Terms of use</a> &amp; <a href="{{ privacyPolicyLink }}" target="_blank" class="nse_bold" title="read our privacy policy">Privacy policy</a></p>\n\n                <div class="nse_form-submit-wrapper">\n                  <input type="submit" id="nse_form-submit" class="nse_button green gigya-input-submit" value="Update account" />\n                </div>\n\n              </form>\n\n            </div>\n          {{ /isLoggedIn }}\n\n      </div>\n    </div>\n\n    <div class="gigya-screen" id="gigya-change-password-screen">\n      <div class="nse_page-container" id="nse_change-password-content" data-nse-page="nse_change-password-content">\n        <div class="nse_section nse_3-5col">\n\n            <div class="nse_content-block nse_message nse_mobile-only">\n              <h2 class="nse_section-header">Change your account password</h2>\n\n              <a href="#" class="nse_close-block">close</a>\n            </div>\n\n          <form id="nse_change-password-form" class="nse_form gigya-profile-form">\n\n            <div class="gigya-error-display gigya-composite-control gigya-composite-control-form-error" data-bound-to="nse_change-password-form" style="display: block;">\n              <div class="gigya-error-msg gigya-form-error-msg nse_bold" data-bound-to="nse_change-password-form" style=""></div>\n            </div>\n\n            <div class="nse_check-fields nse_bold" style="display:none;">Please check the field(s) below and try again</div>\n\n            <div class="nse_input-wrapper nse_required">\n              <label for="nse_new-password">Existing password</label>\n              <div class="nse_input nse_show-content">\n                <span class="nse_input-show">show</span>\n                <input type="password" id="nse_existing-password" name="password" maxlength="100" />\n              </div>\n              <span class="nse_input-hint"><a href="#" class="nse_forgot-password-link" title="Reset your password here">Forgotten password</a></span>\n              <span class="gigya-error-msg gigya-error-display" data-bound-to="password"></span>\n            </div>\n\n            <div class="nse_input-wrapper nse_required">\n              <label for="nse_new-password">New password</label>\n              <span class="nse_input-help">(Use this to change your password)</span>\n              <div class="nse_input nse_show-content">\n                <span class="nse_input-show">show</span>\n                <input type="password" id="nse_new-password" name="newPassword" maxlength="100" />\n              </div>\n              <span class="nse_input-hint">At least 6 characters</span>\n              <span class="gigya-error-msg gigya-error-display" data-bound-to="newPassword"></span>\n            </div>\n\n            <div class="nse_form-submit-wrapper">\n              <input type="submit" id="nse_form-submit" class="nse_button green gigya-input-submit" value="Update password" />\n            </div>\n\n          </form>\n\n        </div>\n      </div>\n    </div>\n\n  </div>\n\n</div>',window.Expresso.Templates.Account.SuggestedNewsletter='<ul class="nse_subscription-list">\n  <li class="nse_subscription" data-newsletter-id="{{ NewsletterId }}">\n    <div class="nse_subscription-container">\n      <h3 class="nse_item-header">{{ Name }}</h3>\n      <p class="nse_frequency">{{ Frequency }}</p>\n      <img src="{{ ImageUrl }}" alt="{{ Name }} thumbnail" class="nse_item-image nse_inline-bottom" />\n      <a href="#" title="Subscribe to this newsletter" class="nse_subscribe nse_inline-bottom" data-newsletter-id="{{ NewsletterId }}">Subscribe</a>\n    </div>\n  </li>\n</ul>',window.Expresso.Templates.ResetPassword='<div class="nse_page">\n  <div class="nse_page-container" id="nse_reset-password">\n    <div class="nse_section nse_3-5col">\n\n      <div id="nse_reset-password-form" class="nse_form">\n\n        <h2 class="nse_section-header">Password reset</h2>\n\n        <p class="nse_enter-password-prompt">Please enter a new password</p>\n        <p class="nse_enter-password-prompt-mobile">Enter a new password</p>\n\n        <div class="gigya-error-display gigya-composite-control gigya-composite-control-form-error" data-bound-to="nse_reset-password-form" style="display: block;">\n          <div class="gigya-error-msg gigya-form-error-msg nse_bold" data-bound-to="nse_reset-password-form" style=""></div>\n        </div>\n\n        <div class="nse_check-fields nse_bold" style="display:none;">Please check the field(s) below and try again</div>\n\n        <div class="nse_input-wrapper nse_required">\n          <label for="nse_new-password">New password</label>\n          <div class="nse_input nse_show-content">\n            <span class="nse_input-show">show</span>\n            <input type="password" id="nse_new-password" name="newPassword" maxlength="100" class="nse_validate-password-length" />\n          </div>\n          <span class="nse_input-hint">At least 6 characters</span>\n          <span class="gigya-error-msg gigya-error-display" data-bound-to="newPassword"></span>\n        </div>\n\n        <div class="nse_form-submit-wrapper">\n          <input type="submit" id="nse_form-submit" class="nse_button green gigya-input-submit" value="Submit" />\n        </div>\n\n      </div>\n\n    </div>\n  </div>\n</div>',window.Expresso.Templates.InstantUnsubscribe='{{ #Preferences }}\n  <h2 class="nse_content-block-header">Preference centre</h2>\n\n  <div class="nse_content-block">\n\n    {{ #Global }}\n    <h2 class="nse_section-header">You have been removed</h2>\n    <p>If you clicked unsubscribe by mistake you can subscribe again below.</p>\n\n    <div class="nse_checkbox-group-wrapper">\n      <div class="nse_checkbox-wrapper">\n        <input type="checkbox" data-nse-cb="true" data-type="brandOptIn" class="nse_checkbox optin" id="nse_checkbox_email_brandOptIn" value="one">\n        <label for="nse_checkbox_brandOptIn">{{ brandOptIn }}</label>\n      </div>\n\n      <div class="nse_checkbox-wrapper">\n        <input type="checkbox" data-nse-cb="true" data-type="nsOptIn" class="nse_checkbox optin" id="nse_checkbox_email_nsOptIn" value="two">\n        <label for="nse_checkbox_nsOptIn">{{ nsOptIn }}</label>\n      </div>\n\n      <div class="nse_checkbox-wrapper">\n        <input type="checkbox" data-nse-cb="true" data-type="thirdPartyOptIn" class="nse_checkbox optin" id="nse_checkbox_email_thirdPartyOptIn" value="three">\n        <label for="nse_checkbox_thirdPartyOptIn">{{ thirdPartyOptIn }}</label>\n      </div>\n    </div>\n\n    <div class="nse_form-submit-wrapper">\n      <a href="#" class="nse_button green" id="nse_resubscribe">Re-subscribe</a>\n      {{ ^LoggedIn }}\n      <span class="nse_form-alt">\n        <a href="#" title="register here" class="nse_unsubscribe-register-link">Register</a>\n        <a href="#" title="sign in here" class="nse_spaced nse_unsubscribe-login-link">Sign in</a>\n      </span>\n      {{ /LoggedIn }}\n    </div>\n    {{ /Global }}\n\n    {{ #Specific }}\n    {{ ^Newsletter }}\n    <h2 class="nse_section-header">No subscription found</h2>\n    {{ /Newsletter }}\n\n    {{ #Newsletter }}\n    <h2 class="nse_section-header">You have been removed</h2>\n    {{ #LoggedIn }}\n    <p>If you clicked unsubscribe by mistake you can subscribe again below.</p>\n    {{ /LoggedIn }}\n    {{ ^LoggedIn }}\n    <p>If you clicked unsubscribe by mistake you can subscribe again by signing in or registering.</p>\n    {{ /LoggedIn }}\n\n    <div class="nse_subscription-container">\n      <h3 class="nse_item-header">{{ Name }}</h3>\n      <p class="nse_frequency">{{ FrequencyDescription }}</p>\n      <img src="{{ ImageUrl }}" alt="{{ Name }} thumbnail" class="nse_item-image nse_inline-bottom" />\n    </div>\n    {{ /Newsletter }}\n\n    <div class="nse_form-submit-wrapper">\n      {{ #LoggedIn }}\n      {{ #Newsletter }}\n      <a href="#" class="nse_button green" id="nse_resubscribe_newsletter" data-newsletter-id="{{ NewsletterId }}" data-frequency="{{ FrequencyDescription }}">Re-subscribe</a>\n      {{ /Newsletter }}\n      {{ #ShowUnsubscribeAll }}\n      <a href="#" class="nse_button red" id="nse_unsubscribe_all">Unsubscribe from all emails</a>\n      {{ /ShowUnsubscribeAll }}\n      {{ /LoggedIn }}\n\n      {{ ^LoggedIn }}\n      <span class="nse_form-alt">\n        <a href="#" title="register here" class="nse_unsubscribe-register-link">Register</a>\n        <a href="#" title="sign in here" class="nse_spaced nse_unsubscribe-login-link">Sign in</a>\n      </span>\n      {{ /LoggedIn }}\n    </div>\n    {{ /Specific }}\n\n  </div>\n\n{{ /Preferences }}',window.Expresso.Templates.WelcomeMessage='<div class="nse_content-block nse_message">\n  <h2 class="nse_section-header">Welcome {{ Name }}</h2>\n  <p>{{ Message }}</p>\n  <a href="#" class="nse_close-block" id="nse_close-welcome-message">close</a>\n</div>',window.Expresso.Templates.Subscriptions.CategoryContainer='<div class="nse_category-container {{ WebSafeCategory }}">\n</div>',window.Expresso.Templates.Subscriptions.Category='{{ #Category }}\n  <h2 class="nse_content-block-header{{ ^isMostPopular }} nse_accordion{{ /isMostPopular }}">{{ Name }}</h2>\n  <div class="nse_content-block nse_grid">\n    <ul class="nse_subscription-list {{ WebSafeTitle }}{{ #isMostPopular }} nse_subscription-list-slider{{ /isMostPopular }}" data-type="{{ WebSafeTitle }}" id="nse_list-{{ WebSafeTitle }}">\n\n      {{ ^Full }}\n      <li class="nse_newsletter-break" data-more="{{ WebSafeTitle }}"><a href="#" class="nse_button grey" data-type="{{ WebSafeTitle }}">Show more</a></li>\n      {{ /Full }}\n\n      {{ #SubCategories }}\n        <li class="nse_subscription-sublist-container">\n          <h3 data-type="{{ WebSafeTitle }}" class="nse_newsletter-subtitle {{ WebSafeTitle }}">{{ Name }}</h3>\n          <ul class="nse_subscription-sublist" id="nse_list-{{ WebSafeTitle }}">\n\n      {{ ^SubFull }}\n      {{ ^Full }}\n        <li class="nse_newsletter-break" data-more="{{ WebSafeTitle }}"><a href="#" class="nse_button grey" data-type="{{ WebSafeTitle }}">Show more</a></li>\n      {{ /Full }}\n      {{ /SubFull }}\n\n          </ul>\n        </li>\n      {{ /SubCategories }}\n\n    </ul>\n  </div>\n\n  {{ #isMostPopular }}\n    <div class="nse_slider-controls"><a href="#" class="nse_slider-prev"><span></span>Prev</a><a href="#" class="nse_slider-next">Next<span></span></a></div>\n  {{ /isMostPopular }}\n\n{{ /Category }}',window.Expresso.Templates.AcquisitionModuleNewsletter='<li class="nse_subscription nse_newsletter" data-newsletter-container="{{ NewsletterId }}" data-category="{{ WebSafeCategory }}">\n  <h3 class="nse_item-header">{{ Name }}</h3>\n  <div class="nse_subscription-container">\n    <img src="{{ ImageUrl }}" alt="image" class="nse_item-image nse_inline-bottom" />\n    {{#Delivery}}\n      <p>{{ Delivery }}</p>\n    {{/Delivery}}\n    <p class="nse_newsletter-description">{{ Description }}</p>\n\n    {{^loggedIn}}\n      {{#mode}}\n        <p class="nse_bold">{{AcquisitionLoginButton}}</p>\n        <a href="#" class="nse_acquisition-login-link nse_button" data-login-required="true">{{AcquisitionLoginButtonMobile}}</a>\n      {{/mode}}\n      {{^mode}}\n        <a href="#" class="nse_acquisition-login-link nse_button" data-login-required="true">{{AcquisitionLoginButton}}</a>\n      {{/mode}}\n    {{/loggedIn}}\n    {{#loggedIn}}\n      {{ ^ShowFrequencies }}\n\n      {{ #Subscribed }}\n      <a href="#" class="nse_button nse_subscribed" data-newsletter-id="{{ NewsletterId }}" data-subscribe-text="{{SubscribeButton}}" data-unsubscribe-text="{{UnsubscribeButton}}">{{UnsubscribeButton}}</a>\n      {{ /Subscribed }}\n\n      {{ ^Subscribed }}\n      <a href="#" class="nse_button nse_subscribe" data-newsletter-id="{{ NewsletterId }}" data-subscribe-text="{{SubscribeButton}}" data-unsubscribe-text="{{UnsubscribeButton}}">{{SubscribeButton}}</a>\n      {{ /Subscribed }}\n\n      {{ /ShowFrequencies }}\n\n      {{ #ShowFrequencies }}\n      <div class="nse_align-buttons">\n\n      {{ #Subscribed }}\n      <a href="#" class="nse_button nse_subscribed" data-newsletter-id="{{ NewsletterId }}" data-subscribe-text="{{SubscribeButton}}" data-unsubscribe-text="{{UnsubscribeButton}}">{{UnsubscribeButton}}</a>\n      {{ /Subscribed }}\n\n      {{ ^Subscribed }}\n      <a href="#" class="nse_button nse_subscribe" data-newsletter-id="{{ NewsletterId }}" data-subscribe-text="{{SubscribeButton}}" data-unsubscribe-text="{{UnsubscribeButton}}">{{SubscribeButton}}</a>\n      {{ /Subscribed }}\n\n      <div class="nse_select-wrapper">\n        <select class="nse_frequency-select nodropkick">\n          {{ #FrequencyChoices }}\n          <option value="{{ PublicationListId }}">{{ Frequency }}</option>\n          {{ /FrequencyChoices }}\n        </select>\n      </div>\n\n      </div>\n      {{ /ShowFrequencies }}\n    {{/loggedIn}}\n  </div>\n</li>',window.Expresso.Templates.Subscriptions.Newsletter='<li class="nse_subscription nse_newsletter" data-newsletter-container="{{ NewsletterId }}" data-category="{{ WebSafeCategory }}">\n    <div class="nse_subscription-container">\n      <div class="nse_subscription-container-content">\n        <h3 class="nse_item-header">{{ Name }}</h3>\n        <p class="nse_frequency">{{ Delivery }}</p>\n        <img src="{{ ImageUrl }}" alt="image" class="nse_item-image nse_inline-bottom" />\n        <p class="nse_newsletter-description">{{ Description }}</p>\n      </div>\n\n      {{^loggedIn}}\n        <a href="#" class="nse_button green nse_subscribe" >Subscribe</a>\n      {{/loggedIn}}\n\n      {{#loggedIn}}\n        {{ ^ShowFrequencies }}\n\n        {{ #Subscribed }}\n          <a href="#" class="nse_button green nse_subscribed" data-newsletter-id="{{ NewsletterId }}" data-subscribe-text="{{SubscribeButton}}" data-unsubscribe-text="{{UnsubscribeButton}}">{{UnsubscribeButton}}</a>\n        {{ /Subscribed }}\n\n        {{ ^Subscribed }}\n          <a href="#" class="nse_button green nse_subscribe" data-newsletter-id="{{ NewsletterId }}" data-subscribe-text="{{SubscribeButton}}" data-unsubscribe-text="{{UnsubscribeButton}}">{{SubscribeButton}}</a>\n        {{ /Subscribed }}\n\n        {{ /ShowFrequencies }}\n\n        {{ #ShowFrequencies }}\n\n        {{ #Subscribed }}\n          <a href="#" class="nse_button green nse_subscribed nse_half-width" data-newsletter-id="{{ NewsletterId }}" data-subscribe-text="{{SubscribeButton}}" data-unsubscribe-text="{{UnsubscribeButton}}">{{UnsubscribeButton}}</a>\n        {{ /Subscribed }}\n\n        {{ ^Subscribed }}\n          <a href="#" class="nse_button green nse_subscribe nse_half-width" data-newsletter-id="{{ NewsletterId }}" data-subscribe-text="{{SubscribeButton}}" data-unsubscribe-text="{{UnsubscribeButton}}">{{SubscribeButton}}</a>\n        {{ /Subscribed }}\n\n        <div class="nse_select-wrapper nse_half-width">\n          <select class="nse_frequency-select nodropkick">\n            {{ #FrequencyChoices }}\n              <option value="{{ PublicationListId }}">{{ Frequency }}</option>\n            {{ /FrequencyChoices }}\n          </select>\n        </div>\n        {{ /ShowFrequencies }}\n      {{/loggedIn}}\n    </div>\n  </li>',window.Expresso.Templates.Subscriptions.Newsletters='{{ #Newsletters }}\n\n{{ #Break }}\n  <li class="nse_newsletter-break" data-category="{{ WebSafeCategory }}"></li>\n{{ /Break }}\n\n{{ ^Break }}\n  {{>Newsletter}}\n{{ /Break }}\n\n{{ /Newsletters }}',window.Expresso.Templates.Subscriptions.SubscriptionList='<ul class="nse_subscription-list">\n  <li id="nse_remove-all-parent"><a href="#" class="nse_button red" title="remove all your newsletters" id="nse_remove-all">Remove all</a></li>\n</ul>',window.Expresso.Templates.Subscriptions.Subscription='{{ #Subscriptions }}\n  <li class="nse_subscription" data-newsletter-id="{{ NewsletterId }}">\n    <div class="nse_subscription-container">\n      <h3 class="nse_item-header">{{ Name }}</h3>\n      <p class="nse_frequency">{{ Frequency }}</p>\n      <img src="{{ ImageUrl }}" alt="{{ Name }} thumbnail" class="nse_item-image nse_inline-bottom" />\n      <a href="#" title="Remove this item" class="nse_remove-item nse_inline-bottom" data-newsletter-id="{{ NewsletterId }}">Remove</a>\n    </div>\n  </li>\n{{ /Subscriptions }}',window.Expresso.Templates.Subscriptions.NoSubscriptions='<p class="nse_section-subheader">Your chosen newsletters will appear here, why not add some now?</p>',window.Expresso.Templates.Subscriptions.NotLoggedInSubscriptions='<p class="nse_section-subheader">Your chosen newsletters will appear here, when you are logged in.</p>',window.Expresso.Templates.RegistrationDialog.SuggestedNewsletters='<p class="nse_bold">{{ SectionTitle }}</p>\n\n<ul class="nse_subscription-list nse_subscription-list-slider">\n  {{ #Newsletters }}\n\n  {{ #Break }}\n    <li class="nse_newsletter-break"></li>\n  {{ /Break }}\n\n  {{ ^Break }}\n    <li class="nse_subscription nse_newsletter">\n      <div class="nse_subscription-container">\n        <h3 class="nse_item-header">{{ Name }}</h3>\n        <p class="nse_frequency">{{ FrequencyDescription }}</p>\n        <img src="{{ ImageUrl }}" alt="image" class="nse_item-image" />\n        <a href="#" id="nse_dialog-subscribe" class="nse_button green" data-newsletter-id="{{ NewsletterId }}">Subscribe</a>\n      </div>\n    </li>\n  {{ /Break }}\n\n  {{ /Newsletters }}\n</ul>',window.Expresso.Templates.RegistrationDialog.SubscribedNewsletter='<p class="nse_bold">{{ SectionTitle }}</p>\n\n<ul class="nse_dialog-subscribed-list nse_subscription-list">\n{{ #Newsletters }}\n\n{{ #Break }}\n  <li class="nse_newsletter-break"></li>\n{{ /Break }}\n\n{{ ^Break }}\n  <li class="nse_subscription nse_newsletter">\n    <div class="nse_subscription-container">\n      <div class="img-container">\n        <img src="{{ ImageUrl }}" alt="image" class="nse_item-image" />\n      </div>\n      <div class="text-container">\n        <h3 class="nse_item-header">{{ Name }}</h3>\n        <p class="nse_frequency">{{ Frequency }}</p>\n        <a href="#" class="nse_remove-subscription-from-dialog" data-newsletter-id="{{ NewsletterId }}">Remove</a>\n      </div>\n    </div>\n  </li>\n{{ /Break }}\n\n{{ /Newsletters }}\n</ul>\n\n{{ #ShowHiddenSubscriptionsText }}\n<p class="nse_more-subscribed-message">{{ HiddenSubscriptionsText }}</p>\n{{ /ShowHiddenSubscriptionsText }}\n',function(){var e,t,n,s,i;for(s=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],e=n.length,window.console=window.console=window.console||{},i=[];e--;)t=n[e],i.push(window.console[t]?void 0:window.console[t]=s);
return i}();var dispatchFakeEvent,event,extend=function(e,t){function n(){this.constructor=e}for(var s in t)hasProp.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;window.Expresso.Routing.AppRouter=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.routes={"unsubscribe/all*params":"globalUnsubscribe","unsubscribe*params":"specificUnsubscribe","account/resetpassword/*params":"resetPassword","account/preferences":"accountSettings","account/settings":"accountSettings","account/password":"accountPassword","*path":"defaultRoute"},t.prototype.parse=function(e){var t,n;return n={},e?(t=e.split("&"),_.each(t,function(e){var t;return t=e.split("="),n[t[0]]=t[1]}),n):void 0},t}(Backbone.Router),window.Expresso.appRouter=new window.Expresso.Routing.AppRouter,dispatchFakeEvent=function(e,t,n){var s;return n=null!=(s=!n)?s:{"false":!0},1===e.nodeType&&e[t]>=0&&e[t]++,n&&e!==document?dispatchFakeEvent(e.parentNode,t,n):void 0},event=null,document.createEvent&&(event=document.createEvent("HTMLEvents"),event.initEvent("expresso_loaded",!0,!0),event.eventName="expresso_loaded"),document.createEvent?document.dispatchEvent(event):dispatchFakeEvent(document.documentElement,"expresso_loaded",!0);