(function(window){var miniDom={};window.miniDom=miniDom;miniDom.animate=function(node,props,duration,easing,complete){duration=duration||400;easing=easing||"";complete=complete||function(){};var transition=[];for(var prop in props){node.style[prop]=props[prop];transition.push(prop+" "+duration+"ms "+easing)}node.style.transition=transition;setTimeout(complete,duration)};function inArray(arr,item){return arr.indexOf(item)!==-1}function getClasses(node){return node.className.split(/\s+/)}miniDom.hasClass=function(node,cls){var c=getClasses(node);return inArray(c,cls)};miniDom.addClass=function(node,cls){var classNames=getClasses(node);var changed=false,classesToAdd=cls.split(/\s+/);for(var i=0;i<classesToAdd.length;i++){if(!inArray(classNames,classesToAdd[i])){classNames.push(classesToAdd[i]);changed=true}}if(changed){node.className=classNames.join(" ")}};miniDom.removeClass=function(node,cls){var classNames=getClasses(node);var classesToAdd=cls.split(/\s+/);var changed=false;classNames=classNames.filter(function(item){if(inArray(classesToAdd,item)){changed=true;return false}return true});if(changed){node.className=classNames.join(" ")}};miniDom.toggleClass=function(node,cls,enable){if(enable===void 0){enable=!miniDom.hasClass(node,cls)}return enable?miniDom.addClass(node,cls):miniDom.removeClass(node,cls)};miniDom.walk=function(node,func,predicate){while(node){if(predicate(node)){return node}node=func(node)}};miniDom.closest=function(node,predicate){return miniDom.walk(node,function(n){var p=n.parentNode;return p!==document&&p},predicate)};miniDom.isElement=function(node){return node&&node.nodeType===1};miniDom.on=function(obj,type,fn){if(obj.addEventListener){obj.addEventListener(type,fn,false);EventCache.add(obj,type,fn)}else if(obj.attachEvent){obj["e"+type+fn]=fn;obj[type+fn]=function(){obj["e"+type+fn](window.event)};obj.attachEvent("on"+type,obj[type+fn]);EventCache.add(obj,type,fn)}else{obj["on"+type]=obj["e"+type+fn]}};var EventCache=function(){var listEvents=[];return{listEvents:listEvents,add:function(node,sEventName,fHandler){listEvents.push(arguments)},flush:function(){var i,item;for(i=listEvents.length-1;i>=0;i=i-1){item=listEvents[i];if(item[0].removeEventListener){item[0].removeEventListener(item[1],item[2],item[3])}if(item[1].substring(0,2)!="on"){item[1]="on"+item[1]}if(item[0].detachEvent){item[0].detachEvent(item[1],item[2])}item[0][item[1]]=null}}}}();miniDom.on(window,"unload",EventCache.flush);miniDom.getElementsByClassName=function(d,search){if(d.getElementsByClassName)return d.getElementsByClassName(search);else{var elements,pattern,i,results=[];if(d.querySelectorAll){return d.querySelectorAll("."+search)}if(document.evaluate){pattern=".//*[contains(concat(' ', @class, ' '), ' "+search+" ')]";elements=document.evaluate(pattern,d,null,0,null);while(i=elements.iterateNext()){results.push(i)}}else{elements=d.getElementsByTagName("*");pattern=new RegExp("(^|\\s)"+search+"(\\s|$)");for(i=0;i<elements.length;i++){if(pattern.test(elements[i].className)){results.push(elements[i])}}}return results}};miniDom.getSize=function(elem,name){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])};miniDom.getPageSize=function(){var xScroll,yScroll;if(window.innerHeight&&window.scrollMaxY){xScroll=document.body.scrollWidth;yScroll=window.innerHeight+window.scrollMaxY}else if(document.body.scrollHeight>document.body.offsetHeight){xScroll=document.body.scrollWidth;yScroll=document.body.scrollHeight}else{xScroll=document.body.offsetWidth;yScroll=document.body.offsetHeight}var windowWidth,windowHeight;if(self.innerHeight){windowWidth=self.innerWidth;windowHeight=self.innerHeight}else if(document.documentElement&&document.documentElement.clientHeight){windowWidth=document.documentElement.clientWidth;windowHeight=document.documentElement.clientHeight}else if(document.body){windowWidth=document.body.clientWidth;windowHeight=document.body.clientHeight}return[xScroll,yScroll,windowWidth,windowHeight]};miniDom.getOffset=function(element){var docElem,win,box={top:0,left:0},doc=element&&element.ownerDocument;if(!doc){return}docElem=doc.documentElement;if(element.getBoundingClientRect){box=element.getBoundingClientRect()}win=miniDom.getWindow(doc);return{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}};miniDom.getWindow=function(elem){var win=null;if(elem){if(elem===elem.window){win=elem}else if(elem.nodeType===9){win=elem.defaultView||elem.parentWindow}else if(elem.ownerDocument){win=elem.ownerDocument.defaultView||elem.ownerDocument.parentWindow}}return win};miniDom.cookieHelper={setItem:function(sKey,sValue){if(!sKey||/^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)){return false}document.cookie=encodeURIComponent(sKey)+"="+encodeURIComponent(sValue)+"; path=/";return true},getItem:function(sKey){if(!sKey){return null}return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},hasItem:function(sKey){if(!sKey){return false}return new RegExp("(?:^|;\\s*)"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},removeItem:function(sKey){if(!this.hasItem(sKey)){return false}document.cookie=encodeURIComponent(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/";return true}}})(window);
//# sourceMappingURL=minidom.js.map
